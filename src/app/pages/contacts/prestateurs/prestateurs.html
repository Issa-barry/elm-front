<div class="card">
  <p-table
    #dt
    [value]="customers"
    [paginator]="true"
    paginatorDropdownAppendTo="body"
    [rows]="10"
    [showCurrentPageReport]="true"
    responsiveLayout="scroll"
    currentPageReportTemplate="  {first} / {last} de {totalRecords} entrÃ©es"
    [rowsPerPageOptions]="[10, 25, 50]"
    [globalFilterFields]="['name', 'country.name', 'representative.name']"
    selectionMode="single"
    [(selection)]="selectedCustomer"
    (onRowSelect)="onRowSelect($event)"
    [rowHover]="true"
    styleClass="cursor-pointer"
  >
    <ng-template #caption>
      <div class="flex flex-wrap gap-2 items-center justify-between">
        <p-icon-field class="w-full sm:w-80 order-1 sm:order-0">
          <p-inputicon class="pi pi-search" />
          <input
            pInputText
            type="text"
            (input)="onGlobalFilter(dt, $event)"
            placeholder="Recherche"
            class="w-full"
          />
        </p-icon-field>
        <button
          (click)="navigateToCreateUser()"
          pButton
          outlined
          class="w-full sm:w-auto flex-order-0 sm:flex-order-1"
          icon="pi pi-user-plus"
          label="Nouveau"
        ></button>
      </div>
    </ng-template>

    <ng-template #header>
      <tr>
        <th pSortableColumn="name" class="white-space-nowrap" style="width:23%">
          <span class="flex items-center gap-2">
            Nom <p-sortIcon field="name"></p-sortIcon>
          </span>
        </th>
        <th pSortableColumn="country.name" class="white-space-nowrap" style="width:23%">
          <span class="flex items-center gap-2">
            Adresse <p-sortIcon field="country.name"></p-sortIcon>
          </span>
        </th>
        <th pSortableColumn="date" class="white-space-nowrap" style="width:23%">
          <span class="flex items-center gap-2">
            Phone <p-sortIcon field="date"></p-sortIcon>
          </span>
        </th>
        <th pSortableColumn="activity" class="white-space-nowrap">
          <span class="flex items-center gap-2">
            Statut <p-sortIcon field="activity"></p-sortIcon>
          </span>
        </th>
      </tr>
    </ng-template>

    <ng-template #body let-customer>
      <tr [pSelectableRow]="customer">
        <td>{{ customer.name }}</td>
        <td>
          <div class="flex items-center gap-2">
            <img
              src="https://primefaces.org/cdn/primeng/images/flag/flag_placeholder.png"
              [class]="'flag flag-' + customer.country.code"
              class="mr-2"
            />
            <span class="image-text">{{ customer.country.name }}</span>
          </div>
        </td>
        <td>{{ customer.date | date: 'MM/dd/yyyy' }}</td>
        <td>
          <p-progressBar
            [value]="customer.activity"
            [showValue]="false"
            [style]="{ height: '.5rem' }"
          ></p-progressBar>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>