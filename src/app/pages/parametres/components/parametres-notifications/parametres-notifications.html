<div class="flex flex-col gap-8">

    <!-- Titre section -->
    <div class="text-surface-900 dark:text-surface-0 font-semibold text-lg leading-tight">
        Notifications de stock
    </div>

    <!-- État chargement -->
    <div *ngIf="loading" class="text-surface-400 text-sm flex items-center gap-2">
        <i class="pi pi-spin pi-spinner"></i> Chargement des paramètres…
    </div>

    <ng-container *ngIf="!loading">

        <!-- Card paramètres -->
        <div class="border border-surface-200 dark:border-surface-700 rounded-xl overflow-hidden">

            <!-- En-tête de la card -->
            <div class="bg-surface-50 dark:bg-surface-800 px-6 py-4 border-b border-surface-200 dark:border-surface-700">
                <p class="m-0 text-sm text-surface-500 dark:text-surface-300">
                    Alertes automatiques envoyées aux admins pour les ruptures de stock sur les produits critiques.
                </p>
            </div>

            <!-- Ligne 1 : Activer les notifications -->
            <div class="flex items-start justify-between gap-6 px-6 py-5
                        border-b border-surface-200 dark:border-surface-700">
                <div class="flex flex-col gap-1">
                    <span class="text-surface-900 dark:text-surface-0 font-medium">
                        Activer les notifications de rupture de stock
                    </span>
                    <span class="text-sm text-surface-500 dark:text-surface-400"
                          *ngIf="stockActivesParam?.description">
                        {{ stockActivesParam?.description }}
                    </span>
                </div>
                <p-toggleswitch
                    [(ngModel)]="stockActives"
                    [disabled]="saving"
                />
            </div>

            <!-- Ligne 2 : Délai cooldown -->
            <div class="flex items-start justify-between gap-6 px-6 py-5"
                 [class.opacity-50]="!stockActives">
                <div class="flex flex-col gap-1">
                    <span class="text-surface-900 dark:text-surface-0 font-medium">
                        Délai entre notifications (minutes)
                    </span>
                    <span class="text-sm text-surface-500 dark:text-surface-400"
                          *ngIf="cooldownParam?.description">
                        {{ cooldownParam?.description }}
                    </span>
                </div>
                <p-inputnumber
                    [(ngModel)]="cooldownMins"
                    [min]="0"
                    [step]="5"
                    [showButtons]="true"
                    buttonLayout="horizontal"
                    decrementButtonIcon="pi pi-minus"
                    incrementButtonIcon="pi pi-plus"
                    [disabled]="saving || !stockActives"
                    inputStyleClass="w-20 text-center"
                />
            </div>

        </div>

        <!-- Bouton enregistrer -->
        <div>
            <p-button
                label="Enregistrer"
                icon="pi pi-save"
                [loading]="saving"
                [disabled]="saving"
                (onClick)="save()"
            />
        </div>

    </ng-container>

</div>
