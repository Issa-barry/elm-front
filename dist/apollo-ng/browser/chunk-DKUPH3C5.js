import {
  Skeleton
} from "./chunk-AVWV2T7H.js";
import {
  Divider
} from "./chunk-URIQGGXQ.js";
import {
  Card
} from "./chunk-Y2HPSWRR.js";
import {
  FloatLabel
} from "./chunk-WWW46G7Z.js";
import {
  ProductService
} from "./chunk-LSICPM5K.js";
import {
  environment
} from "./chunk-PPDE6QN3.js";
import {
  Toolbar,
  ToolbarModule
} from "./chunk-GUNNI5O7.js";
import {
  Chip
} from "./chunk-IFPN5NGS.js";
import {
  ConfirmDialog,
  ConfirmDialogModule
} from "./chunk-7DLMVGDO.js";
import {
  Dialog,
  DialogModule
} from "./chunk-GU6CNOKS.js";
import {
  Toast,
  ToastModule
} from "./chunk-ZG66MDSF.js";
import "./chunk-KZ2XEJBQ.js";
import {
  Textarea,
  TextareaModule
} from "./chunk-SNWJRZDT.js";
import {
  Router
} from "./chunk-VYPJWBQM.js";
import "./chunk-K745LLV4.js";
import "./chunk-QM3EJKHT.js";
import {
  SortIcon,
  SortableColumn,
  Table,
  TableCheckbox,
  TableHeaderCheckbox,
  TableModule
} from "./chunk-VYTCGADS.js";
import "./chunk-HX6AAUEU.js";
import "./chunk-U3BOOR2A.js";
import {
  DatePicker,
  DatePickerModule
} from "./chunk-ATTBT5LJ.js";
import "./chunk-M54353BN.js";
import "./chunk-S7EQZUZC.js";
import "./chunk-FT7WFYEI.js";
import {
  InputNumber,
  InputNumberModule
} from "./chunk-H2TDPVQC.js";
import "./chunk-GM56SEQR.js";
import "./chunk-OYDBCBVT.js";
import {
  Select,
  SelectModule
} from "./chunk-ADT2GN44.js";
import "./chunk-X3MCY454.js";
import "./chunk-BICDQRLL.js";
import "./chunk-JPETFPPG.js";
import "./chunk-KG7RE235.js";
import "./chunk-UHMM7FE7.js";
import "./chunk-SUK52LSR.js";
import {
  Tag,
  TagModule
} from "./chunk-KX7MGO2E.js";
import "./chunk-3UGMWDW4.js";
import "./chunk-UONKXDMG.js";
import "./chunk-KFLL2YOX.js";
import "./chunk-WQC3TYUA.js";
import {
  IconField,
  IconFieldModule,
  InputIcon,
  InputIconModule
} from "./chunk-EXWZQDGS.js";
import {
  InputText,
  InputTextModule
} from "./chunk-YW263GEX.js";
import {
  DefaultValueAccessor,
  FormsModule,
  NgControlStatus,
  NgModel
} from "./chunk-HEGGX7RQ.js";
import {
  Tooltip,
  TooltipModule
} from "./chunk-HZAHIETM.js";
import {
  HttpClient,
  HttpParams
} from "./chunk-UXOAS4MB.js";
import "./chunk-BVWUZ6O2.js";
import {
  Button,
  ButtonModule
} from "./chunk-O7LMIZSN.js";
import "./chunk-CJMBUE5J.js";
import "./chunk-BNKYD7VX.js";
import {
  Badge
} from "./chunk-XLSVDIRK.js";
import {
  RippleModule
} from "./chunk-HURDVDQD.js";
import "./chunk-CUNICK74.js";
import {
  ConfirmationService,
  MessageService,
  PrimeTemplate
} from "./chunk-6R3XSTEB.js";
import {
  CommonModule,
  NgClass,
  NgIf
} from "./chunk-KASXF2RH.js";
import "./chunk-WWG27WRZ.js";
import {
  Component,
  Injectable,
  ViewChild,
  setClassMetadata,
  signal,
  ɵsetClassDebugInfo,
  ɵɵProvidersFeature,
  ɵɵadvance,
  ɵɵclassMap,
  ɵɵdefineComponent,
  ɵɵdefineInjectable,
  ɵɵdirectiveInject,
  ɵɵdomElement,
  ɵɵdomElementEnd,
  ɵɵdomElementStart,
  ɵɵelement,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵinject,
  ɵɵlistener,
  ɵɵloadQuery,
  ɵɵnamespaceHTML,
  ɵɵnamespaceSVG,
  ɵɵnextContext,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵpureFunction2,
  ɵɵqueryRefresh,
  ɵɵreference,
  ɵɵresetView,
  ɵɵrestoreView,
  ɵɵstyleMap,
  ɵɵstyleProp,
  ɵɵtemplate,
  ɵɵtemplateRefExtractor,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtextInterpolate2,
  ɵɵtwoWayBindingSet,
  ɵɵtwoWayListener,
  ɵɵtwoWayProperty,
  ɵɵviewQuery
} from "./chunk-5J4QQBGF.js";
import {
  __spreadProps,
  __spreadValues
} from "./chunk-4MWRP73S.js";

// src/app/pages/comptabilite/packing-paiement/packing-paiement.ts
var _c0 = () => ["contact.nom", "contact.prenom", "contact.phone", "reference_paiement"];
var _c1 = () => [10, 25, 50];
var _c2 = () => ({ width: "90vw", "max-width": "500px" });
var _c3 = () => ({ width: "90vw", "max-width": "600px" });
var _c4 = (a0, a1) => ({ "text-green-600 dark:text-green-400": a0, "text-orange-600 dark:text-orange-400": a1 });
function PackingPaiement_ng_template_54_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 43)(1, "p-button", 44);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_54_Template_p_button_onClick_1_listener() {
      \u0275\u0275restoreView(_r2);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.exportPDF());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "p-button", 45);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_54_Template_p_button_onClick_2_listener() {
      \u0275\u0275restoreView(_r2);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.exportExcel());
    });
    \u0275\u0275elementEnd()();
  }
}
function PackingPaiement_ng_template_57_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 46)(1, "span", 47);
    \u0275\u0275element(2, "i", 48);
    \u0275\u0275elementStart(3, "input", 49);
    \u0275\u0275twoWayListener("ngModelChange", function PackingPaiement_ng_template_57_Template_input_ngModelChange_3_listener($event) {
      \u0275\u0275restoreView(_r4);
      const ctx_r2 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r2.searchValue, $event) || (ctx_r2.searchValue = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("input", function PackingPaiement_ng_template_57_Template_input_input_3_listener() {
      \u0275\u0275restoreView(_r4);
      const ctx_r2 = \u0275\u0275nextContext();
      const dt_r5 = \u0275\u0275reference(56);
      return \u0275\u0275resetView(dt_r5.filterGlobal(ctx_r2.searchValue, "contains"));
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(4, "p-button", 50);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_57_Template_p_button_onClick_4_listener() {
      \u0275\u0275restoreView(_r4);
      const ctx_r2 = \u0275\u0275nextContext();
      const dt_r5 = \u0275\u0275reference(56);
      return \u0275\u0275resetView(ctx_r2.clear(dt_r5));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.searchValue);
    \u0275\u0275advance();
    \u0275\u0275property("outlined", true);
  }
}
function PackingPaiement_ng_template_58_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 51);
    \u0275\u0275element(2, "p-tableHeaderCheckbox");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th", 52);
    \u0275\u0275text(4, " Contact ");
    \u0275\u0275element(5, "p-sortIcon", 53);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "th", 54);
    \u0275\u0275text(7, " P\xE9riode ");
    \u0275\u0275element(8, "p-sortIcon", 55);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th", 56);
    \u0275\u0275text(10, " Rouleaux ");
    \u0275\u0275element(11, "p-sortIcon", 57);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "th", 58);
    \u0275\u0275text(13, " Montant Total ");
    \u0275\u0275element(14, "p-sortIcon", 59);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "th", 60);
    \u0275\u0275text(16, " Montant Pay\xE9 ");
    \u0275\u0275element(17, "p-sortIcon", 61);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "th", 62);
    \u0275\u0275text(19, " Reste \xE0 Payer ");
    \u0275\u0275element(20, "p-sortIcon", 63);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "th", 64);
    \u0275\u0275text(22, " Statut Paiement ");
    \u0275\u0275element(23, "p-sortIcon", 65);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "th", 66);
    \u0275\u0275text(25, "Actions");
    \u0275\u0275elementEnd()();
  }
}
function PackingPaiement_ng_template_59_span_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 73);
    \u0275\u0275element(1, "i", 84);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const packing_r7 = \u0275\u0275nextContext().$implicit;
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatDate(packing_r7.date_fin), " ");
  }
}
function PackingPaiement_ng_template_59_p_tag_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-tag", 85);
  }
  if (rf & 2) {
    \u0275\u0275property("rounded", true);
  }
}
function PackingPaiement_ng_template_59_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr")(1, "td");
    \u0275\u0275element(2, "p-tableCheckbox", 67);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "td")(4, "div", 68)(5, "span", 69);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 70);
    \u0275\u0275element(8, "i", 71);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(10, "td")(11, "div", 72)(12, "span", 73);
    \u0275\u0275element(13, "i", 74);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd();
    \u0275\u0275template(15, PackingPaiement_ng_template_59_span_15_Template, 3, 1, "span", 75)(16, PackingPaiement_ng_template_59_p_tag_16_Template, 1, 1, "p-tag", 76);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "td", 77);
    \u0275\u0275element(18, "p-chip", 78);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "td", 77)(20, "span", 69);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(22, "td", 77)(23, "span", 79);
    \u0275\u0275text(24);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(25, "td", 77)(26, "span", 80);
    \u0275\u0275text(27);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(28, "td");
    \u0275\u0275element(29, "p-tag", 81);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(30, "td")(31, "div", 43)(32, "p-button", 82);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_59_Template_p_button_onClick_32_listener() {
      const packing_r7 = \u0275\u0275restoreView(_r6).$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.openDetailsDialog(packing_r7));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "p-button", 83);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_59_Template_p_button_onClick_33_listener() {
      const packing_r7 = \u0275\u0275restoreView(_r6).$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.openPaiementDialog(packing_r7));
    });
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const packing_r7 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275property("value", packing_r7);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate2(" ", packing_r7.contact == null ? null : packing_r7.contact.prenom, " ", packing_r7.contact == null ? null : packing_r7.contact.nom, " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", packing_r7.contact == null ? null : packing_r7.contact.phone, " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatDate(packing_r7.date_debut), " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", packing_r7.date_fin);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !packing_r7.date_fin);
    \u0275\u0275advance(2);
    \u0275\u0275property("label", (packing_r7.nombre_rouleaux == null ? null : packing_r7.nombre_rouleaux.toString()) || "0");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(packing_r7.montant), " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(packing_r7.montant_paye), " ");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngClass", \u0275\u0275pureFunction2(20, _c4, packing_r7.montant_restant === 0, packing_r7.montant_restant && packing_r7.montant_restant > 0));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(packing_r7.montant_restant), " ");
    \u0275\u0275advance(2);
    \u0275\u0275property("value", packing_r7.statut_paiement === "paye" ? "Pay\xE9" : packing_r7.statut_paiement === "partiel" ? "Partiel" : "Non Pay\xE9")("severity", ctx_r2.getPaiementSeverity(packing_r7.statut_paiement))("rounded", true);
    \u0275\u0275advance(3);
    \u0275\u0275property("rounded", true)("text", true);
    \u0275\u0275advance();
    \u0275\u0275property("rounded", true)("text", true)("disabled", packing_r7.statut_paiement === "paye");
  }
}
function PackingPaiement_ng_template_60_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 86)(2, "div", 87);
    \u0275\u0275element(3, "i", 88);
    \u0275\u0275elementStart(4, "p", 89);
    \u0275\u0275text(5, " Aucun paiement trouv\xE9 ");
    \u0275\u0275elementEnd()()()();
  }
}
function PackingPaiement_ng_template_61_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 90)(2, "div", 91);
    \u0275\u0275element(3, "p-skeleton", 92)(4, "p-skeleton", 92)(5, "p-skeleton", 92);
    \u0275\u0275elementEnd()()();
  }
}
function PackingPaiement_div_63_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 93)(1, "div", 94)(2, "div", 95);
    \u0275\u0275element(3, "i", 96);
    \u0275\u0275elementStart(4, "span", 97);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 70);
    \u0275\u0275element(7, "i", 71);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 98)(10, "div", 99)(11, "div", 100);
    \u0275\u0275text(12, " Nombre de rouleaux ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "div", 97);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "div", 99)(16, "div", 100);
    \u0275\u0275text(17, " Montant total ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "div", 69);
    \u0275\u0275text(19);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(20, "div", 99)(21, "div", 100);
    \u0275\u0275text(22, " D\xE9j\xE0 pay\xE9 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "div", 79);
    \u0275\u0275text(24);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(25, "div", 99)(26, "div", 100);
    \u0275\u0275text(27, " Reste \xE0 payer ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "div", 101);
    \u0275\u0275text(29);
    \u0275\u0275elementEnd()()();
    \u0275\u0275element(30, "p-divider");
    \u0275\u0275elementStart(31, "div", 102)(32, "p-floatLabel")(33, "p-inputNumber", 103);
    \u0275\u0275twoWayListener("ngModelChange", function PackingPaiement_div_63_Template_p_inputNumber_ngModelChange_33_listener($event) {
      \u0275\u0275restoreView(_r8);
      const ctx_r2 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r2.montantPaiement, $event) || (ctx_r2.montantPaiement = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(34, "label", 104);
    \u0275\u0275text(35, " Montant du paiement ");
    \u0275\u0275elementStart(36, "span", 105);
    \u0275\u0275text(37, "*");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(38, "div", 102)(39, "p-floatLabel")(40, "p-datePicker", 106);
    \u0275\u0275twoWayListener("ngModelChange", function PackingPaiement_div_63_Template_p_datePicker_ngModelChange_40_listener($event) {
      \u0275\u0275restoreView(_r8);
      const ctx_r2 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r2.datePaiement, $event) || (ctx_r2.datePaiement = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(41, "label", 107);
    \u0275\u0275text(42, " Date de paiement ");
    \u0275\u0275elementStart(43, "span", 105);
    \u0275\u0275text(44, "*");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(45, "div", 102)(46, "p-floatLabel")(47, "p-select", 108);
    \u0275\u0275twoWayListener("ngModelChange", function PackingPaiement_div_63_Template_p_select_ngModelChange_47_listener($event) {
      \u0275\u0275restoreView(_r8);
      const ctx_r2 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r2.modePaiementSelectionne, $event) || (ctx_r2.modePaiementSelectionne = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(48, "label", 109);
    \u0275\u0275text(49, " Mode de paiement ");
    \u0275\u0275elementStart(50, "span", 105);
    \u0275\u0275text(51, "*");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(52, "div", 102)(53, "p-floatLabel")(54, "input", 110);
    \u0275\u0275twoWayListener("ngModelChange", function PackingPaiement_div_63_Template_input_ngModelChange_54_listener($event) {
      \u0275\u0275restoreView(_r8);
      const ctx_r2 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r2.referencePaiement, $event) || (ctx_r2.referencePaiement = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(55, "label", 111);
    \u0275\u0275text(56, " R\xE9f\xE9rence du paiement ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(57, "small", 112);
    \u0275\u0275text(58, " Optionnel - Ex: num\xE9ro de transaction, num\xE9ro de ch\xE8que, etc. ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2(" ", ctx_r2.packingSelectionne.contact == null ? null : ctx_r2.packingSelectionne.contact.prenom, " ", ctx_r2.packingSelectionne.contact == null ? null : ctx_r2.packingSelectionne.contact.nom, " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", ctx_r2.packingSelectionne.contact == null ? null : ctx_r2.packingSelectionne.contact.phone, " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r2.packingSelectionne.nombre_rouleaux);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(ctx_r2.packingSelectionne.montant), " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(ctx_r2.packingSelectionne.montant_paye), " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(ctx_r2.packingSelectionne.montant_restant), " ");
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.montantPaiement);
    \u0275\u0275property("min", 0)("max", ctx_r2.packingSelectionne.montant_restant || 0)("minFractionDigits", 0);
    \u0275\u0275advance(7);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.datePaiement);
    \u0275\u0275property("showIcon", true);
    \u0275\u0275advance(7);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.modePaiementSelectionne);
    \u0275\u0275property("options", ctx_r2.modesPaiement);
    \u0275\u0275advance(7);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.referencePaiement);
  }
}
function PackingPaiement_ng_template_64_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 113)(1, "p-button", 114);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_64_Template_p_button_onClick_1_listener() {
      \u0275\u0275restoreView(_r9);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.displayPaiementDialog = false);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "p-button", 115);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_64_Template_p_button_onClick_2_listener() {
      \u0275\u0275restoreView(_r9);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.enregistrerPaiement());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275advance();
    \u0275\u0275property("outlined", true);
  }
}
function PackingPaiement_div_66_div_69_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 99)(1, "div", 100);
    \u0275\u0275text(2, "Date de paiement");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 97);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.formatDate(ctx_r2.packingSelectionne.date_paiement));
  }
}
function PackingPaiement_div_66_div_70_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 99)(1, "div", 100);
    \u0275\u0275text(2, "Mode de paiement");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 97);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.packingSelectionne.mode_paiement);
  }
}
function PackingPaiement_div_66_div_71_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 123)(1, "div", 100);
    \u0275\u0275text(2, "R\xE9f\xE9rence");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 97);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.packingSelectionne.reference_paiement);
  }
}
function PackingPaiement_div_66_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 93)(1, "div")(2, "h3", 116);
    \u0275\u0275element(3, "i", 117);
    \u0275\u0275text(4, " Informations du Contact ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 94)(6, "div", 98)(7, "div", 99)(8, "div", 100);
    \u0275\u0275text(9, "Nom complet");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "div", 97);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "div", 99)(13, "div", 100);
    \u0275\u0275text(14, "T\xE9l\xE9phone");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "div", 97);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd()()()()();
    \u0275\u0275element(17, "p-divider");
    \u0275\u0275elementStart(18, "div")(19, "h3", 116);
    \u0275\u0275element(20, "i", 118);
    \u0275\u0275text(21, " D\xE9tails du Packing ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "div", 98)(23, "div", 99)(24, "div", 100);
    \u0275\u0275text(25, "Date d\xE9but");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "div", 97);
    \u0275\u0275text(27);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(28, "div", 99)(29, "div", 100);
    \u0275\u0275text(30, "Date fin");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "div", 97);
    \u0275\u0275text(32);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(33, "div", 99)(34, "div", 100);
    \u0275\u0275text(35, "Nombre de rouleaux");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(36, "div", 97);
    \u0275\u0275text(37);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(38, "div", 99)(39, "div", 100);
    \u0275\u0275text(40, "Prix unitaire");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(41, "div", 97);
    \u0275\u0275text(42);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275element(43, "p-divider");
    \u0275\u0275elementStart(44, "div")(45, "h3", 116);
    \u0275\u0275element(46, "i", 4);
    \u0275\u0275text(47, " Informations de Paiement ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(48, "div", 98)(49, "div", 99)(50, "div", 100);
    \u0275\u0275text(51, "Montant total");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(52, "div", 119);
    \u0275\u0275text(53);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(54, "div", 99)(55, "div", 100);
    \u0275\u0275text(56, "Statut");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(57, "div");
    \u0275\u0275element(58, "p-tag", 120);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(59, "div", 99)(60, "div", 100);
    \u0275\u0275text(61, "Montant pay\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(62, "div", 79);
    \u0275\u0275text(63);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(64, "div", 99)(65, "div", 100);
    \u0275\u0275text(66, "Reste \xE0 payer");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(67, "div", 101);
    \u0275\u0275text(68);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(69, PackingPaiement_div_66_div_69_Template, 5, 1, "div", 121)(70, PackingPaiement_div_66_div_70_Template, 5, 1, "div", 121)(71, PackingPaiement_div_66_div_71_Template, 5, 1, "div", 122);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(11);
    \u0275\u0275textInterpolate2(" ", ctx_r2.packingSelectionne.contact == null ? null : ctx_r2.packingSelectionne.contact.prenom, " ", ctx_r2.packingSelectionne.contact == null ? null : ctx_r2.packingSelectionne.contact.nom, " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.packingSelectionne.contact == null ? null : ctx_r2.packingSelectionne.contact.phone);
    \u0275\u0275advance(11);
    \u0275\u0275textInterpolate(ctx_r2.formatDate(ctx_r2.packingSelectionne.date_debut));
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatDate(ctx_r2.packingSelectionne.date_fin), " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.packingSelectionne.nombre_rouleaux);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.packingSelectionne.prix_par_rouleau));
    \u0275\u0275advance(11);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.packingSelectionne.montant));
    \u0275\u0275advance(5);
    \u0275\u0275property("value", ctx_r2.packingSelectionne.statut_paiement === "paye" ? "Pay\xE9" : ctx_r2.packingSelectionne.statut_paiement === "partiel" ? "Partiel" : "Non Pay\xE9")("severity", ctx_r2.getPaiementSeverity(ctx_r2.packingSelectionne.statut_paiement));
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(ctx_r2.packingSelectionne.montant_paye), " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(ctx_r2.packingSelectionne.montant_restant), " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.packingSelectionne.date_paiement);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.packingSelectionne.mode_paiement);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.packingSelectionne.reference_paiement);
  }
}
function PackingPaiement_ng_template_67_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 113)(1, "p-button", 124);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_67_Template_p_button_onClick_1_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.imprimerRecu(ctx_r2.packingSelectionne));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "p-button", 125);
    \u0275\u0275listener("onClick", function PackingPaiement_ng_template_67_Template_p_button_onClick_2_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.displayDetailsDialog = false);
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275advance();
    \u0275\u0275property("outlined", true);
  }
}
var PackingPaiement = class _PackingPaiement {
  router;
  messageService;
  confirmationService;
  packings = [];
  selectedPackings = [];
  loading = false;
  // Dialog pour paiement
  displayPaiementDialog = false;
  packingSelectionne;
  montantPaiement = 0;
  datePaiement = /* @__PURE__ */ new Date();
  modePaiementSelectionne;
  referencePaiement = "";
  // Options modes de paiement
  modesPaiement = [
    { name: "Esp\xE8ces", code: "especes" },
    { name: "Orange Money", code: "orange_money" },
    { name: "MTN MoMo", code: "mtn_momo" },
    { name: "Virement Bancaire", code: "virement" },
    { name: "Ch\xE8que", code: "cheque" }
  ];
  // Dialog pour détails
  displayDetailsDialog = false;
  // Filtres et recherche
  searchValue = "";
  // Statistiques
  totalAPayer = 0;
  totalPaye = 0;
  totalRestant = 0;
  nombreNonPaye = 0;
  constructor(router, messageService, confirmationService) {
    this.router = router;
    this.messageService = messageService;
    this.confirmationService = confirmationService;
  }
  ngOnInit() {
    this.loadPackings();
  }
  loadPackings() {
    this.loading = true;
    setTimeout(() => {
      this.packings = this.getMockData();
      this.calculateStatistiques();
      this.loading = false;
    }, 1e3);
  }
  getMockData() {
    return [
      {
        id: "1",
        contact_id: "c1",
        contact: {
          id: "c1",
          nom: "Diallo",
          prenom: "Mamadou",
          phone: "+224622000001",
          code_pays: "GN",
          pays: "Guin\xE9e"
        },
        date_debut: /* @__PURE__ */ new Date("2024-01-15"),
        date_fin: /* @__PURE__ */ new Date("2024-01-20"),
        nombre_rouleaux: 150,
        prix_par_rouleau: 5e3,
        montant: 75e4,
        montant_paye: 75e4,
        montant_restant: 0,
        statut: "termine",
        statut_paiement: "paye",
        date_paiement: /* @__PURE__ */ new Date("2024-01-21"),
        mode_paiement: "Esp\xE8ces",
        reference_paiement: "PAY-2024-001",
        created_at: "2024-01-15T10:00:00"
      },
      {
        id: "2",
        contact_id: "c2",
        contact: {
          id: "c2",
          nom: "Bah",
          prenom: "Aissatou",
          phone: "+224655000002",
          code_pays: "GN",
          pays: "Guin\xE9e"
        },
        date_debut: /* @__PURE__ */ new Date("2024-01-18"),
        date_fin: /* @__PURE__ */ new Date("2024-01-25"),
        nombre_rouleaux: 200,
        prix_par_rouleau: 4500,
        montant: 9e5,
        montant_paye: 5e5,
        montant_restant: 4e5,
        statut: "termine",
        statut_paiement: "partiel",
        date_paiement: /* @__PURE__ */ new Date("2024-01-26"),
        mode_paiement: "Orange Money",
        reference_paiement: "PAY-2024-002",
        created_at: "2024-01-18T09:00:00"
      },
      {
        id: "3",
        contact_id: "c3",
        contact: {
          id: "c3",
          nom: "Camara",
          prenom: "Ibrahima",
          phone: "+224664000003",
          code_pays: "GN",
          pays: "Guin\xE9e"
        },
        date_debut: /* @__PURE__ */ new Date("2024-01-22"),
        date_fin: null,
        nombre_rouleaux: 180,
        prix_par_rouleau: 5e3,
        montant: 9e5,
        montant_paye: 0,
        montant_restant: 9e5,
        statut: "en_cours",
        statut_paiement: "non_paye",
        created_at: "2024-01-22T08:00:00"
      },
      {
        id: "4",
        contact_id: "c4",
        contact: {
          id: "c4",
          nom: "Sylla",
          prenom: "Fatoumata",
          phone: "+224621000004",
          code_pays: "GN",
          pays: "Guin\xE9e"
        },
        date_debut: /* @__PURE__ */ new Date("2024-01-20"),
        date_fin: /* @__PURE__ */ new Date("2024-01-27"),
        nombre_rouleaux: 120,
        prix_par_rouleau: 5500,
        montant: 66e4,
        montant_paye: 3e5,
        montant_restant: 36e4,
        statut: "termine",
        statut_paiement: "partiel",
        date_paiement: /* @__PURE__ */ new Date("2024-01-28"),
        mode_paiement: "MTN MoMo",
        reference_paiement: "PAY-2024-003",
        created_at: "2024-01-20T11:00:00"
      }
    ];
  }
  calculateStatistiques() {
    this.totalAPayer = this.packings.reduce((sum, p) => sum + (p.montant || 0), 0);
    this.totalPaye = this.packings.reduce((sum, p) => sum + (p.montant_paye || 0), 0);
    this.totalRestant = this.packings.reduce((sum, p) => sum + (p.montant_restant || 0), 0);
    this.nombreNonPaye = this.packings.filter((p) => p.statut_paiement === "non_paye").length;
  }
  openPaiementDialog(packing) {
    this.packingSelectionne = __spreadValues({}, packing);
    this.montantPaiement = packing.montant_restant || 0;
    this.datePaiement = /* @__PURE__ */ new Date();
    this.modePaiementSelectionne = void 0;
    this.referencePaiement = "";
    this.displayPaiementDialog = true;
  }
  openDetailsDialog(packing) {
    this.packingSelectionne = packing;
    this.displayDetailsDialog = true;
  }
  enregistrerPaiement() {
    if (!this.packingSelectionne || this.montantPaiement <= 0) {
      this.messageService.add({
        severity: "warn",
        summary: "Attention",
        detail: "Veuillez saisir un montant valide"
      });
      return;
    }
    if (!this.modePaiementSelectionne) {
      this.messageService.add({
        severity: "warn",
        summary: "Attention",
        detail: "Veuillez s\xE9lectionner un mode de paiement"
      });
      return;
    }
    const index = this.packings.findIndex((p) => p.id === this.packingSelectionne?.id);
    if (index !== -1) {
      const packing = this.packings[index];
      const nouveauMontantPaye = (packing.montant_paye || 0) + this.montantPaiement;
      const nouveauMontantRestant = (packing.montant || 0) - nouveauMontantPaye;
      this.packings[index] = __spreadProps(__spreadValues({}, packing), {
        montant_paye: nouveauMontantPaye,
        montant_restant: nouveauMontantRestant,
        statut_paiement: nouveauMontantRestant === 0 ? "paye" : "partiel",
        date_paiement: this.datePaiement,
        mode_paiement: this.modePaiementSelectionne.name,
        reference_paiement: this.referencePaiement
      });
      this.calculateStatistiques();
      this.displayPaiementDialog = false;
      this.messageService.add({
        severity: "success",
        summary: "Succ\xE8s",
        detail: "Paiement enregistr\xE9 avec succ\xE8s"
      });
    }
  }
  getStatutSeverity(statut) {
    switch (statut) {
      case "termine":
        return "success";
      case "en_cours":
        return "info";
      case "annule":
        return "danger";
      default:
        return "warn";
    }
  }
  getPaiementSeverity(statut) {
    switch (statut) {
      case "paye":
        return "success";
      case "partiel":
        return "warn";
      case "non_paye":
        return "danger";
      default:
        return "danger";
    }
  }
  formatCurrency(value) {
    if (!value)
      return "0 GNF";
    return new Intl.NumberFormat("fr-GN", {
      style: "currency",
      currency: "GNF",
      minimumFractionDigits: 0
    }).format(value);
  }
  formatDate(date) {
    if (!date)
      return "-";
    return new Intl.DateTimeFormat("fr-FR", {
      day: "2-digit",
      month: "2-digit",
      year: "numeric"
    }).format(new Date(date));
  }
  exportPDF() {
    this.messageService.add({
      severity: "info",
      summary: "Export",
      detail: "Fonctionnalit\xE9 en cours de d\xE9veloppement"
    });
  }
  exportExcel() {
    this.messageService.add({
      severity: "info",
      summary: "Export",
      detail: "Fonctionnalit\xE9 en cours de d\xE9veloppement"
    });
  }
  clear(table) {
    table.clear();
    this.searchValue = "";
  }
  imprimerRecu(packing) {
    this.messageService.add({
      severity: "info",
      summary: "Impression",
      detail: "Fonctionnalit\xE9 en cours de d\xE9veloppement"
    });
  }
  static \u0275fac = function PackingPaiement_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PackingPaiement)(\u0275\u0275directiveInject(Router), \u0275\u0275directiveInject(MessageService), \u0275\u0275directiveInject(ConfirmationService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _PackingPaiement, selectors: [["app-packing-paiement"]], features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 68, vars: 31, consts: [["dt", ""], [1, "packing-paiement-container", "p-4"], [1, "mb-4"], [1, "text-3xl", "font-bold", "text-surface-900", "dark:text-surface-0", "mb-3"], [1, "pi", "pi-money-bill", "mr-2", "text-primary"], [1, "grid", "mb-4"], [1, "col-12", "md:col-6", "lg:col-3"], ["styleClass", "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"], [1, "flex", "justify-content-between", "align-items-center"], [1, "text-blue-600", "dark:text-blue-400", "font-semibold", "text-sm", "mb-2"], [1, "text-2xl", "font-bold", "text-blue-900", "dark:text-blue-100"], [1, "bg-blue-500", "text-white", "border-circle", "flex", "align-items-center", "justify-content-center", 2, "width", "3.5rem", "height", "3.5rem"], [1, "pi", "pi-wallet", "text-2xl"], ["styleClass", "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"], [1, "text-green-600", "dark:text-green-400", "font-semibold", "text-sm", "mb-2"], [1, "text-2xl", "font-bold", "text-green-900", "dark:text-green-100"], [1, "bg-green-500", "text-white", "border-circle", "flex", "align-items-center", "justify-content-center", 2, "width", "3.5rem", "height", "3.5rem"], [1, "pi", "pi-check-circle", "text-2xl"], ["styleClass", "bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800"], [1, "text-orange-600", "dark:text-orange-400", "font-semibold", "text-sm", "mb-2"], [1, "text-2xl", "font-bold", "text-orange-900", "dark:text-orange-100"], [1, "bg-orange-500", "text-white", "border-circle", "flex", "align-items-center", "justify-content-center", 2, "width", "3.5rem", "height", "3.5rem"], [1, "pi", "pi-exclamation-triangle", "text-2xl"], ["styleClass", "bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"], [1, "text-red-600", "dark:text-red-400", "font-semibold", "text-sm", "mb-2"], [1, "text-2xl", "font-bold", "text-red-900", "dark:text-red-100"], [1, "bg-red-500", "text-white", "border-circle", "flex", "align-items-center", "justify-content-center", 2, "width", "3.5rem", "height", "3.5rem"], [1, "pi", "pi-times-circle", "text-2xl"], ["styleClass", "mb-4 border-noround"], [1, "flex", "align-items-center", "gap-2"], [1, "pi", "pi-list", "text-2xl", "text-primary"], [1, "text-xl", "font-semibold"], ["pTemplate", "end"], ["currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} paiements", "dataKey", "id", "styleClass", "p-datatable-sm", 3, "selectionChange", "value", "loading", "rows", "paginator", "globalFilterFields", "rowsPerPageOptions", "showCurrentPageReport", "selection", "rowHover"], ["pTemplate", "caption"], ["pTemplate", "header"], ["pTemplate", "body"], ["pTemplate", "emptymessage"], ["pTemplate", "loadingbody"], ["header", "Enregistrer un Paiement", 3, "visibleChange", "visible", "modal", "draggable", "resizable"], ["class", "flex flex-column gap-4", 4, "ngIf"], ["pTemplate", "footer"], ["header", "D\xE9tails du Paiement", 3, "visibleChange", "visible", "modal", "draggable", "resizable"], [1, "flex", "gap-2"], ["label", "PDF", "icon", "pi pi-file-pdf", "severity", "danger", 3, "onClick"], ["label", "Excel", "icon", "pi pi-file-excel", "severity", "success", 3, "onClick"], [1, "flex", "flex-column", "md:flex-row", "md:justify-content-between", "gap-2"], [1, "p-input-icon-left", "w-full", "md:w-auto"], [1, "pi", "pi-search"], ["pInputText", "", "type", "text", "placeholder", "Rechercher...", 1, "w-full", "md:w-20rem", 3, "ngModelChange", "input", "ngModel"], ["label", "Effacer", "icon", "pi pi-filter-slash", 3, "onClick", "outlined"], [2, "width", "3rem"], ["pSortableColumn", "contact.nom", 2, "min-width", "12rem"], ["field", "contact.nom"], ["pSortableColumn", "date_debut", 2, "min-width", "10rem"], ["field", "date_debut"], ["pSortableColumn", "nombre_rouleaux", 1, "text-right", 2, "min-width", "8rem"], ["field", "nombre_rouleaux"], ["pSortableColumn", "montant", 1, "text-right", 2, "min-width", "10rem"], ["field", "montant"], ["pSortableColumn", "montant_paye", 1, "text-right", 2, "min-width", "10rem"], ["field", "montant_paye"], ["pSortableColumn", "montant_restant", 1, "text-right", 2, "min-width", "10rem"], ["field", "montant_restant"], ["pSortableColumn", "statut_paiement", 2, "min-width", "10rem"], ["field", "statut_paiement"], [2, "min-width", "10rem"], [3, "value"], [1, "flex", "flex-column"], [1, "font-semibold", "text-surface-900", "dark:text-surface-0"], [1, "text-sm", "text-surface-600", "dark:text-surface-400"], [1, "pi", "pi-phone", "text-xs", "mr-1"], [1, "flex", "flex-column", "gap-1"], [1, "text-sm"], [1, "pi", "pi-calendar", "text-xs", "mr-1"], ["class", "text-sm", 4, "ngIf"], ["value", "En cours", "severity", "info", 3, "rounded", 4, "ngIf"], [1, "text-right"], ["icon", "pi pi-box", "styleClass", "bg-primary-50 dark:bg-primary-900/20 text-primary-900 dark:text-primary-100", 3, "label"], [1, "font-semibold", "text-green-600", "dark:text-green-400"], [1, "font-semibold", 3, "ngClass"], [3, "value", "severity", "rounded"], ["icon", "pi pi-eye", "severity", "info", "pTooltip", "Voir d\xE9tails", "tooltipPosition", "top", 3, "onClick", "rounded", "text"], ["icon", "pi pi-money-bill", "severity", "success", "pTooltip", "Enregistrer paiement", "tooltipPosition", "top", 3, "onClick", "rounded", "text", "disabled"], [1, "pi", "pi-calendar-times", "text-xs", "mr-1"], ["value", "En cours", "severity", "info", 3, "rounded"], ["colspan", "9", 1, "text-center", "py-5"], [1, "flex", "flex-column", "align-items-center", "gap-3"], [1, "pi", "pi-inbox", "text-6xl", "text-surface-400"], [1, "text-xl", "text-surface-600", "dark:text-surface-400", "m-0"], ["colspan", "9"], [1, "flex", "flex-column", "gap-2", "p-3"], ["width", "100%", "height", "2rem"], [1, "flex", "flex-column", "gap-4"], [1, "p-3", "surface-50", "dark:surface-800", "border-round"], [1, "flex", "align-items-center", "gap-2", "mb-2"], [1, "pi", "pi-user", "text-primary"], [1, "font-semibold"], [1, "grid"], [1, "col-6"], [1, "text-sm", "text-surface-600", "dark:text-surface-400", "mb-1"], [1, "font-semibold", "text-orange-600", "dark:text-orange-400"], [1, "field"], ["id", "montantPaiement", "inputId", "montantPaiement", "mode", "currency", "currency", "GNF", "locale", "fr-GN", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "min", "max", "minFractionDigits"], ["for", "montantPaiement"], [1, "text-red-500"], ["id", "datePaiement", "inputId", "datePaiement", "dateFormat", "dd/mm/yy", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "showIcon"], ["for", "datePaiement"], ["id", "modePaiement", "inputId", "modePaiement", "optionLabel", "name", "placeholder", "S\xE9lectionner un mode de paiement", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "options"], ["for", "modePaiement"], ["pInputText", "", "id", "referencePaiement", 1, "w-full", 3, "ngModelChange", "ngModel"], ["for", "referencePaiement"], [1, "text-surface-500"], [1, "flex", "gap-2", "justify-content-end"], ["label", "Annuler", "severity", "secondary", 3, "onClick", "outlined"], ["label", "Enregistrer", "icon", "pi pi-check", 3, "onClick"], [1, "text-lg", "font-semibold", "mb-3"], [1, "pi", "pi-user", "mr-2", "text-primary"], [1, "pi", "pi-box", "mr-2", "text-primary"], [1, "font-semibold", "text-lg"], [3, "value", "severity"], ["class", "col-6", 4, "ngIf"], ["class", "col-12", 4, "ngIf"], [1, "col-12"], ["label", "Imprimer Re\xE7u", "icon", "pi pi-print", "severity", "secondary", 3, "onClick", "outlined"], ["label", "Fermer", 3, "onClick"]], template: function PackingPaiement_Template(rf, ctx) {
    if (rf & 1) {
      const _r1 = \u0275\u0275getCurrentView();
      \u0275\u0275elementStart(0, "div", 1);
      \u0275\u0275element(1, "p-toast")(2, "p-confirmDialog");
      \u0275\u0275elementStart(3, "div", 2)(4, "h2", 3);
      \u0275\u0275element(5, "i", 4);
      \u0275\u0275text(6, " Comptabilit\xE9 - Paiements Packing ");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(7, "div", 5)(8, "div", 6)(9, "p-card", 7)(10, "div", 8)(11, "div")(12, "div", 9);
      \u0275\u0275text(13, " TOTAL \xC0 PAYER ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(14, "div", 10);
      \u0275\u0275text(15);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(16, "div", 11);
      \u0275\u0275element(17, "i", 12);
      \u0275\u0275elementEnd()()()();
      \u0275\u0275elementStart(18, "div", 6)(19, "p-card", 13)(20, "div", 8)(21, "div")(22, "div", 14);
      \u0275\u0275text(23, " TOTAL PAY\xC9 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(24, "div", 15);
      \u0275\u0275text(25);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(26, "div", 16);
      \u0275\u0275element(27, "i", 17);
      \u0275\u0275elementEnd()()()();
      \u0275\u0275elementStart(28, "div", 6)(29, "p-card", 18)(30, "div", 8)(31, "div")(32, "div", 19);
      \u0275\u0275text(33, " RESTE \xC0 PAYER ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(34, "div", 20);
      \u0275\u0275text(35);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(36, "div", 21);
      \u0275\u0275element(37, "i", 22);
      \u0275\u0275elementEnd()()()();
      \u0275\u0275elementStart(38, "div", 6)(39, "p-card", 23)(40, "div", 8)(41, "div")(42, "div", 24);
      \u0275\u0275text(43, " NON PAY\xC9S ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(44, "div", 25);
      \u0275\u0275text(45);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(46, "div", 26);
      \u0275\u0275element(47, "i", 27);
      \u0275\u0275elementEnd()()()()();
      \u0275\u0275elementStart(48, "p-card")(49, "p-toolbar", 28)(50, "div", 29);
      \u0275\u0275element(51, "i", 30);
      \u0275\u0275elementStart(52, "span", 31);
      \u0275\u0275text(53, "Liste des Paiements");
      \u0275\u0275elementEnd()();
      \u0275\u0275template(54, PackingPaiement_ng_template_54_Template, 3, 0, "ng-template", 32);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(55, "p-table", 33, 0);
      \u0275\u0275twoWayListener("selectionChange", function PackingPaiement_Template_p_table_selectionChange_55_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.selectedPackings, $event) || (ctx.selectedPackings = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275template(57, PackingPaiement_ng_template_57_Template, 5, 2, "ng-template", 34)(58, PackingPaiement_ng_template_58_Template, 26, 0, "ng-template", 35)(59, PackingPaiement_ng_template_59_Template, 34, 23, "ng-template", 36)(60, PackingPaiement_ng_template_60_Template, 6, 0, "ng-template", 37)(61, PackingPaiement_ng_template_61_Template, 6, 0, "ng-template", 38);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(62, "p-dialog", 39);
      \u0275\u0275twoWayListener("visibleChange", function PackingPaiement_Template_p_dialog_visibleChange_62_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.displayPaiementDialog, $event) || (ctx.displayPaiementDialog = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275template(63, PackingPaiement_div_63_Template, 59, 16, "div", 40)(64, PackingPaiement_ng_template_64_Template, 3, 1, "ng-template", 41);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(65, "p-dialog", 42);
      \u0275\u0275twoWayListener("visibleChange", function PackingPaiement_Template_p_dialog_visibleChange_65_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.displayDetailsDialog, $event) || (ctx.displayDetailsDialog = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275template(66, PackingPaiement_div_66_Template, 72, 15, "div", 40)(67, PackingPaiement_ng_template_67_Template, 3, 1, "ng-template", 41);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance(15);
      \u0275\u0275textInterpolate1(" ", ctx.formatCurrency(ctx.totalAPayer), " ");
      \u0275\u0275advance(10);
      \u0275\u0275textInterpolate1(" ", ctx.formatCurrency(ctx.totalPaye), " ");
      \u0275\u0275advance(10);
      \u0275\u0275textInterpolate1(" ", ctx.formatCurrency(ctx.totalRestant), " ");
      \u0275\u0275advance(10);
      \u0275\u0275textInterpolate1(" ", ctx.nombreNonPaye, " ");
      \u0275\u0275advance(10);
      \u0275\u0275property("value", ctx.packings)("loading", ctx.loading)("rows", 10)("paginator", true)("globalFilterFields", \u0275\u0275pureFunction0(27, _c0))("rowsPerPageOptions", \u0275\u0275pureFunction0(28, _c1))("showCurrentPageReport", true);
      \u0275\u0275twoWayProperty("selection", ctx.selectedPackings);
      \u0275\u0275property("rowHover", true);
      \u0275\u0275advance(7);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(29, _c2));
      \u0275\u0275twoWayProperty("visible", ctx.displayPaiementDialog);
      \u0275\u0275property("modal", true)("draggable", false)("resizable", false);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.packingSelectionne);
      \u0275\u0275advance(2);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(30, _c3));
      \u0275\u0275twoWayProperty("visible", ctx.displayDetailsDialog);
      \u0275\u0275property("modal", true)("draggable", false)("resizable", false);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.packingSelectionne);
    }
  }, dependencies: [
    CommonModule,
    NgClass,
    NgIf,
    FormsModule,
    DefaultValueAccessor,
    NgControlStatus,
    NgModel,
    Card,
    TableModule,
    Table,
    PrimeTemplate,
    SortableColumn,
    SortIcon,
    TableCheckbox,
    TableHeaderCheckbox,
    Button,
    InputText,
    Tag,
    Dialog,
    Toast,
    ConfirmDialog,
    Toolbar,
    DatePicker,
    InputNumber,
    Divider,
    Skeleton,
    Chip,
    Select,
    FloatLabel
  ], styles: ["\n\n.packing-paiement-container[_ngcontent-%COMP%] {\n  min-height: calc(100vh - 9rem);\n  background-color: var(--surface-ground);\n  padding: 1.5rem;\n}\n.packing-paiement-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  margin-bottom: 1.5rem;\n}\n.packing-paiement-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: var(--primary-color);\n}\n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%] {\n  height: 100%;\n  border-radius: 12px;\n  border: 1px solid;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%]:hover, \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%]:hover, \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%]   .border-circle[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%]   .border-circle[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]    > .card[_ngcontent-%COMP%]   .border-circle[_ngcontent-%COMP%] {\n  min-width: 3.5rem;\n  min-height: 3.5rem;\n}\n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]:nth-child(1)   .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:nth-child(1)   .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]:nth-child(1)   .card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #e3f2fd 0%,\n      #bbdefb 100%);\n  border-color: #90caf9;\n}\n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]:nth-child(2)   .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:nth-child(2)   .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]:nth-child(2)   .card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #e8f5e9 0%,\n      #c8e6c9 100%);\n  border-color: #81c784;\n}\n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]:nth-child(3)   .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:nth-child(3)   .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]:nth-child(3)   .card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #fff3e0 0%,\n      #ffe0b2 100%);\n  border-color: #ffb74d;\n}\n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]:nth-child(4)   .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:nth-child(4)   .card[_ngcontent-%COMP%], \n.packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]:nth-child(4)   .card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffebee 0%,\n      #ffcdd2 100%);\n  border-color: #e57373;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-card {\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  border: 1px solid var(--surface-border);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-card .p-card-body {\n  padding: 0;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-card .p-card-content {\n  padding: 0;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toolbar {\n  background: var(--surface-50);\n  border: none;\n  border-bottom: 1px solid var(--surface-border);\n  padding: 1.25rem 1.5rem;\n  border-radius: 12px 12px 0 0;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toolbar .p-button {\n  font-weight: 600;\n  padding: 0.625rem 1.25rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toolbar .p-button.p-button-danger {\n  background:\n    linear-gradient(\n      135deg,\n      #ef5350 0%,\n      #e53935 100%);\n  border-color: #e53935;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toolbar .p-button.p-button-success {\n  background:\n    linear-gradient(\n      135deg,\n      #66bb6a 0%,\n      #43a047 100%);\n  border-color: #43a047;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable {\n  border-radius: 0 0 12px 12px;\n  overflow: hidden;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-header {\n  background: var(--surface-0);\n  padding: 1.25rem 1.5rem;\n  border-bottom: 1px solid var(--surface-border);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-header .p-input-icon-left {\n  width: 100%;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-header .p-input-icon-left input {\n  width: 100%;\n  padding: 0.75rem 1rem 0.75rem 2.5rem;\n  border-radius: 8px;\n  border: 1px solid var(--surface-300);\n  font-size: 0.95rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-header .p-input-icon-left input:focus {\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 0.2rem var(--primary-50);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-header .p-input-icon-left i {\n  top: 50%;\n  transform: translateY(-50%);\n  left: 0.85rem;\n  color: var(--text-color-secondary);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-header .p-button-outlined {\n  border-color: var(--surface-300);\n  color: var(--text-color);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-header .p-button-outlined:hover {\n  background: var(--surface-100);\n  border-color: var(--surface-400);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th {\n  background: var(--surface-50);\n  color: var(--text-color);\n  font-weight: 600;\n  font-size: 0.85rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 1rem 1.25rem;\n  border-bottom: 2px solid var(--surface-200);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th:first-child {\n  padding-left: 1.5rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th .p-sortable-column-icon {\n  color: var(--text-color-secondary);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th.p-highlight {\n  background: var(--primary-50);\n  color: var(--primary-color);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th.p-highlight .p-sortable-column-icon {\n  color: var(--primary-color);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr {\n  transition: background-color 0.15s ease;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr:hover {\n  background: var(--surface-50) !important;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td {\n  padding: 1rem 1.25rem;\n  border-bottom: 1px solid var(--surface-100);\n  font-size: 0.95rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td:first-child {\n  padding-left: 1.5rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .font-semibold {\n  font-size: 0.95rem;\n  font-weight: 600;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .text-sm {\n  font-size: 0.85rem;\n  margin-top: 0.25rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .p-chip {\n  padding: 0.5rem 0.875rem;\n  font-weight: 600;\n  font-size: 0.875rem;\n  border-radius: 6px;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .p-tag {\n  font-weight: 600;\n  font-size: 0.8rem;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .p-button {\n  width: 2.5rem;\n  height: 2.5rem;\n  transition: all 0.2s ease;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .p-button:hover {\n  transform: scale(1.1);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .p-button.p-button-info:hover {\n  background: var(--blue-100);\n  color: var(--blue-600);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .p-button.p-button-success:hover {\n  background: var(--green-100);\n  color: var(--green-600);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .p-button:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td .p-button:disabled:hover {\n  transform: none;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-emptymessage td {\n  padding: 3rem 1.5rem;\n  text-align: center;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-emptymessage td i {\n  opacity: 0.3;\n  margin-bottom: 1rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-emptymessage td p {\n  opacity: 0.5;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-paginator {\n  background: var(--surface-0);\n  border-top: 1px solid var(--surface-border);\n  padding: 1rem 1.5rem;\n  border-radius: 0 0 12px 12px;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-paginator .p-paginator-current {\n  color: var(--text-color-secondary);\n  font-size: 0.9rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page {\n  min-width: 2.5rem;\n  height: 2.5rem;\n  border-radius: 6px;\n  font-weight: 500;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page.p-highlight {\n  background: var(--primary-color);\n  color: white;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog {\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-header {\n  background: var(--surface-50);\n  border-bottom: 1px solid var(--surface-border);\n  padding: 1.5rem;\n  border-radius: 12px 12px 0 0;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-header .p-dialog-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content {\n  padding: 1.5rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .surface-50 {\n  border-radius: 8px;\n  border: 1px solid var(--surface-200);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .p-divider {\n  margin: 1.5rem 0;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field {\n  margin-bottom: 1.5rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field:last-child {\n  margin-bottom: 0;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-float-label label {\n  font-weight: 500;\n  color: var(--text-color-secondary);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-inputnumber, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-datepicker, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-select, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field input[pInputText] {\n  width: 100%;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-inputnumber input, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-datepicker input, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-select input, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field input[pInputText] input {\n  width: 100%;\n  padding: 0.75rem 1rem;\n  border-radius: 8px;\n  border: 1px solid var(--surface-300);\n  font-size: 0.95rem;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-inputnumber input:focus, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-datepicker input:focus, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field .p-select input:focus, \n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field input[pInputText] input:focus {\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 0.2rem var(--primary-50);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-content .field small {\n  display: block;\n  margin-top: 0.5rem;\n  font-size: 0.85rem;\n  color: var(--text-color-secondary);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-footer {\n  background: var(--surface-50);\n  border-top: 1px solid var(--surface-border);\n  padding: 1.25rem 1.5rem;\n  border-radius: 0 0 12px 12px;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-footer .p-button {\n  padding: 0.75rem 1.5rem;\n  font-weight: 600;\n  border-radius: 8px;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-footer .p-button.p-button-outlined {\n  border-color: var(--surface-300);\n  color: var(--text-color);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-footer .p-button.p-button-outlined:hover {\n  background: var(--surface-100);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-dialog .p-dialog-footer .p-button:not(.p-button-outlined) {\n  background:\n    linear-gradient(\n      135deg,\n      var(--primary-500) 0%,\n      var(--primary-600) 100%);\n  border-color: var(--primary-600);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toast .p-toast-message {\n  border-radius: 8px;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-success {\n  background: rgba(102, 187, 106, 0.95);\n  border: 1px solid #66bb6a;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-warn {\n  background: rgba(255, 183, 77, 0.95);\n  border: 1px solid #ffb74d;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-error {\n  background: rgba(239, 83, 80, 0.95);\n  border: 1px solid #ef5350;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-info {\n  background: rgba(66, 165, 245, 0.95);\n  border: 1px solid #42a5f5;\n}\n.packing-paiement-container   [_nghost-%COMP%]     .p-skeleton {\n  background:\n    linear-gradient(\n      90deg,\n      var(--surface-200) 25%,\n      var(--surface-100) 50%,\n      var(--surface-200) 75%);\n  background-size: 200% 100%;\n  animation: _ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;\n}\n@media (prefers-color-scheme: dark) {\n  .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]:nth-child(1)   .card[_ngcontent-%COMP%], \n   .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:nth-child(1)   .card[_ngcontent-%COMP%], \n   .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]:nth-child(1)   .card[_ngcontent-%COMP%] {\n    background:\n      linear-gradient(\n        135deg,\n        rgba(25, 118, 210, 0.2) 0%,\n        rgba(25, 118, 210, 0.3) 100%);\n  }\n  .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]:nth-child(2)   .card[_ngcontent-%COMP%], \n   .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:nth-child(2)   .card[_ngcontent-%COMP%], \n   .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]:nth-child(2)   .card[_ngcontent-%COMP%] {\n    background:\n      linear-gradient(\n        135deg,\n        rgba(56, 142, 60, 0.2) 0%,\n        rgba(56, 142, 60, 0.3) 100%);\n  }\n  .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]:nth-child(3)   .card[_ngcontent-%COMP%], \n   .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:nth-child(3)   .card[_ngcontent-%COMP%], \n   .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]:nth-child(3)   .card[_ngcontent-%COMP%] {\n    background:\n      linear-gradient(\n        135deg,\n        rgba(255, 152, 0, 0.2) 0%,\n        rgba(255, 152, 0, 0.3) 100%);\n  }\n  .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]:nth-child(4)   .card[_ngcontent-%COMP%], \n   .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:nth-child(4)   .card[_ngcontent-%COMP%], \n   .packing-paiement-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col-lg-3[_ngcontent-%COMP%]:nth-child(4)   .card[_ngcontent-%COMP%] {\n    background:\n      linear-gradient(\n        135deg,\n        rgba(211, 47, 47, 0.2) 0%,\n        rgba(211, 47, 47, 0.3) 100%);\n  }\n}\n@keyframes _ngcontent-%COMP%_skeleton-loading {\n  0% {\n    background-position: 200% 0;\n  }\n  100% {\n    background-position: -200% 0;\n  }\n}\n@media screen and (max-width: 960px) {\n  .packing-paiement-container[_ngcontent-%COMP%] {\n    padding: 1rem;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th {\n    padding: 0.75rem;\n    font-size: 0.8rem;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th:first-child {\n    padding-left: 1rem;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td {\n    padding: 0.75rem;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td:first-child {\n    padding-left: 1rem;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-toolbar {\n    padding: 1rem;\n    flex-wrap: wrap;\n    gap: 0.5rem;\n  }\n}\n@media screen and (max-width: 640px) {\n  .packing-paiement-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n    font-size: 1.5rem;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th, \n   .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td {\n    padding: 0.5rem;\n    font-size: 0.85rem;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th:first-child, \n   .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td:first-child {\n    padding-left: 0.75rem;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th:nth-child(3), \n   .packing-paiement-container   [_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td:nth-child(3) {\n    display: none;\n  }\n  .packing-paiement-container   [_nghost-%COMP%]     .p-dialog {\n    width: 95vw !important;\n    margin: 0.5rem;\n  }\n}\n/*# sourceMappingURL=packing-paiement.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PackingPaiement, [{
    type: Component,
    args: [{ selector: "app-packing-paiement", standalone: true, imports: [
      CommonModule,
      FormsModule,
      Card,
      TableModule,
      Button,
      InputText,
      Tag,
      Dialog,
      Toast,
      ConfirmDialog,
      Toolbar,
      DatePicker,
      InputNumber,
      Divider,
      Skeleton,
      Badge,
      Chip,
      Select,
      FloatLabel
    ], providers: [MessageService, ConfirmationService], template: `<div class="packing-paiement-container p-4">\r
  <p-toast />\r
  <p-confirmDialog />\r
\r
  <!-- En-t\xEAte avec statistiques -->\r
  <div class="mb-4">\r
    <h2 class="text-3xl font-bold text-surface-900 dark:text-surface-0 mb-3">\r
      <i class="pi pi-money-bill mr-2 text-primary"></i>\r
      Comptabilit\xE9 - Paiements Packing\r
    </h2>\r
  </div>\r
\r
  <!-- Cartes statistiques -->\r
  <div class="grid mb-4">\r
    <div class="col-12 md:col-6 lg:col-3">\r
      <p-card styleClass="bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800">\r
        <div class="flex justify-content-between align-items-center">\r
          <div>\r
            <div class="text-blue-600 dark:text-blue-400 font-semibold text-sm mb-2">\r
              TOTAL \xC0 PAYER\r
            </div>\r
            <div class="text-2xl font-bold text-blue-900 dark:text-blue-100">\r
              {{ formatCurrency(totalAPayer) }}\r
            </div>\r
          </div>\r
          <div class="bg-blue-500 text-white border-circle flex align-items-center justify-content-center"\r
               style="width: 3.5rem; height: 3.5rem">\r
            <i class="pi pi-wallet text-2xl"></i>\r
          </div>\r
        </div>\r
      </p-card>\r
    </div>\r
\r
    <div class="col-12 md:col-6 lg:col-3">\r
      <p-card styleClass="bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800">\r
        <div class="flex justify-content-between align-items-center">\r
          <div>\r
            <div class="text-green-600 dark:text-green-400 font-semibold text-sm mb-2">\r
              TOTAL PAY\xC9\r
            </div>\r
            <div class="text-2xl font-bold text-green-900 dark:text-green-100">\r
              {{ formatCurrency(totalPaye) }}\r
            </div>\r
          </div>\r
          <div class="bg-green-500 text-white border-circle flex align-items-center justify-content-center"\r
               style="width: 3.5rem; height: 3.5rem">\r
            <i class="pi pi-check-circle text-2xl"></i>\r
          </div>\r
        </div>\r
      </p-card>\r
    </div>\r
\r
    <div class="col-12 md:col-6 lg:col-3">\r
      <p-card styleClass="bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800">\r
        <div class="flex justify-content-between align-items-center">\r
          <div>\r
            <div class="text-orange-600 dark:text-orange-400 font-semibold text-sm mb-2">\r
              RESTE \xC0 PAYER\r
            </div>\r
            <div class="text-2xl font-bold text-orange-900 dark:text-orange-100">\r
              {{ formatCurrency(totalRestant) }}\r
            </div>\r
          </div>\r
          <div class="bg-orange-500 text-white border-circle flex align-items-center justify-content-center"\r
               style="width: 3.5rem; height: 3.5rem">\r
            <i class="pi pi-exclamation-triangle text-2xl"></i>\r
          </div>\r
        </div>\r
      </p-card>\r
    </div>\r
\r
    <div class="col-12 md:col-6 lg:col-3">\r
      <p-card styleClass="bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800">\r
        <div class="flex justify-content-between align-items-center">\r
          <div>\r
            <div class="text-red-600 dark:text-red-400 font-semibold text-sm mb-2">\r
              NON PAY\xC9S\r
            </div>\r
            <div class="text-2xl font-bold text-red-900 dark:text-red-100">\r
              {{ nombreNonPaye }}\r
            </div>\r
          </div>\r
          <div class="bg-red-500 text-white border-circle flex align-items-center justify-content-center"\r
               style="width: 3.5rem; height: 3.5rem">\r
            <i class="pi pi-times-circle text-2xl"></i>\r
          </div>\r
        </div>\r
      </p-card>\r
    </div>\r
  </div>\r
\r
  <!-- Tableau principal -->\r
  <p-card>\r
    <p-toolbar styleClass="mb-4 border-noround">\r
      <div class="flex align-items-center gap-2">\r
        <i class="pi pi-list text-2xl text-primary"></i>\r
        <span class="text-xl font-semibold">Liste des Paiements</span>\r
      </div>\r
\r
      <ng-template pTemplate="end">\r
        <div class="flex gap-2">\r
          <p-button label="PDF" \r
                    icon="pi pi-file-pdf" \r
                    severity="danger"\r
                    (onClick)="exportPDF()" />\r
          <p-button label="Excel" \r
                    icon="pi pi-file-excel" \r
                    severity="success"\r
                    (onClick)="exportExcel()" />\r
        </div>\r
      </ng-template>\r
    </p-toolbar>\r
\r
    <p-table #dt\r
             [value]="packings"\r
             [loading]="loading"\r
             [rows]="10"\r
             [paginator]="true"\r
             [globalFilterFields]="['contact.nom', 'contact.prenom', 'contact.phone', 'reference_paiement']"\r
             [rowsPerPageOptions]="[10, 25, 50]"\r
             [showCurrentPageReport]="true"\r
             currentPageReportTemplate="Affichage de {first} \xE0 {last} sur {totalRecords} paiements"\r
             [(selection)]="selectedPackings"\r
             [rowHover]="true"\r
             dataKey="id"\r
             styleClass="p-datatable-sm">\r
      \r
      <ng-template pTemplate="caption">\r
        <div class="flex flex-column md:flex-row md:justify-content-between gap-2">\r
          <span class="p-input-icon-left w-full md:w-auto">\r
            <i class="pi pi-search"></i>\r
            <input pInputText \r
                   type="text" \r
                   [(ngModel)]="searchValue"\r
                   (input)="dt.filterGlobal(searchValue, 'contains')" \r
                   placeholder="Rechercher..."\r
                   class="w-full md:w-20rem" />\r
          </span>\r
          <p-button label="Effacer" \r
                    [outlined]="true"\r
                    icon="pi pi-filter-slash" \r
                    (onClick)="clear(dt)" />\r
        </div>\r
      </ng-template>\r
\r
      <ng-template pTemplate="header">\r
        <tr>\r
          <th style="width: 3rem">\r
            <p-tableHeaderCheckbox />\r
          </th>\r
          <th pSortableColumn="contact.nom" style="min-width: 12rem">\r
            Contact\r
            <p-sortIcon field="contact.nom" />\r
          </th>\r
          <th pSortableColumn="date_debut" style="min-width: 10rem">\r
            P\xE9riode\r
            <p-sortIcon field="date_debut" />\r
          </th>\r
          <th pSortableColumn="nombre_rouleaux" class="text-right" style="min-width: 8rem">\r
            Rouleaux\r
            <p-sortIcon field="nombre_rouleaux" />\r
          </th>\r
          <th pSortableColumn="montant" class="text-right" style="min-width: 10rem">\r
            Montant Total\r
            <p-sortIcon field="montant" />\r
          </th>\r
          <th pSortableColumn="montant_paye" class="text-right" style="min-width: 10rem">\r
            Montant Pay\xE9\r
            <p-sortIcon field="montant_paye" />\r
          </th>\r
          <th pSortableColumn="montant_restant" class="text-right" style="min-width: 10rem">\r
            Reste \xE0 Payer\r
            <p-sortIcon field="montant_restant" />\r
          </th>\r
          <th pSortableColumn="statut_paiement" style="min-width: 10rem">\r
            Statut Paiement\r
            <p-sortIcon field="statut_paiement" />\r
          </th>\r
          <th style="min-width: 10rem">Actions</th>\r
        </tr>\r
      </ng-template>\r
\r
      <ng-template pTemplate="body" let-packing>\r
        <tr>\r
          <td>\r
            <p-tableCheckbox [value]="packing" />\r
          </td>\r
          <td>\r
            <div class="flex flex-column">\r
              <span class="font-semibold text-surface-900 dark:text-surface-0">\r
                {{ packing.contact?.prenom }} {{ packing.contact?.nom }}\r
              </span>\r
              <span class="text-sm text-surface-600 dark:text-surface-400">\r
                <i class="pi pi-phone text-xs mr-1"></i>\r
                {{ packing.contact?.phone }}\r
              </span>\r
            </div>\r
          </td>\r
          <td>\r
            <div class="flex flex-column gap-1">\r
              <span class="text-sm">\r
                <i class="pi pi-calendar text-xs mr-1"></i>\r
                {{ formatDate(packing.date_debut) }}\r
              </span>\r
              <span class="text-sm" *ngIf="packing.date_fin">\r
                <i class="pi pi-calendar-times text-xs mr-1"></i>\r
                {{ formatDate(packing.date_fin) }}\r
              </span>\r
              <p-tag *ngIf="!packing.date_fin" \r
                     value="En cours" \r
                     severity="info"\r
                     [rounded]="true" />\r
            </div>\r
          </td>\r
          <td class="text-right">\r
            <p-chip [label]="packing.nombre_rouleaux?.toString() || '0'" \r
                    icon="pi pi-box"\r
                    styleClass="bg-primary-50 dark:bg-primary-900/20 text-primary-900 dark:text-primary-100" />\r
          </td>\r
          <td class="text-right">\r
            <span class="font-semibold text-surface-900 dark:text-surface-0">\r
              {{ formatCurrency(packing.montant) }}\r
            </span>\r
          </td>\r
          <td class="text-right">\r
            <span class="font-semibold text-green-600 dark:text-green-400">\r
              {{ formatCurrency(packing.montant_paye) }}\r
            </span>\r
          </td>\r
          <td class="text-right">\r
            <span class="font-semibold"\r
                  [ngClass]="{\r
                    'text-green-600 dark:text-green-400': packing.montant_restant === 0,\r
                    'text-orange-600 dark:text-orange-400': packing.montant_restant && packing.montant_restant > 0\r
                  }">\r
              {{ formatCurrency(packing.montant_restant) }}\r
            </span>\r
          </td>\r
          <td>\r
            <p-tag [value]="packing.statut_paiement === 'paye' ? 'Pay\xE9' : \r
                            packing.statut_paiement === 'partiel' ? 'Partiel' : 'Non Pay\xE9'"\r
                   [severity]="getPaiementSeverity(packing.statut_paiement)"\r
                   [rounded]="true" />\r
          </td>\r
          <td>\r
            <div class="flex gap-2">\r
              <p-button icon="pi pi-eye" \r
                        [rounded]="true"\r
                        [text]="true"\r
                        severity="info"\r
                        pTooltip="Voir d\xE9tails"\r
                        tooltipPosition="top"\r
                        (onClick)="openDetailsDialog(packing)" />\r
              <p-button icon="pi pi-money-bill" \r
                        [rounded]="true"\r
                        [text]="true"\r
                        severity="success"\r
                        pTooltip="Enregistrer paiement"\r
                        tooltipPosition="top"\r
                        [disabled]="packing.statut_paiement === 'paye'"\r
                        (onClick)="openPaiementDialog(packing)" />\r
            </div>\r
          </td>\r
        </tr>\r
      </ng-template>\r
\r
      <ng-template pTemplate="emptymessage">\r
        <tr>\r
          <td colspan="9" class="text-center py-5">\r
            <div class="flex flex-column align-items-center gap-3">\r
              <i class="pi pi-inbox text-6xl text-surface-400"></i>\r
              <p class="text-xl text-surface-600 dark:text-surface-400 m-0">\r
                Aucun paiement trouv\xE9\r
              </p>\r
            </div>\r
          </td>\r
        </tr>\r
      </ng-template>\r
\r
      <ng-template pTemplate="loadingbody">\r
        <tr>\r
          <td colspan="9">\r
            <div class="flex flex-column gap-2 p-3">\r
              <p-skeleton width="100%" height="2rem" />\r
              <p-skeleton width="100%" height="2rem" />\r
              <p-skeleton width="100%" height="2rem" />\r
            </div>\r
          </td>\r
        </tr>\r
      </ng-template>\r
    </p-table>\r
  </p-card>\r
\r
  <!-- Dialog Enregistrement Paiement -->\r
  <p-dialog header="Enregistrer un Paiement" \r
            [(visible)]="displayPaiementDialog"\r
            [modal]="true"\r
            [style]="{ width: '90vw', 'max-width': '500px' }"\r
            [draggable]="false"\r
            [resizable]="false">\r
    <div class="flex flex-column gap-4" *ngIf="packingSelectionne">\r
      <!-- Info Contact -->\r
      <div class="p-3 surface-50 dark:surface-800 border-round">\r
        <div class="flex align-items-center gap-2 mb-2">\r
          <i class="pi pi-user text-primary"></i>\r
          <span class="font-semibold">\r
            {{ packingSelectionne.contact?.prenom }} {{ packingSelectionne.contact?.nom }}\r
          </span>\r
        </div>\r
        <div class="text-sm text-surface-600 dark:text-surface-400">\r
          <i class="pi pi-phone text-xs mr-1"></i>\r
          {{ packingSelectionne.contact?.phone }}\r
        </div>\r
      </div>\r
\r
      <!-- R\xE9sum\xE9 Packing -->\r
      <div class="grid">\r
        <div class="col-6">\r
          <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">\r
            Nombre de rouleaux\r
          </div>\r
          <div class="font-semibold">{{ packingSelectionne.nombre_rouleaux }}</div>\r
        </div>\r
        <div class="col-6">\r
          <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">\r
            Montant total\r
          </div>\r
          <div class="font-semibold text-surface-900 dark:text-surface-0">\r
            {{ formatCurrency(packingSelectionne.montant) }}\r
          </div>\r
        </div>\r
        <div class="col-6">\r
          <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">\r
            D\xE9j\xE0 pay\xE9\r
          </div>\r
          <div class="font-semibold text-green-600 dark:text-green-400">\r
            {{ formatCurrency(packingSelectionne.montant_paye) }}\r
          </div>\r
        </div>\r
        <div class="col-6">\r
          <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">\r
            Reste \xE0 payer\r
          </div>\r
          <div class="font-semibold text-orange-600 dark:text-orange-400">\r
            {{ formatCurrency(packingSelectionne.montant_restant) }}\r
          </div>\r
        </div>\r
      </div>\r
\r
      <p-divider />\r
\r
      <!-- Formulaire Paiement -->\r
      <div class="field">\r
        <p-floatLabel>\r
          <p-inputNumber id="montantPaiement"\r
                         inputId="montantPaiement"\r
                         [(ngModel)]="montantPaiement"\r
                         mode="currency"\r
                         currency="GNF"\r
                         locale="fr-GN"\r
                         [min]="0"\r
                         [max]="packingSelectionne.montant_restant || 0"\r
                         [minFractionDigits]="0"\r
                         styleClass="w-full" />\r
          <label for="montantPaiement">\r
            Montant du paiement <span class="text-red-500">*</span>\r
          </label>\r
        </p-floatLabel>\r
      </div>\r
\r
      <div class="field">\r
        <p-floatLabel>\r
          <p-datePicker id="datePaiement"\r
                        inputId="datePaiement"\r
                        [(ngModel)]="datePaiement"\r
                        dateFormat="dd/mm/yy"\r
                        [showIcon]="true"\r
                        styleClass="w-full" />\r
          <label for="datePaiement">\r
            Date de paiement <span class="text-red-500">*</span>\r
          </label>\r
        </p-floatLabel>\r
      </div>\r
\r
      <div class="field">\r
        <p-floatLabel>\r
          <p-select id="modePaiement"\r
                    inputId="modePaiement"\r
                    [(ngModel)]="modePaiementSelectionne"\r
                    [options]="modesPaiement"\r
                    optionLabel="name"\r
                    placeholder="S\xE9lectionner un mode de paiement"\r
                    styleClass="w-full" />\r
          <label for="modePaiement">\r
            Mode de paiement <span class="text-red-500">*</span>\r
          </label>\r
        </p-floatLabel>\r
      </div>\r
\r
      <div class="field">\r
        <p-floatLabel>\r
          <input pInputText \r
                 id="referencePaiement" \r
                 [(ngModel)]="referencePaiement"\r
                 class="w-full" />\r
          <label for="referencePaiement">\r
            R\xE9f\xE9rence du paiement\r
          </label>\r
        </p-floatLabel>\r
        <small class="text-surface-500">\r
          Optionnel - Ex: num\xE9ro de transaction, num\xE9ro de ch\xE8que, etc.\r
        </small>\r
      </div>\r
    </div>\r
\r
    <ng-template pTemplate="footer">\r
      <div class="flex gap-2 justify-content-end">\r
        <p-button label="Annuler" \r
                  severity="secondary"\r
                  [outlined]="true"\r
                  (onClick)="displayPaiementDialog = false" />\r
        <p-button label="Enregistrer" \r
                  icon="pi pi-check"\r
                  (onClick)="enregistrerPaiement()" />\r
      </div>\r
    </ng-template>\r
  </p-dialog>\r
\r
  <!-- Dialog D\xE9tails -->\r
  <p-dialog header="D\xE9tails du Paiement" \r
            [(visible)]="displayDetailsDialog"\r
            [modal]="true"\r
            [style]="{ width: '90vw', 'max-width': '600px' }"\r
            [draggable]="false"\r
            [resizable]="false">\r
    <div class="flex flex-column gap-4" *ngIf="packingSelectionne">\r
      <!-- Info Contact -->\r
      <div>\r
        <h3 class="text-lg font-semibold mb-3">\r
          <i class="pi pi-user mr-2 text-primary"></i>\r
          Informations du Contact\r
        </h3>\r
        <div class="p-3 surface-50 dark:surface-800 border-round">\r
          <div class="grid">\r
            <div class="col-6">\r
              <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Nom complet</div>\r
              <div class="font-semibold">\r
                {{ packingSelectionne.contact?.prenom }} {{ packingSelectionne.contact?.nom }}\r
              </div>\r
            </div>\r
            <div class="col-6">\r
              <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">T\xE9l\xE9phone</div>\r
              <div class="font-semibold">{{ packingSelectionne.contact?.phone }}</div>\r
            </div>\r
          </div>\r
        </div>\r
      </div>\r
\r
      <p-divider />\r
\r
      <!-- Info Packing -->\r
      <div>\r
        <h3 class="text-lg font-semibold mb-3">\r
          <i class="pi pi-box mr-2 text-primary"></i>\r
          D\xE9tails du Packing\r
        </h3>\r
        <div class="grid">\r
          <div class="col-6">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Date d\xE9but</div>\r
            <div class="font-semibold">{{ formatDate(packingSelectionne.date_debut) }}</div>\r
          </div>\r
          <div class="col-6">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Date fin</div>\r
            <div class="font-semibold">\r
              {{ formatDate(packingSelectionne.date_fin) }}\r
            </div>\r
          </div>\r
          <div class="col-6">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Nombre de rouleaux</div>\r
            <div class="font-semibold">{{ packingSelectionne.nombre_rouleaux }}</div>\r
          </div>\r
          <div class="col-6">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Prix unitaire</div>\r
            <div class="font-semibold">{{ formatCurrency(packingSelectionne.prix_par_rouleau) }}</div>\r
          </div>\r
        </div>\r
      </div>\r
\r
      <p-divider />\r
\r
      <!-- Info Paiement -->\r
      <div>\r
        <h3 class="text-lg font-semibold mb-3">\r
          <i class="pi pi-money-bill mr-2 text-primary"></i>\r
          Informations de Paiement\r
        </h3>\r
        <div class="grid">\r
          <div class="col-6">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Montant total</div>\r
            <div class="font-semibold text-lg">{{ formatCurrency(packingSelectionne.montant) }}</div>\r
          </div>\r
          <div class="col-6">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Statut</div>\r
            <div>\r
              <p-tag [value]="packingSelectionne.statut_paiement === 'paye' ? 'Pay\xE9' : \r
                              packingSelectionne.statut_paiement === 'partiel' ? 'Partiel' : 'Non Pay\xE9'"\r
                     [severity]="getPaiementSeverity(packingSelectionne.statut_paiement)" />\r
            </div>\r
          </div>\r
          <div class="col-6">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Montant pay\xE9</div>\r
            <div class="font-semibold text-green-600 dark:text-green-400">\r
              {{ formatCurrency(packingSelectionne.montant_paye) }}\r
            </div>\r
          </div>\r
          <div class="col-6">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Reste \xE0 payer</div>\r
            <div class="font-semibold text-orange-600 dark:text-orange-400">\r
              {{ formatCurrency(packingSelectionne.montant_restant) }}\r
            </div>\r
          </div>\r
          <div class="col-6" *ngIf="packingSelectionne.date_paiement">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Date de paiement</div>\r
            <div class="font-semibold">{{ formatDate(packingSelectionne.date_paiement) }}</div>\r
          </div>\r
          <div class="col-6" *ngIf="packingSelectionne.mode_paiement">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">Mode de paiement</div>\r
            <div class="font-semibold">{{ packingSelectionne.mode_paiement }}</div>\r
          </div>\r
          <div class="col-12" *ngIf="packingSelectionne.reference_paiement">\r
            <div class="text-sm text-surface-600 dark:text-surface-400 mb-1">R\xE9f\xE9rence</div>\r
            <div class="font-semibold">{{ packingSelectionne.reference_paiement }}</div>\r
          </div>\r
        </div>\r
      </div>\r
    </div>\r
\r
    <ng-template pTemplate="footer">\r
      <div class="flex gap-2 justify-content-end">\r
        <p-button label="Imprimer Re\xE7u" \r
                  icon="pi pi-print"\r
                  severity="secondary"\r
                  [outlined]="true"\r
                  (onClick)="imprimerRecu(packingSelectionne!)" />\r
        <p-button label="Fermer" \r
                  (onClick)="displayDetailsDialog = false" />\r
      </div>\r
    </ng-template>\r
  </p-dialog>\r
</div>`, styles: ["/* src/app/pages/comptabilite/packing-paiement/packing-paiement.scss */\n.packing-paiement-container {\n  min-height: calc(100vh - 9rem);\n  background-color: var(--surface-ground);\n  padding: 1.5rem;\n}\n.packing-paiement-container h2 {\n  margin-bottom: 1.5rem;\n}\n.packing-paiement-container h2 i {\n  color: var(--primary-color);\n}\n.packing-paiement-container .grid .col-12 > .card,\n.packing-paiement-container .grid .col-md-6 > .card,\n.packing-paiement-container .grid .col-lg-3 > .card {\n  height: 100%;\n  border-radius: 12px;\n  border: 1px solid;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n.packing-paiement-container .grid .col-12 > .card:hover,\n.packing-paiement-container .grid .col-md-6 > .card:hover,\n.packing-paiement-container .grid .col-lg-3 > .card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.packing-paiement-container .grid .col-12 > .card .border-circle,\n.packing-paiement-container .grid .col-md-6 > .card .border-circle,\n.packing-paiement-container .grid .col-lg-3 > .card .border-circle {\n  min-width: 3.5rem;\n  min-height: 3.5rem;\n}\n.packing-paiement-container .grid .col-12:nth-child(1) .card,\n.packing-paiement-container .grid .col-md-6:nth-child(1) .card,\n.packing-paiement-container .grid .col-lg-3:nth-child(1) .card {\n  background:\n    linear-gradient(\n      135deg,\n      #e3f2fd 0%,\n      #bbdefb 100%);\n  border-color: #90caf9;\n}\n.packing-paiement-container .grid .col-12:nth-child(2) .card,\n.packing-paiement-container .grid .col-md-6:nth-child(2) .card,\n.packing-paiement-container .grid .col-lg-3:nth-child(2) .card {\n  background:\n    linear-gradient(\n      135deg,\n      #e8f5e9 0%,\n      #c8e6c9 100%);\n  border-color: #81c784;\n}\n.packing-paiement-container .grid .col-12:nth-child(3) .card,\n.packing-paiement-container .grid .col-md-6:nth-child(3) .card,\n.packing-paiement-container .grid .col-lg-3:nth-child(3) .card {\n  background:\n    linear-gradient(\n      135deg,\n      #fff3e0 0%,\n      #ffe0b2 100%);\n  border-color: #ffb74d;\n}\n.packing-paiement-container .grid .col-12:nth-child(4) .card,\n.packing-paiement-container .grid .col-md-6:nth-child(4) .card,\n.packing-paiement-container .grid .col-lg-3:nth-child(4) .card {\n  background:\n    linear-gradient(\n      135deg,\n      #ffebee 0%,\n      #ffcdd2 100%);\n  border-color: #e57373;\n}\n.packing-paiement-container :host ::ng-deep .p-card {\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  border: 1px solid var(--surface-border);\n}\n.packing-paiement-container :host ::ng-deep .p-card .p-card-body {\n  padding: 0;\n}\n.packing-paiement-container :host ::ng-deep .p-card .p-card-content {\n  padding: 0;\n}\n.packing-paiement-container :host ::ng-deep .p-toolbar {\n  background: var(--surface-50);\n  border: none;\n  border-bottom: 1px solid var(--surface-border);\n  padding: 1.25rem 1.5rem;\n  border-radius: 12px 12px 0 0;\n}\n.packing-paiement-container :host ::ng-deep .p-toolbar .p-button {\n  font-weight: 600;\n  padding: 0.625rem 1.25rem;\n}\n.packing-paiement-container :host ::ng-deep .p-toolbar .p-button.p-button-danger {\n  background:\n    linear-gradient(\n      135deg,\n      #ef5350 0%,\n      #e53935 100%);\n  border-color: #e53935;\n}\n.packing-paiement-container :host ::ng-deep .p-toolbar .p-button.p-button-success {\n  background:\n    linear-gradient(\n      135deg,\n      #66bb6a 0%,\n      #43a047 100%);\n  border-color: #43a047;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable {\n  border-radius: 0 0 12px 12px;\n  overflow: hidden;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-header {\n  background: var(--surface-0);\n  padding: 1.25rem 1.5rem;\n  border-bottom: 1px solid var(--surface-border);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-header .p-input-icon-left {\n  width: 100%;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-header .p-input-icon-left input {\n  width: 100%;\n  padding: 0.75rem 1rem 0.75rem 2.5rem;\n  border-radius: 8px;\n  border: 1px solid var(--surface-300);\n  font-size: 0.95rem;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-header .p-input-icon-left input:focus {\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 0.2rem var(--primary-50);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-header .p-input-icon-left i {\n  top: 50%;\n  transform: translateY(-50%);\n  left: 0.85rem;\n  color: var(--text-color-secondary);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-header .p-button-outlined {\n  border-color: var(--surface-300);\n  color: var(--text-color);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-header .p-button-outlined:hover {\n  background: var(--surface-100);\n  border-color: var(--surface-400);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th {\n  background: var(--surface-50);\n  color: var(--text-color);\n  font-weight: 600;\n  font-size: 0.85rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 1rem 1.25rem;\n  border-bottom: 2px solid var(--surface-200);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th:first-child {\n  padding-left: 1.5rem;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th .p-sortable-column-icon {\n  color: var(--text-color-secondary);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th.p-highlight {\n  background: var(--primary-50);\n  color: var(--primary-color);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th.p-highlight .p-sortable-column-icon {\n  color: var(--primary-color);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr {\n  transition: background-color 0.15s ease;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr:hover {\n  background: var(--surface-50) !important;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td {\n  padding: 1rem 1.25rem;\n  border-bottom: 1px solid var(--surface-100);\n  font-size: 0.95rem;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td:first-child {\n  padding-left: 1.5rem;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .font-semibold {\n  font-size: 0.95rem;\n  font-weight: 600;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .text-sm {\n  font-size: 0.85rem;\n  margin-top: 0.25rem;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .p-chip {\n  padding: 0.5rem 0.875rem;\n  font-weight: 600;\n  font-size: 0.875rem;\n  border-radius: 6px;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .p-tag {\n  font-weight: 600;\n  font-size: 0.8rem;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .p-button {\n  width: 2.5rem;\n  height: 2.5rem;\n  transition: all 0.2s ease;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .p-button:hover {\n  transform: scale(1.1);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .p-button.p-button-info:hover {\n  background: var(--blue-100);\n  color: var(--blue-600);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .p-button.p-button-success:hover {\n  background: var(--green-100);\n  color: var(--green-600);\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .p-button:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td .p-button:disabled:hover {\n  transform: none;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-emptymessage td {\n  padding: 3rem 1.5rem;\n  text-align: center;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-emptymessage td i {\n  opacity: 0.3;\n  margin-bottom: 1rem;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-emptymessage td p {\n  opacity: 0.5;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-paginator {\n  background: var(--surface-0);\n  border-top: 1px solid var(--surface-border);\n  padding: 1rem 1.5rem;\n  border-radius: 0 0 12px 12px;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-paginator .p-paginator-current {\n  color: var(--text-color-secondary);\n  font-size: 0.9rem;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-paginator .p-paginator-pages .p-paginator-page {\n  min-width: 2.5rem;\n  height: 2.5rem;\n  border-radius: 6px;\n  font-weight: 500;\n}\n.packing-paiement-container :host ::ng-deep .p-datatable .p-paginator .p-paginator-pages .p-paginator-page.p-highlight {\n  background: var(--primary-color);\n  color: white;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog {\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-header {\n  background: var(--surface-50);\n  border-bottom: 1px solid var(--surface-border);\n  padding: 1.5rem;\n  border-radius: 12px 12px 0 0;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-header .p-dialog-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content {\n  padding: 1.5rem;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .surface-50 {\n  border-radius: 8px;\n  border: 1px solid var(--surface-200);\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .p-divider {\n  margin: 1.5rem 0;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field {\n  margin-bottom: 1.5rem;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field:last-child {\n  margin-bottom: 0;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-float-label label {\n  font-weight: 500;\n  color: var(--text-color-secondary);\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-inputnumber,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-datepicker,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-select,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field input[pInputText] {\n  width: 100%;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-inputnumber input,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-datepicker input,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-select input,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field input[pInputText] input {\n  width: 100%;\n  padding: 0.75rem 1rem;\n  border-radius: 8px;\n  border: 1px solid var(--surface-300);\n  font-size: 0.95rem;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-inputnumber input:focus,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-datepicker input:focus,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field .p-select input:focus,\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field input[pInputText] input:focus {\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 0.2rem var(--primary-50);\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-content .field small {\n  display: block;\n  margin-top: 0.5rem;\n  font-size: 0.85rem;\n  color: var(--text-color-secondary);\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-footer {\n  background: var(--surface-50);\n  border-top: 1px solid var(--surface-border);\n  padding: 1.25rem 1.5rem;\n  border-radius: 0 0 12px 12px;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-footer .p-button {\n  padding: 0.75rem 1.5rem;\n  font-weight: 600;\n  border-radius: 8px;\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-footer .p-button.p-button-outlined {\n  border-color: var(--surface-300);\n  color: var(--text-color);\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-footer .p-button.p-button-outlined:hover {\n  background: var(--surface-100);\n}\n.packing-paiement-container :host ::ng-deep .p-dialog .p-dialog-footer .p-button:not(.p-button-outlined) {\n  background:\n    linear-gradient(\n      135deg,\n      var(--primary-500) 0%,\n      var(--primary-600) 100%);\n  border-color: var(--primary-600);\n}\n.packing-paiement-container :host ::ng-deep .p-toast .p-toast-message {\n  border-radius: 8px;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n}\n.packing-paiement-container :host ::ng-deep .p-toast .p-toast-message.p-toast-message-success {\n  background: rgba(102, 187, 106, 0.95);\n  border: 1px solid #66bb6a;\n}\n.packing-paiement-container :host ::ng-deep .p-toast .p-toast-message.p-toast-message-warn {\n  background: rgba(255, 183, 77, 0.95);\n  border: 1px solid #ffb74d;\n}\n.packing-paiement-container :host ::ng-deep .p-toast .p-toast-message.p-toast-message-error {\n  background: rgba(239, 83, 80, 0.95);\n  border: 1px solid #ef5350;\n}\n.packing-paiement-container :host ::ng-deep .p-toast .p-toast-message.p-toast-message-info {\n  background: rgba(66, 165, 245, 0.95);\n  border: 1px solid #42a5f5;\n}\n.packing-paiement-container :host ::ng-deep .p-skeleton {\n  background:\n    linear-gradient(\n      90deg,\n      var(--surface-200) 25%,\n      var(--surface-100) 50%,\n      var(--surface-200) 75%);\n  background-size: 200% 100%;\n  animation: skeleton-loading 1.5s ease-in-out infinite;\n}\n@media (prefers-color-scheme: dark) {\n  .packing-paiement-container .grid .col-12:nth-child(1) .card,\n  .packing-paiement-container .grid .col-md-6:nth-child(1) .card,\n  .packing-paiement-container .grid .col-lg-3:nth-child(1) .card {\n    background:\n      linear-gradient(\n        135deg,\n        rgba(25, 118, 210, 0.2) 0%,\n        rgba(25, 118, 210, 0.3) 100%);\n  }\n  .packing-paiement-container .grid .col-12:nth-child(2) .card,\n  .packing-paiement-container .grid .col-md-6:nth-child(2) .card,\n  .packing-paiement-container .grid .col-lg-3:nth-child(2) .card {\n    background:\n      linear-gradient(\n        135deg,\n        rgba(56, 142, 60, 0.2) 0%,\n        rgba(56, 142, 60, 0.3) 100%);\n  }\n  .packing-paiement-container .grid .col-12:nth-child(3) .card,\n  .packing-paiement-container .grid .col-md-6:nth-child(3) .card,\n  .packing-paiement-container .grid .col-lg-3:nth-child(3) .card {\n    background:\n      linear-gradient(\n        135deg,\n        rgba(255, 152, 0, 0.2) 0%,\n        rgba(255, 152, 0, 0.3) 100%);\n  }\n  .packing-paiement-container .grid .col-12:nth-child(4) .card,\n  .packing-paiement-container .grid .col-md-6:nth-child(4) .card,\n  .packing-paiement-container .grid .col-lg-3:nth-child(4) .card {\n    background:\n      linear-gradient(\n        135deg,\n        rgba(211, 47, 47, 0.2) 0%,\n        rgba(211, 47, 47, 0.3) 100%);\n  }\n}\n@keyframes skeleton-loading {\n  0% {\n    background-position: 200% 0;\n  }\n  100% {\n    background-position: -200% 0;\n  }\n}\n@media screen and (max-width: 960px) {\n  .packing-paiement-container {\n    padding: 1rem;\n  }\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th {\n    padding: 0.75rem;\n    font-size: 0.8rem;\n  }\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th:first-child {\n    padding-left: 1rem;\n  }\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td {\n    padding: 0.75rem;\n  }\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td:first-child {\n    padding-left: 1rem;\n  }\n  .packing-paiement-container :host ::ng-deep .p-toolbar {\n    padding: 1rem;\n    flex-wrap: wrap;\n    gap: 0.5rem;\n  }\n}\n@media screen and (max-width: 640px) {\n  .packing-paiement-container h2 {\n    font-size: 1.5rem;\n  }\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th,\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td {\n    padding: 0.5rem;\n    font-size: 0.85rem;\n  }\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th:first-child,\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td:first-child {\n    padding-left: 0.75rem;\n  }\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-thead > tr > th:nth-child(3),\n  .packing-paiement-container :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td:nth-child(3) {\n    display: none;\n  }\n  .packing-paiement-container :host ::ng-deep .p-dialog {\n    width: 95vw !important;\n    margin: 0.5rem;\n  }\n}\n/*# sourceMappingURL=packing-paiement.css.map */\n"] }]
  }], () => [{ type: Router }, { type: MessageService }, { type: ConfirmationService }], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(PackingPaiement, { className: "PackingPaiement", filePath: "src/app/pages/comptabilite/packing-paiement/packing-paiement.ts", lineNumber: 85 });
})();

// src/app/models/paiement-packing.model.ts
var MODE_PAIEMENT_LABELS = {
  especes: "Esp\xE8ces",
  virement: "Virement bancaire",
  cheque: "Ch\xE8que",
  mobile_money: "Mobile Money"
};
var PaiementPacking = class {
  id;
  reference;
  prestataire_id;
  periode_debut;
  periode_fin;
  montant_total;
  nb_packings;
  date_paiement;
  mode_paiement;
  notes;
  created_by;
  validated_by;
  validated_at;
  created_at;
  updated_at;
  deleted_at;
  // Appended attributes
  mode_paiement_label;
  prestataire_nom;
  is_validated;
  montant_verse;
  montant_restant;
  is_solde;
  // Relations
  prestataire;
  packings;
  versements;
  creator;
  validator;
  constructor(data = {}) {
    this.id = data.id ?? 0;
    this.reference = data.reference ?? "";
    this.prestataire_id = data.prestataire_id ?? 0;
    this.periode_debut = data.periode_debut ?? "";
    this.periode_fin = data.periode_fin ?? "";
    this.montant_total = data.montant_total ?? 0;
    this.nb_packings = data.nb_packings ?? 0;
    this.date_paiement = data.date_paiement ?? "";
    this.mode_paiement = data.mode_paiement ?? "especes";
    this.notes = data.notes ?? null;
    this.created_by = data.created_by ?? null;
    this.validated_by = data.validated_by ?? null;
    this.validated_at = data.validated_at ?? null;
    this.created_at = data.created_at ?? "";
    this.updated_at = data.updated_at ?? "";
    this.deleted_at = data.deleted_at ?? null;
    this.mode_paiement_label = data.mode_paiement_label ?? MODE_PAIEMENT_LABELS[this.mode_paiement] ?? "";
    this.prestataire_nom = data.prestataire_nom ?? null;
    this.is_validated = data.is_validated ?? false;
    this.montant_verse = data.montant_verse ?? 0;
    this.montant_restant = data.montant_restant ?? 0;
    this.is_solde = data.is_solde ?? false;
    this.prestataire = data.prestataire;
    this.packings = data.packings;
    this.versements = data.versements;
    this.creator = data.creator;
    this.validator = data.validator;
  }
};
var ComptabilitePrestataire = class {
  prestataire_id;
  prestataire_nom;
  prestataire_phone;
  prestataire_type;
  // Packings non encore facturés
  nb_packings_non_factures;
  montant_non_facture;
  // Paiements en cours (facturés mais pas soldés)
  nb_paiements_en_cours;
  montant_facture;
  montant_verse;
  montant_restant_facture;
  // Total dû (non facturé + restant sur factures)
  montant_total_du;
  constructor(data = {}) {
    this.prestataire_id = data.prestataire_id ?? 0;
    this.prestataire_nom = data.prestataire_nom ?? "";
    this.prestataire_phone = data.prestataire_phone ?? "";
    this.prestataire_type = data.prestataire_type ?? "";
    this.nb_packings_non_factures = data.nb_packings_non_factures ?? 0;
    this.montant_non_facture = data.montant_non_facture ?? 0;
    this.nb_paiements_en_cours = data.nb_paiements_en_cours ?? 0;
    this.montant_facture = data.montant_facture ?? 0;
    this.montant_verse = data.montant_verse ?? 0;
    this.montant_restant_facture = data.montant_restant_facture ?? 0;
    this.montant_total_du = data.montant_total_du ?? 0;
  }
};
var ComptabiliteSummary = class {
  periode_debut;
  periode_fin;
  nb_prestataires;
  // Totaux non facturés
  total_non_facture;
  // Totaux facturés
  total_facture;
  total_verse;
  total_restant_facture;
  // Total global dû
  montant_global_du;
  prestataires;
  constructor(data = {}) {
    this.periode_debut = data.periode_debut ?? null;
    this.periode_fin = data.periode_fin ?? null;
    this.nb_prestataires = data.nb_prestataires ?? 0;
    this.total_non_facture = data.total_non_facture ?? 0;
    this.total_facture = data.total_facture ?? 0;
    this.total_verse = data.total_verse ?? 0;
    this.total_restant_facture = data.total_restant_facture ?? 0;
    this.montant_global_du = data.montant_global_du ?? 0;
    this.prestataires = (data.prestataires ?? []).map((p) => new ComptabilitePrestataire(p));
  }
};
var PreviewPaiementPacking = class {
  prestataire_id;
  periode_debut;
  periode_fin;
  nb_packings;
  montant_total;
  total_rouleaux;
  packings;
  constructor(data = {}) {
    this.prestataire_id = data.prestataire_id ?? 0;
    this.periode_debut = data.periode_debut ?? "";
    this.periode_fin = data.periode_fin ?? "";
    this.nb_packings = data.nb_packings ?? 0;
    this.montant_total = data.montant_total ?? 0;
    this.total_rouleaux = data.total_rouleaux ?? 0;
    this.packings = data.packings ?? [];
  }
};

// src/app/services/comptabilite/packing-paiement/packing-paiement.service.ts
var PackingPaiementService = class _PackingPaiementService {
  http;
  apiUrl = `${environment.apiUrl}/paiement-packings`;
  constructor(http) {
    this.http = http;
  }
  /**
   * Liste des paiements avec filtres optionnels
   */
  getPaiements(filters) {
    let params = new HttpParams();
    if (filters) {
      if (filters.prestataire_id) {
        params = params.set("prestataire_id", filters.prestataire_id.toString());
      }
      if (filters.periode_debut) {
        params = params.set("periode_debut", filters.periode_debut);
      }
      if (filters.periode_fin) {
        params = params.set("periode_fin", filters.periode_fin);
      }
      if (filters.date_paiement_debut) {
        params = params.set("date_paiement_debut", filters.date_paiement_debut);
      }
      if (filters.date_paiement_fin) {
        params = params.set("date_paiement_fin", filters.date_paiement_fin);
      }
      if (filters.mode_paiement) {
        params = params.set("mode_paiement", filters.mode_paiement);
      }
      if (filters.search) {
        params = params.set("search", filters.search);
      }
      if (filters.sort_by) {
        params = params.set("sort_by", filters.sort_by);
      }
      if (filters.sort_order) {
        params = params.set("sort_order", filters.sort_order);
      }
      if (filters.per_page) {
        params = params.set("per_page", filters.per_page.toString());
      }
    }
    return this.http.get(this.apiUrl, { params });
  }
  /**
   * Détail d'un paiement
   */
  getPaiement(id) {
    return this.http.get(`${this.apiUrl}/${id}`);
  }
  /**
   * Prévisualisation avant paiement
   */
  getPreview(prestataireId, periodeDebut, periodeFin) {
    const params = new HttpParams().set("prestataire_id", prestataireId.toString()).set("periode_debut", periodeDebut).set("periode_fin", periodeFin);
    return this.http.get(`${this.apiUrl}/preview`, { params });
  }
  /**
   * Comptabilité - récapitulatif par prestataire
   */
  getComptabilite(filters) {
    let params = new HttpParams();
    if (filters) {
      if (filters.periode_debut) {
        params = params.set("periode_debut", filters.periode_debut);
      }
      if (filters.periode_fin) {
        params = params.set("periode_fin", filters.periode_fin);
      }
      if (filters.prestataire_id) {
        params = params.set("prestataire_id", filters.prestataire_id.toString());
      }
    }
    return this.http.get(`${this.apiUrl}/comptabilite`, { params });
  }
  /**
   * Créer un paiement groupé
   */
  createPaiement(data) {
    return this.http.post(this.apiUrl, data);
  }
  /**
   * Annuler/supprimer un paiement
   */
  deletePaiement(id) {
    return this.http.delete(`${this.apiUrl}/${id}`);
  }
  // ========================= Versements =========================
  /**
   * Liste des versements d'un paiement
   */
  getVersements(paiementId) {
    return this.http.get(`${this.apiUrl}/${paiementId}/versements`);
  }
  /**
   * Créer un versement
   */
  createVersement(paiementId, data) {
    return this.http.post(`${this.apiUrl}/${paiementId}/versements`, data);
  }
  /**
   * Supprimer un versement
   */
  deleteVersement(paiementId, versementId) {
    return this.http.delete(`${this.apiUrl}/${paiementId}/versements/${versementId}`);
  }
  static \u0275fac = function PackingPaiementService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PackingPaiementService)(\u0275\u0275inject(HttpClient));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _PackingPaiementService, factory: _PackingPaiementService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PackingPaiementService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }], null);
})();

// src/app/pages/comptabilite/components/stats-comptabilite-packing-widget/stats-comptabilite-packing-widget.ts
var StatsComptabilitePackingWidget = class _StatsComptabilitePackingWidget {
  paiementService;
  summary = null;
  constructor(paiementService) {
    this.paiementService = paiementService;
  }
  ngOnInit() {
    this.loadStats();
  }
  loadStats() {
    this.paiementService.getComptabilite().subscribe({
      next: (response) => {
        this.summary = new ComptabiliteSummary(response.data);
      }
    });
  }
  formatCurrency(value) {
    return new Intl.NumberFormat("fr-FR", {
      style: "decimal",
      minimumFractionDigits: 0
    }).format(value) + " GNF";
  }
  static \u0275fac = function StatsComptabilitePackingWidget_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _StatsComptabilitePackingWidget)(\u0275\u0275directiveInject(PackingPaiementService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _StatsComptabilitePackingWidget, selectors: [["app-stats-comptabilite-packing-widget"]], hostVars: 2, hostBindings: function StatsComptabilitePackingWidget_HostBindings(rf, ctx) {
    if (rf & 2) {
      \u0275\u0275styleProp("display", "contents");
    }
  }, decls: 29, vars: 4, consts: [[1, "col-span-12", "md:col-span-6", "xl:col-span-3"], [1, "card", "relative", "overflow-hidden", "h-40"], ["id", "visual", "viewBox", "0 0 900 600", "xmlns", "http://www.w3.org/2000/svg", "xmlnsXlink", "http://www.w3.org/1999/xlink", "version", "1.1", "preserveAspectRatio", "none", 1, "absolute", "left-0", "top-0", "h-full", "w-full"], ["x", "0", "y", "0", "width", "900", "height", "600", "fill", "var(--p-primary-600)"], ["d", "M0 400L30 386.5C60 373 120 346 180 334.8C240 323.7 300 328.3 360 345.2C420 362 480 391 540 392C600 393 660 366 720 355.2C780 344.3 840 349.7 870 352.3L900 355L900 601L870 601C840 601 780 601 720 601C660 601 600 601 540 601C480 601 420 601 360 601C300 601 240 601 180 601C120 601 60 601 30 601L0 601Z", "fill", "var(--p-primary-500)", "strokeLinecap", "round", "strokeLinejoin", "miter"], [1, "z-20", "relative", "text-white"], [1, "text-xl", "font-semibold", "mb-4"], [1, "text-2xl", "mb-8", "font-bold"], [1, "flex", "items-center", "justify-between", "mb-4"], [1, "text-surface-900", "dark:text-surface-0", "text-xl", "font-semibold"], [1, "text-2xl", "text-green-600", "mb-8", "font-bold"], [1, "card", "relative", "overflow-hidden", "h-40", "flex", "flex-col", "items-center", "justify-center"], [1, "text-surface-900", "dark:text-surface-0", "text-lg", "mb-6", "font-medium"], [1, "text-2xl", "text-orange-500", "font-bold"], [1, "text-2xl", "text-primary", "font-bold"]], template: function StatsComptabilitePackingWidget_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275domElementStart(0, "div", 0)(1, "div", 1);
      \u0275\u0275namespaceSVG();
      \u0275\u0275domElementStart(2, "svg", 2);
      \u0275\u0275domElement(3, "rect", 3)(4, "path", 4);
      \u0275\u0275domElementEnd();
      \u0275\u0275namespaceHTML();
      \u0275\u0275domElementStart(5, "div", 5)(6, "div", 6);
      \u0275\u0275text(7, "Total d\xFB");
      \u0275\u0275domElementEnd();
      \u0275\u0275domElementStart(8, "div", 7);
      \u0275\u0275text(9);
      \u0275\u0275domElementEnd()()()();
      \u0275\u0275domElementStart(10, "div", 0)(11, "div", 1)(12, "div", 8)(13, "div", 9);
      \u0275\u0275text(14, "Total vers\xE9");
      \u0275\u0275domElementEnd()();
      \u0275\u0275domElementStart(15, "div", 10);
      \u0275\u0275text(16);
      \u0275\u0275domElementEnd()()();
      \u0275\u0275domElementStart(17, "div", 0)(18, "div", 11)(19, "span", 12);
      \u0275\u0275text(20, "Non factur\xE9");
      \u0275\u0275domElementEnd();
      \u0275\u0275domElementStart(21, "span", 13);
      \u0275\u0275text(22);
      \u0275\u0275domElementEnd()()();
      \u0275\u0275domElementStart(23, "div", 0)(24, "div", 11)(25, "span", 12);
      \u0275\u0275text(26, "Prestataires");
      \u0275\u0275domElementEnd();
      \u0275\u0275domElementStart(27, "span", 14);
      \u0275\u0275text(28);
      \u0275\u0275domElementEnd()()();
    }
    if (rf & 2) {
      \u0275\u0275advance(9);
      \u0275\u0275textInterpolate(ctx.summary ? ctx.formatCurrency(ctx.summary.montant_global_du) : "...");
      \u0275\u0275advance(7);
      \u0275\u0275textInterpolate(ctx.summary ? ctx.formatCurrency(ctx.summary.total_verse) : "...");
      \u0275\u0275advance(6);
      \u0275\u0275textInterpolate(ctx.summary ? ctx.formatCurrency(ctx.summary.total_non_facture) : "...");
      \u0275\u0275advance(6);
      \u0275\u0275textInterpolate(ctx.summary ? ctx.summary.nb_prestataires : "...");
    }
  }, dependencies: [CommonModule], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(StatsComptabilitePackingWidget, [{
    type: Component,
    args: [{ selector: "app-stats-comptabilite-packing-widget", standalone: true, imports: [CommonModule], host: {
      "[style.display]": '"contents"'
    }, template: `\r
<div class="col-span-12 md:col-span-6 xl:col-span-3">\r
    <div class="card relative overflow-hidden h-40">\r
        <svg id="visual" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" class="absolute left-0 top-0 h-full w-full" preserveAspectRatio="none">\r
            <rect x="0" y="0" width="900" height="600" fill="var(--p-primary-600)"></rect>\r
            <path\r
                d="M0 400L30 386.5C60 373 120 346 180 334.8C240 323.7 300 328.3 360 345.2C420 362 480 391 540 392C600 393 660 366 720 355.2C780 344.3 840 349.7 870 352.3L900 355L900 601L870 601C840 601 780 601 720 601C660 601 600 601 540 601C480 601 420 601 360 601C300 601 240 601 180 601C120 601 60 601 30 601L0 601Z"\r
                fill="var(--p-primary-500)"\r
                strokeLinecap="round"\r
                strokeLinejoin="miter"\r
            ></path>\r
        </svg>\r
        <div class="z-20 relative text-white">\r
            <div class="text-xl font-semibold mb-4">Total d\xFB</div>\r
            <div class="text-2xl mb-8 font-bold">{{ summary ? formatCurrency(summary.montant_global_du) : '...' }}</div>\r
        </div>\r
    </div>\r
</div>\r
\r
<div class="col-span-12 md:col-span-6 xl:col-span-3">\r
    <div class="card relative overflow-hidden h-40">\r
        <div class="flex items-center justify-between mb-4">\r
            <div class="text-surface-900 dark:text-surface-0 text-xl font-semibold">Total vers\xE9</div>\r
        </div>\r
        <div class="text-2xl text-green-600 mb-8 font-bold">{{ summary ? formatCurrency(summary.total_verse) : '...' }}</div>\r
    </div>\r
</div>\r
\r
<div class="col-span-12 md:col-span-6 xl:col-span-3">\r
    <div class="card relative overflow-hidden h-40 flex flex-col items-center justify-center">\r
        <span class="text-surface-900 dark:text-surface-0 text-lg mb-6 font-medium">Non factur\xE9</span>\r
        <span class="text-2xl text-orange-500 font-bold">{{ summary ? formatCurrency(summary.total_non_facture) : '...' }}</span>\r
    </div>\r
</div>\r
\r
<div class="col-span-12 md:col-span-6 xl:col-span-3">\r
    <div class="card relative overflow-hidden h-40 flex flex-col items-center justify-center">\r
        <span class="text-surface-900 dark:text-surface-0 text-lg mb-6 font-medium">Prestataires</span>\r
        <span class="text-2xl text-primary font-bold">{{ summary ? summary.nb_prestataires : '...' }}</span>\r
    </div>\r
</div>\r
` }]
  }], () => [{ type: PackingPaiementService }], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(StatsComptabilitePackingWidget, { className: "StatsComptabilitePackingWidget", filePath: "src/app/pages/comptabilite/components/stats-comptabilite-packing-widget/stats-comptabilite-packing-widget.ts", lineNumber: 16 });
})();

// src/app/pages/comptabilite/components/comptabilite-packing-tableau/comptabilite-packing-tableau.ts
var _c02 = ["dt"];
var _c12 = () => ({ "min-width": "90rem" });
var _c22 = () => [10, 20, 30];
var _c32 = () => ({ width: "850px" });
var _c42 = () => ({ width: "550px" });
var _c5 = () => ({ width: "750px" });
var _c6 = () => ({ width: "450px" });
function ComptabilitePackingTableau_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 15)(1, "div")(2, "label", 16);
    \u0275\u0275text(3, "P\xE9riode d\xE9but");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p-datepicker", 17);
    \u0275\u0275twoWayListener("ngModelChange", function ComptabilitePackingTableau_ng_template_3_Template_p_datepicker_ngModelChange_4_listener($event) {
      \u0275\u0275restoreView(_r2);
      const ctx_r2 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r2.filtrePeriodeDebut, $event) || (ctx_r2.filtrePeriodeDebut = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "div")(6, "label", 16);
    \u0275\u0275text(7, "P\xE9riode fin");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "p-datepicker", 18);
    \u0275\u0275twoWayListener("ngModelChange", function ComptabilitePackingTableau_ng_template_3_Template_p_datepicker_ngModelChange_8_listener($event) {
      \u0275\u0275restoreView(_r2);
      const ctx_r2 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r2.filtrePeriodeFin, $event) || (ctx_r2.filtrePeriodeFin = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 19)(10, "p-button", 20);
    \u0275\u0275listener("onClick", function ComptabilitePackingTableau_ng_template_3_Template_p_button_onClick_10_listener() {
      \u0275\u0275restoreView(_r2);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.loadComptabilite());
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.filtrePeriodeDebut);
    \u0275\u0275property("showIcon", true);
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.filtrePeriodeFin);
    \u0275\u0275property("showIcon", true);
  }
}
function ComptabilitePackingTableau_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 21);
    \u0275\u0275listener("onClick", function ComptabilitePackingTableau_ng_template_5_Template_p_button_onClick_0_listener() {
      \u0275\u0275restoreView(_r4);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.exportCSV());
    });
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 22)(1, "h5", 23);
    \u0275\u0275text(2, "Comptabilit\xE9 Packings - R\xE9capitulatif par prestataire");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p-iconfield");
    \u0275\u0275element(4, "p-inputicon", 24);
    \u0275\u0275elementStart(5, "input", 25);
    \u0275\u0275listener("input", function ComptabilitePackingTableau_ng_template_9_Template_input_input_5_listener($event) {
      \u0275\u0275restoreView(_r5);
      const ctx_r2 = \u0275\u0275nextContext();
      const dt_r6 = \u0275\u0275reference(8);
      return \u0275\u0275resetView(ctx_r2.onGlobalFilter(dt_r6, $event));
    });
    \u0275\u0275elementEnd()()();
  }
}
function ComptabilitePackingTableau_ng_template_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 26);
    \u0275\u0275element(2, "p-tableHeaderCheckbox");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th", 27)(4, "span", 28);
    \u0275\u0275text(5, "Prestataire ");
    \u0275\u0275element(6, "p-sortIcon", 29);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "th", 30);
    \u0275\u0275text(8, "T\xE9l\xE9phone");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th", 31)(10, "span", 28);
    \u0275\u0275text(11, "Non factur\xE9s ");
    \u0275\u0275element(12, "p-sortIcon", 32);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "th", 33)(14, "span", 28);
    \u0275\u0275text(15, "Mnt non factur\xE9 ");
    \u0275\u0275element(16, "p-sortIcon", 34);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "th", 35)(18, "span", 28);
    \u0275\u0275text(19, "Factur\xE9 ");
    \u0275\u0275element(20, "p-sortIcon", 36);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(21, "th", 37)(22, "span", 28);
    \u0275\u0275text(23, "Vers\xE9 ");
    \u0275\u0275element(24, "p-sortIcon", 38);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(25, "th", 39)(26, "span", 28);
    \u0275\u0275text(27, "Reste facture ");
    \u0275\u0275element(28, "p-sortIcon", 40);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(29, "th", 41)(30, "span", 28);
    \u0275\u0275text(31, "Total d\xFB ");
    \u0275\u0275element(32, "p-sortIcon", 42);
    \u0275\u0275elementEnd()();
    \u0275\u0275element(33, "th", 30);
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_13_p_tag_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-tag", 51);
  }
  if (rf & 2) {
    const item_r8 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275property("value", item_r8.nb_packings_non_factures + "");
  }
}
function ComptabilitePackingTableau_ng_template_13_span_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "0");
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_13_p_button_24_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 52);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_13_p_button_24_Template_p_button_click_0_listener() {
      \u0275\u0275restoreView(_r9);
      const item_r8 = \u0275\u0275nextContext().$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.openPreview(item_r8));
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    \u0275\u0275property("rounded", true)("outlined", true);
  }
}
function ComptabilitePackingTableau_ng_template_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr")(1, "td", 26);
    \u0275\u0275element(2, "p-tableCheckbox", 43);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "td")(4, "span", 44);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "td");
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "td");
    \u0275\u0275template(9, ComptabilitePackingTableau_ng_template_13_p_tag_9_Template, 1, 1, "p-tag", 45)(10, ComptabilitePackingTableau_ng_template_13_span_10_Template, 2, 0, "span", 46);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "td");
    \u0275\u0275text(12);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "td");
    \u0275\u0275text(14);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "td", 47);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "td")(18, "span");
    \u0275\u0275text(19);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(20, "td", 48);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "td")(23, "p-button", 49);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_13_Template_p_button_click_23_listener() {
      const item_r8 = \u0275\u0275restoreView(_r7).$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.openVersement(item_r8));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275template(24, ComptabilitePackingTableau_ng_template_13_p_button_24_Template, 1, 2, "p-button", 50);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r8 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275property("value", item_r8);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r8.prestataire_nom);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r8.prestataire_phone);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", item_r8.nb_packings_non_factures > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r8.nb_packings_non_factures === 0);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(item_r8.montant_non_facture));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(item_r8.montant_facture));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(item_r8.montant_verse));
    \u0275\u0275advance(2);
    \u0275\u0275classMap(item_r8.montant_restant_facture > 0 ? "text-orange-500 font-semibold" : "");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.formatCurrency(item_r8.montant_restant_facture), " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(item_r8.montant_total_du));
    \u0275\u0275advance(2);
    \u0275\u0275property("rounded", true)("outlined", true);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r8.nb_packings_non_factures > 0);
  }
}
function ComptabilitePackingTableau_ng_template_15_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 54)(1, "div", 55)(2, "span")(3, "strong");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275text(5, " prestataire(s)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span");
    \u0275\u0275text(7, "Non factur\xE9 : ");
    \u0275\u0275elementStart(8, "strong");
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "span");
    \u0275\u0275text(11, "Vers\xE9 : ");
    \u0275\u0275elementStart(12, "strong", 56);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(14, "div", 57);
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.comptaSummary.nb_prestataires);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.comptaSummary.total_non_facture));
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.comptaSummary.total_verse));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" Total d\xFB : ", ctx_r2.formatCurrency(ctx_r2.comptaSummary.montant_global_du), " ");
  }
}
function ComptabilitePackingTableau_ng_template_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, ComptabilitePackingTableau_ng_template_15_div_0_Template, 16, 4, "div", 53);
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("ngIf", ctx_r2.comptaSummary);
  }
}
function ComptabilitePackingTableau_ng_template_18_div_0_ng_template_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th");
    \u0275\u0275text(2, "R\xE9f\xE9rence");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th");
    \u0275\u0275text(4, "D\xE9but");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "th");
    \u0275\u0275text(6, "Fin");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th");
    \u0275\u0275text(8, "Rouleaux");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th");
    \u0275\u0275text(10, "Montant");
    \u0275\u0275elementEnd()();
  }
}
function ComptabilitePackingTableau_ng_template_18_div_0_ng_template_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "td");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "td");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "td");
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "td", 62);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const packing_r10 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(packing_r10.reference);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatDateDisplay(packing_r10.date_debut));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatDateDisplay(packing_r10.date_fin));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(packing_r10.nb_rouleaux);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(packing_r10.montant));
  }
}
function ComptabilitePackingTableau_ng_template_18_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 60)(1, "div", 61)(2, "div")(3, "span", 62);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275text(5, " packing(s) - ");
    \u0275\u0275elementStart(6, "span", 62);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275text(8, " rouleaux ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div", 57);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "p-table", 63);
    \u0275\u0275template(12, ComptabilitePackingTableau_ng_template_18_div_0_ng_template_12_Template, 11, 0, "ng-template", null, 4, \u0275\u0275templateRefExtractor)(14, ComptabilitePackingTableau_ng_template_18_div_0_ng_template_14_Template, 11, 5, "ng-template", null, 5, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.previewData.nb_packings);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.previewData.total_rouleaux);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.previewData.montant_total));
    \u0275\u0275advance();
    \u0275\u0275property("value", ctx_r2.previewData.packings)("rows", 10)("paginator", ctx_r2.previewData.packings.length > 10)("rowHover", true);
  }
}
function ComptabilitePackingTableau_ng_template_18_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 64);
    \u0275\u0275element(1, "i", 65);
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, ComptabilitePackingTableau_ng_template_18_div_0_Template, 16, 7, "div", 58)(1, ComptabilitePackingTableau_ng_template_18_div_1_Template, 2, 0, "div", 59);
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("ngIf", ctx_r2.previewData);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.previewLoading);
  }
}
function ComptabilitePackingTableau_ng_template_20_p_button_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 68);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_20_p_button_1_Template_p_button_click_0_listener() {
      \u0275\u0275restoreView(_r12);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.previewDialog = false;
      return \u0275\u0275resetView(ctx_r2.openVersement(ctx_r2.selectedItem));
    });
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 66);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_20_Template_p_button_click_0_listener() {
      \u0275\u0275restoreView(_r11);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.previewDialog = false);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275template(1, ComptabilitePackingTableau_ng_template_20_p_button_1_Template, 1, 0, "p-button", 67);
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedItem);
  }
}
function ComptabilitePackingTableau_ng_template_23_div_0_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 74);
    \u0275\u0275element(1, "i", 75);
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_23_div_0_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r13 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 76)(1, "p", 77);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p-button", 78);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_23_div_0_div_7_Template_p_button_click_3_listener() {
      \u0275\u0275restoreView(_r13);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.facturerNonFactures());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r2.selectedItem.nb_packings_non_factures, " packing(s) \xE0 facturer avant de payer");
    \u0275\u0275advance();
    \u0275\u0275property("loading", ctx_r2.facturerLoading);
  }
}
function ComptabilitePackingTableau_ng_template_23_div_0_div_8_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r15 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 89)(1, "span", 90);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p-button", 91);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_23_div_0_div_8_div_1_Template_p_button_click_3_listener() {
      \u0275\u0275restoreView(_r15);
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.facturerNonFactures());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r2.selectedItem.nb_packings_non_factures, " packing(s) non factur\xE9(s)");
    \u0275\u0275advance();
    \u0275\u0275property("outlined", true)("loading", ctx_r2.facturerLoading);
  }
}
function ComptabilitePackingTableau_ng_template_23_div_0_div_8_div_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r16 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 92)(1, "label", 84);
    \u0275\u0275text(2, "Facture");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p-select", 93);
    \u0275\u0275twoWayListener("ngModelChange", function ComptabilitePackingTableau_ng_template_23_div_0_div_8_div_2_Template_p_select_ngModelChange_3_listener($event) {
      \u0275\u0275restoreView(_r16);
      const ctx_r2 = \u0275\u0275nextContext(4);
      \u0275\u0275twoWayBindingSet(ctx_r2.selectedPaiement, $event) || (ctx_r2.selectedPaiement = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(3);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.selectedPaiement);
    \u0275\u0275property("options", ctx_r2.paiementsPrestataire);
  }
}
function ComptabilitePackingTableau_ng_template_23_div_0_div_8_small_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 94);
    \u0275\u0275text(1, "Requis.");
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_23_div_0_div_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r14 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275template(1, ComptabilitePackingTableau_ng_template_23_div_0_div_8_div_1_Template, 4, 3, "div", 79)(2, ComptabilitePackingTableau_ng_template_23_div_0_div_8_div_2_Template, 4, 2, "div", 80);
    \u0275\u0275elementStart(3, "div", 81)(4, "span", 82);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 83);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 60)(9, "div")(10, "label", 84);
    \u0275\u0275text(11, "Montant \xE0 verser");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "p-inputnumber", 85);
    \u0275\u0275twoWayListener("ngModelChange", function ComptabilitePackingTableau_ng_template_23_div_0_div_8_Template_p_inputnumber_ngModelChange_12_listener($event) {
      \u0275\u0275restoreView(_r14);
      const ctx_r2 = \u0275\u0275nextContext(3);
      \u0275\u0275twoWayBindingSet(ctx_r2.versementData.montant, $event) || (ctx_r2.versementData.montant = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275template(13, ComptabilitePackingTableau_ng_template_23_div_0_div_8_small_13_Template, 2, 0, "small", 86);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "div")(15, "label", 84);
    \u0275\u0275text(16, "Mode de paiement");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "p-select", 87);
    \u0275\u0275twoWayListener("ngModelChange", function ComptabilitePackingTableau_ng_template_23_div_0_div_8_Template_p_select_ngModelChange_17_listener($event) {
      \u0275\u0275restoreView(_r14);
      const ctx_r2 = \u0275\u0275nextContext(3);
      \u0275\u0275twoWayBindingSet(ctx_r2.versementData.mode_paiement, $event) || (ctx_r2.versementData.mode_paiement = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "div")(19, "label", 84);
    \u0275\u0275text(20, "Notes");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "textarea", 88);
    \u0275\u0275twoWayListener("ngModelChange", function ComptabilitePackingTableau_ng_template_23_div_0_div_8_Template_textarea_ngModelChange_21_listener($event) {
      \u0275\u0275restoreView(_r14);
      const ctx_r2 = \u0275\u0275nextContext(3);
      \u0275\u0275twoWayBindingSet(ctx_r2.versementData.notes, $event) || (ctx_r2.versementData.notes = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedItem.nb_packings_non_factures > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.paiementsPrestataire.length > 1);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Restant sur ", ctx_r2.selectedPaiement.reference);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.selectedPaiement.montant_restant));
    \u0275\u0275advance(5);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.versementData.montant);
    \u0275\u0275property("min", 1)("max", ctx_r2.selectedPaiement.montant_restant)("useGrouping", true);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.versementSubmitted && !ctx_r2.versementData.montant);
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.versementData.mode_paiement);
    \u0275\u0275property("options", ctx_r2.modesPaiement);
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.versementData.notes);
  }
}
function ComptabilitePackingTableau_ng_template_23_div_0_div_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 95);
    \u0275\u0275text(1, " Aucun paiement en cours. ");
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_23_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 60)(1, "div", 22)(2, "span", 69);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 70);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(6, ComptabilitePackingTableau_ng_template_23_div_0_div_6_Template, 2, 0, "div", 71)(7, ComptabilitePackingTableau_ng_template_23_div_0_div_7_Template, 4, 2, "div", 72)(8, ComptabilitePackingTableau_ng_template_23_div_0_div_8_Template, 22, 12, "div", 46)(9, ComptabilitePackingTableau_ng_template_23_div_0_div_9_Template, 2, 0, "div", 73);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.selectedItem.prestataire_nom);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.selectedItem.montant_total_du));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.versementLoading);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.versementLoading && ctx_r2.paiementsPrestataire.length === 0 && ctx_r2.selectedItem.nb_packings_non_factures > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.versementLoading && ctx_r2.selectedPaiement);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.versementLoading && ctx_r2.paiementsPrestataire.length === 0 && ctx_r2.selectedItem.nb_packings_non_factures === 0);
  }
}
function ComptabilitePackingTableau_ng_template_23_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, ComptabilitePackingTableau_ng_template_23_div_0_Template, 10, 6, "div", 58);
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("ngIf", ctx_r2.selectedItem);
  }
}
function ComptabilitePackingTableau_ng_template_25_Template(rf, ctx) {
  if (rf & 1) {
    const _r17 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 96);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_25_Template_p_button_click_0_listener() {
      \u0275\u0275restoreView(_r17);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.hideVersementDialog());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(1, "p-button", 97);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_25_Template_p_button_click_1_listener() {
      \u0275\u0275restoreView(_r17);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.saveVersement());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("disabled", ctx_r2.versementSaving);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.versementSaving || !ctx_r2.selectedPaiement)("loading", ctx_r2.versementSaving);
  }
}
function ComptabilitePackingTableau_ng_template_28_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 64);
    \u0275\u0275element(1, "i", 65);
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_28_div_1_p_table_22_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th");
    \u0275\u0275text(2, "R\xE9f\xE9rence");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th");
    \u0275\u0275text(4, "Date");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "th");
    \u0275\u0275text(6, "Montant");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th");
    \u0275\u0275text(8, "Mode");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th");
    \u0275\u0275text(10, "Notes");
    \u0275\u0275elementEnd();
    \u0275\u0275element(11, "th");
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_28_div_1_p_table_22_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r18 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr")(1, "td", 44);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "td");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "td", 106);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "td");
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "td");
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "td")(12, "p-button", 107);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_28_div_1_p_table_22_ng_template_3_Template_p_button_click_12_listener() {
      const versement_r19 = \u0275\u0275restoreView(_r18).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.confirmDeleteVersement(ctx_r2.historiqueData.paiement_id, versement_r19));
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const versement_r19 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(versement_r19.reference);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatDateDisplay(versement_r19.date_versement));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(versement_r19.montant));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(versement_r19.mode_paiement_label);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(versement_r19.notes || "-");
    \u0275\u0275advance(2);
    \u0275\u0275property("rounded", true)("outlined", true)("text", true);
  }
}
function ComptabilitePackingTableau_ng_template_28_div_1_p_table_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-table", 105);
    \u0275\u0275template(1, ComptabilitePackingTableau_ng_template_28_div_1_p_table_22_ng_template_1_Template, 12, 0, "ng-template", null, 4, \u0275\u0275templateRefExtractor)(3, ComptabilitePackingTableau_ng_template_28_div_1_p_table_22_ng_template_3_Template, 13, 8, "ng-template", null, 5, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275property("value", ctx_r2.historiqueData.versements)("rowHover", true);
  }
}
function ComptabilitePackingTableau_ng_template_28_div_1_div_23_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 95);
    \u0275\u0275text(1, " Aucun versement enregistr\xE9. ");
    \u0275\u0275elementEnd();
  }
}
function ComptabilitePackingTableau_ng_template_28_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 60)(1, "div", 98)(2, "div", 99)(3, "span", 69);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275element(5, "p-tag", 100);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 101)(7, "div", 102)(8, "span", 82);
    \u0275\u0275text(9, "Montant total");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "div", 62);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "div", 102)(13, "span", 82);
    \u0275\u0275text(14, "Vers\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "div", 103);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "div", 102)(18, "span", 82);
    \u0275\u0275text(19, "Restant");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "div", 83);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275template(22, ComptabilitePackingTableau_ng_template_28_div_1_p_table_22_Template, 5, 2, "p-table", 104)(23, ComptabilitePackingTableau_ng_template_28_div_1_div_23_Template, 2, 0, "div", 73);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.historiqueData.reference);
    \u0275\u0275advance();
    \u0275\u0275property("value", ctx_r2.historiqueData.is_solde ? "Sold\xE9" : "En cours")("severity", ctx_r2.historiqueData.is_solde ? "success" : "warn");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.historiqueData.montant_total));
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.historiqueData.montant_verse));
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.formatCurrency(ctx_r2.historiqueData.montant_restant));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.historiqueData.versements.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.historiqueData.versements.length === 0);
  }
}
function ComptabilitePackingTableau_ng_template_28_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, ComptabilitePackingTableau_ng_template_28_div_0_Template, 2, 0, "div", 59)(1, ComptabilitePackingTableau_ng_template_28_div_1_Template, 24, 8, "div", 58);
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("ngIf", ctx_r2.historiqueLoading);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.historiqueData);
  }
}
function ComptabilitePackingTableau_ng_template_30_Template(rf, ctx) {
  if (rf & 1) {
    const _r20 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 66);
    \u0275\u0275listener("click", function ComptabilitePackingTableau_ng_template_30_Template_p_button_click_0_listener() {
      \u0275\u0275restoreView(_r20);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.historiqueDialog = false);
    });
    \u0275\u0275elementEnd();
  }
}
var ComptabilitePackingTableau = class _ComptabilitePackingTableau {
  paiementService;
  messageService;
  confirmationService;
  filterFields = ["prestataire_nom", "prestataire_phone", "montant_total_du"];
  prestataires = signal([], ...ngDevMode ? [{ debugName: "prestataires" }] : []);
  selectedPrestataires = null;
  comptaSummary = null;
  loading = false;
  // Filtres période
  filtrePeriodeDebut = null;
  filtrePeriodeFin = null;
  selectedItem = null;
  modesPaiement = [
    { label: MODE_PAIEMENT_LABELS.especes, value: "especes" },
    { label: MODE_PAIEMENT_LABELS.virement, value: "virement" },
    { label: MODE_PAIEMENT_LABELS.cheque, value: "cheque" },
    { label: MODE_PAIEMENT_LABELS.mobile_money, value: "mobile_money" }
  ];
  // Dialog prévisualisation
  previewDialog = false;
  previewData = null;
  previewLoading = false;
  // Dialog paiement (unifié)
  versementDialog = false;
  facturerLoading = false;
  paiementsPrestataire = [];
  selectedPaiement = null;
  versementData = {
    montant: null,
    date_versement: null,
    mode_paiement: "especes",
    notes: ""
  };
  versementLoading = false;
  versementSaving = false;
  versementSubmitted = false;
  // Dialog historique versements
  historiqueDialog = false;
  historiqueData = null;
  historiqueLoading = false;
  dt;
  exportColumns;
  cols;
  constructor(paiementService, messageService, confirmationService) {
    this.paiementService = paiementService;
    this.messageService = messageService;
    this.confirmationService = confirmationService;
  }
  ngOnInit() {
    this.loadComptabilite();
    this.initColumns();
  }
  initColumns() {
    this.cols = [
      { field: "prestataire_nom", header: "Prestataire" },
      { field: "prestataire_phone", header: "T\xE9l\xE9phone" },
      { field: "nb_packings_non_factures", header: "Non factur\xE9s" },
      { field: "montant_non_facture", header: "Mnt non factur\xE9" },
      { field: "montant_facture", header: "Factur\xE9" },
      { field: "montant_verse", header: "Vers\xE9" },
      { field: "montant_restant_facture", header: "Reste facture" },
      { field: "montant_total_du", header: "Total d\xFB" }
    ];
    this.exportColumns = this.cols.map((col) => ({
      title: col.header,
      dataKey: col.field
    }));
  }
  loadComptabilite() {
    this.loading = true;
    const filters = {};
    if (this.filtrePeriodeDebut) {
      filters.periode_debut = this.formatDate(this.filtrePeriodeDebut);
    }
    if (this.filtrePeriodeFin) {
      filters.periode_fin = this.formatDate(this.filtrePeriodeFin);
    }
    this.paiementService.getComptabilite(filters).subscribe({
      next: (response) => {
        this.comptaSummary = new ComptabiliteSummary(response.data);
        this.prestataires.set(this.comptaSummary.prestataires);
        this.loading = false;
      },
      error: () => {
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger la comptabilit\xE9",
          life: 3e3
        });
        this.loading = false;
      }
    });
  }
  exportCSV() {
    this.dt.exportCSV();
  }
  onGlobalFilter(table, event) {
    table.filterGlobal(event.target.value, "contains");
  }
  openPreview(item) {
    const periodeDebut = this.filtrePeriodeDebut ? this.formatDate(this.filtrePeriodeDebut) : "2000-01-01";
    const periodeFin = this.filtrePeriodeFin ? this.formatDate(this.filtrePeriodeFin) : "2099-12-31";
    this.selectedItem = item;
    this.previewDialog = true;
    this.previewLoading = true;
    this.previewData = null;
    this.paiementService.getPreview(item.prestataire_id, periodeDebut, periodeFin).subscribe({
      next: (response) => {
        this.previewData = new PreviewPaiementPacking(response.data);
        this.previewLoading = false;
      },
      error: () => {
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger la pr\xE9visualisation",
          life: 3e3
        });
        this.previewLoading = false;
        this.previewDialog = false;
      }
    });
  }
  // ========================= Facturation =========================
  facturerNonFactures() {
    if (!this.selectedItem || this.facturerLoading)
      return;
    this.facturerLoading = true;
    const periodeDebut = this.filtrePeriodeDebut ? this.formatDate(this.filtrePeriodeDebut) : "2000-01-01";
    const periodeFin = this.filtrePeriodeFin ? this.formatDate(this.filtrePeriodeFin) : "2099-12-31";
    const dto = {
      prestataire_id: this.selectedItem.prestataire_id,
      periode_debut: periodeDebut,
      periode_fin: periodeFin,
      date_paiement: this.formatDate(/* @__PURE__ */ new Date())
    };
    this.paiementService.createPaiement(dto).subscribe({
      next: (response) => {
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `Facture ${response.data.reference} cr\xE9\xE9e`,
          life: 3e3
        });
        this.facturerLoading = false;
        if (this.selectedItem) {
          this.selectedItem.nb_packings_non_factures = 0;
          this.selectedItem.montant_non_facture = 0;
        }
        this.reloadPaiementsInDialog();
        this.loadComptabilite();
      },
      error: (error) => {
        const msg = error?.error?.message || "Impossible de cr\xE9er la facture";
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: msg,
          life: 5e3
        });
        this.facturerLoading = false;
      }
    });
  }
  reloadPaiementsInDialog() {
    if (!this.selectedItem)
      return;
    this.paiementService.getPaiements({ prestataire_id: this.selectedItem.prestataire_id }).subscribe({
      next: (response) => {
        this.paiementsPrestataire = (response.data || []).map((p) => new PaiementPacking(p)).filter((p) => !p.is_solde);
        if (this.paiementsPrestataire.length > 0) {
          this.selectedPaiement = this.paiementsPrestataire[0];
        }
      }
    });
  }
  // ========================= Versements =========================
  openVersement(item) {
    this.selectedItem = item;
    this.selectedPaiement = null;
    this.versementDialog = true;
    this.versementLoading = true;
    this.versementSubmitted = false;
    this.paiementsPrestataire = [];
    this.resetVersementForm();
    this.paiementService.getPaiements({ prestataire_id: item.prestataire_id }).subscribe({
      next: (response) => {
        this.paiementsPrestataire = (response.data || []).map((p) => new PaiementPacking(p)).filter((p) => !p.is_solde);
        if (this.paiementsPrestataire.length > 0) {
          this.selectedPaiement = this.paiementsPrestataire[0];
        }
        this.versementLoading = false;
      },
      error: () => {
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les paiements",
          life: 3e3
        });
        this.versementLoading = false;
        this.versementDialog = false;
      }
    });
  }
  resetVersementForm() {
    this.versementData = {
      montant: null,
      date_versement: /* @__PURE__ */ new Date(),
      mode_paiement: "especes",
      notes: ""
    };
    this.versementSubmitted = false;
  }
  hideVersementDialog() {
    this.versementDialog = false;
    this.selectedPaiement = null;
    this.versementSubmitted = false;
  }
  saveVersement() {
    this.versementSubmitted = true;
    if (!this.selectedPaiement || !this.versementData.montant || !this.versementData.date_versement || this.versementSaving) {
      return;
    }
    this.versementSaving = true;
    const dto = {
      montant: this.versementData.montant,
      date_versement: this.formatDate(this.versementData.date_versement),
      mode_paiement: this.versementData.mode_paiement,
      notes: this.versementData.notes || void 0
    };
    this.paiementService.createVersement(this.selectedPaiement.id, dto).subscribe({
      next: () => {
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `Versement de ${this.formatCurrency(dto.montant)} enregistr\xE9`,
          life: 3e3
        });
        this.versementSaving = false;
        this.versementDialog = false;
        this.loadComptabilite();
      },
      error: (error) => {
        const msg = error?.error?.message || "Impossible d'enregistrer le versement";
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: msg,
          life: 5e3
        });
        this.versementSaving = false;
      }
    });
  }
  // ========================= Historique versements =========================
  openHistorique(paiement) {
    this.historiqueDialog = true;
    this.historiqueLoading = true;
    this.historiqueData = null;
    this.paiementService.getVersements(paiement.id).subscribe({
      next: (response) => {
        this.historiqueData = response.data;
        this.historiqueLoading = false;
      },
      error: () => {
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les versements",
          life: 3e3
        });
        this.historiqueLoading = false;
        this.historiqueDialog = false;
      }
    });
  }
  confirmDeleteVersement(paiementId, versement) {
    this.confirmationService.confirm({
      message: `Supprimer le versement ${versement.reference} de ${this.formatCurrency(versement.montant)} ?`,
      header: "Confirmation",
      icon: "pi pi-exclamation-triangle",
      acceptLabel: "Supprimer",
      rejectLabel: "Annuler",
      accept: () => {
        this.paiementService.deleteVersement(paiementId, versement.id).subscribe({
          next: () => {
            this.messageService.add({
              severity: "success",
              summary: "Succ\xE8s",
              detail: "Versement supprim\xE9",
              life: 3e3
            });
            if (this.historiqueData) {
              this.openHistorique({ id: paiementId });
            }
            this.loadComptabilite();
          },
          error: () => {
            this.messageService.add({
              severity: "error",
              summary: "Erreur",
              detail: "Impossible de supprimer le versement",
              life: 3e3
            });
          }
        });
      }
    });
  }
  formatDate(date) {
    if (!date)
      return "";
    if (typeof date === "string")
      return date;
    const d = new Date(date);
    return d.toISOString().split("T")[0];
  }
  formatCurrency(value) {
    return new Intl.NumberFormat("fr-FR", {
      style: "decimal",
      minimumFractionDigits: 0
    }).format(value) + " GNF";
  }
  formatDateDisplay(dateStr) {
    if (!dateStr)
      return "";
    const date = new Date(dateStr);
    return date.toLocaleDateString("fr-FR");
  }
  static \u0275fac = function ComptabilitePackingTableau_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ComptabilitePackingTableau)(\u0275\u0275directiveInject(PackingPaiementService), \u0275\u0275directiveInject(MessageService), \u0275\u0275directiveInject(ConfirmationService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _ComptabilitePackingTableau, selectors: [["app-comptabilite-packing-tableau"]], viewQuery: function ComptabilitePackingTableau_Query(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275viewQuery(_c02, 5);
    }
    if (rf & 2) {
      let _t;
      \u0275\u0275queryRefresh(_t = \u0275\u0275loadQuery()) && (ctx.dt = _t.first);
    }
  }, features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 33, vars: 31, consts: [["start", ""], ["end", ""], ["dt", ""], ["caption", ""], ["header", ""], ["body", ""], ["summary", ""], ["content", ""], ["footer", ""], [1, "card"], ["styleClass", "mb-12"], ["dataKey", "prestataire_id", "currentPageReportTemplate", "Affichage {first} \xE0 {last} sur {totalRecords} prestataires", 3, "selectionChange", "value", "rows", "columns", "paginator", "globalFilterFields", "tableStyle", "selection", "rowHover", "showCurrentPageReport", "rowsPerPageOptions", "loading"], ["header", "Pr\xE9visualisation des packings", 3, "visibleChange", "visible", "modal"], ["header", "Payer", 3, "visibleChange", "visible", "modal"], ["header", "Historique des versements", 3, "visibleChange", "visible", "modal"], [1, "flex", "items-center", "gap-4"], [1, "block", "text-sm", "font-medium", "mb-1"], ["dateFormat", "dd/mm/yy", "placeholder", "D\xE9but", "inputStyleClass", "w-full", "styleClass", "w-48", 3, "ngModelChange", "ngModel", "showIcon"], ["dateFormat", "dd/mm/yy", "placeholder", "Fin", "inputStyleClass", "w-full", "styleClass", "w-48", 3, "ngModelChange", "ngModel", "showIcon"], [1, "flex", "items-end", "h-full", "pt-5"], ["label", "Filtrer", "icon", "pi pi-filter", "severity", "secondary", 3, "onClick"], ["label", "Export", "icon", "pi pi-download", "severity", "secondary", 3, "onClick"], [1, "flex", "items-center", "justify-between"], [1, "m-0"], ["styleClass", "pi pi-search"], ["pInputText", "", "type", "text", "placeholder", "Rechercher...", 3, "input"], [2, "width", "3rem"], ["pSortableColumn", "prestataire_nom", 2, "min-width", "14rem"], [1, "flex", "items-center", "gap-2"], ["field", "prestataire_nom"], [2, "min-width", "10rem"], ["pSortableColumn", "nb_packings_non_factures", 2, "min-width", "8rem"], ["field", "nb_packings_non_factures"], ["pSortableColumn", "montant_non_facture", 2, "min-width", "10rem"], ["field", "montant_non_facture"], ["pSortableColumn", "montant_facture", 2, "min-width", "10rem"], ["field", "montant_facture"], ["pSortableColumn", "montant_verse", 2, "min-width", "10rem"], ["field", "montant_verse"], ["pSortableColumn", "montant_restant_facture", 2, "min-width", "10rem"], ["field", "montant_restant_facture"], ["pSortableColumn", "montant_total_du", 2, "min-width", "12rem"], ["field", "montant_total_du"], [3, "value"], [1, "font-semibold"], ["severity", "warn", 3, "value", 4, "ngIf"], [4, "ngIf"], [1, "text-green-600", "font-semibold"], [1, "font-bold", "text-primary", "text-lg"], ["icon", "pi pi-wallet", "severity", "success", "pTooltip", "Payer", 1, "mr-2", 3, "click", "rounded", "outlined"], ["icon", "pi pi-eye", "severity", "info", "pTooltip", "Pr\xE9visualiser", 3, "rounded", "outlined", "click", 4, "ngIf"], ["severity", "warn", 3, "value"], ["icon", "pi pi-eye", "severity", "info", "pTooltip", "Pr\xE9visualiser", 3, "click", "rounded", "outlined"], ["class", "flex items-center justify-between flex-wrap gap-4", 4, "ngIf"], [1, "flex", "items-center", "justify-between", "flex-wrap", "gap-4"], [1, "flex", "items-center", "gap-6"], [1, "text-green-600"], [1, "text-xl", "font-bold", "text-primary"], ["class", "flex flex-col gap-4", 4, "ngIf"], ["class", "flex items-center justify-center p-8", 4, "ngIf"], [1, "flex", "flex-col", "gap-4"], [1, "flex", "items-center", "justify-between", "bg-surface-100", "dark:bg-surface-800", "rounded-lg", "p-4"], [1, "font-bold"], [3, "value", "rows", "paginator", "rowHover"], [1, "flex", "items-center", "justify-center", "p-8"], [1, "pi", "pi-spin", "pi-spinner", "text-4xl"], ["label", "Fermer", "icon", "pi pi-times", "text", "", 3, "click"], ["label", "Payer", "icon", "pi pi-wallet", "severity", "success", 3, "click", 4, "ngIf"], ["label", "Payer", "icon", "pi pi-wallet", "severity", "success", 3, "click"], [1, "font-bold", "text-lg"], [1, "font-bold", "text-xl", "text-primary"], ["class", "flex items-center justify-center p-6", 4, "ngIf"], ["class", "text-center p-4", 4, "ngIf"], ["class", "text-center p-4 text-surface-500", 4, "ngIf"], [1, "flex", "items-center", "justify-center", "p-6"], [1, "pi", "pi-spin", "pi-spinner", "text-3xl"], [1, "text-center", "p-4"], [1, "mb-4", "text-surface-500"], ["label", "Facturer", "icon", "pi pi-money-bill", "severity", "warn", 3, "click", "loading"], ["class", "flex items-center justify-between bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 mb-4", 4, "ngIf"], ["class", "mb-4", 4, "ngIf"], [1, "flex", "items-center", "justify-between", "mb-4"], [1, "text-sm", "text-surface-500"], [1, "font-bold", "text-orange-500"], [1, "block", "font-bold", "mb-2"], ["suffix", " GNF", "locale", "fr-FR", "inputStyleClass", "w-full", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "min", "max", "useGrouping"], ["class", "text-red-500", 4, "ngIf"], ["optionLabel", "label", "optionValue", "value", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "options"], ["pTextarea", "", "rows", "2", 1, "w-full", 3, "ngModelChange", "ngModel"], [1, "flex", "items-center", "justify-between", "bg-orange-50", "dark:bg-orange-900/20", "rounded-lg", "p-3", "mb-4"], [1, "text-sm"], ["label", "Facturer", "size", "small", "severity", "warn", 3, "click", "outlined", "loading"], [1, "mb-4"], ["optionLabel", "reference", "placeholder", "S\xE9lectionner", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "options"], [1, "text-red-500"], [1, "text-center", "p-4", "text-surface-500"], ["label", "Annuler", "icon", "pi pi-times", "text", "", 3, "click", "disabled"], ["label", "Payer", "icon", "pi pi-check", "severity", "success", 3, "click", "disabled", "loading"], [1, "bg-surface-100", "dark:bg-surface-800", "rounded-lg", "p-4"], [1, "flex", "items-center", "justify-between", "mb-2"], [3, "value", "severity"], [1, "grid", "grid-cols-12", "gap-4"], [1, "col-span-4"], [1, "font-bold", "text-green-600"], [3, "value", "rowHover", 4, "ngIf"], [3, "value", "rowHover"], [1, "text-green-600", "font-bold"], ["icon", "pi pi-trash", "severity", "danger", "pTooltip", "Supprimer", 3, "click", "rounded", "outlined", "text"]], template: function ComptabilitePackingTableau_Template(rf, ctx) {
    if (rf & 1) {
      const _r1 = \u0275\u0275getCurrentView();
      \u0275\u0275element(0, "p-toast");
      \u0275\u0275elementStart(1, "div", 9)(2, "p-toolbar", 10);
      \u0275\u0275template(3, ComptabilitePackingTableau_ng_template_3_Template, 11, 4, "ng-template", null, 0, \u0275\u0275templateRefExtractor)(5, ComptabilitePackingTableau_ng_template_5_Template, 1, 0, "ng-template", null, 1, \u0275\u0275templateRefExtractor);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(7, "p-table", 11, 2);
      \u0275\u0275twoWayListener("selectionChange", function ComptabilitePackingTableau_Template_p_table_selectionChange_7_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.selectedPrestataires, $event) || (ctx.selectedPrestataires = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275template(9, ComptabilitePackingTableau_ng_template_9_Template, 6, 0, "ng-template", null, 3, \u0275\u0275templateRefExtractor)(11, ComptabilitePackingTableau_ng_template_11_Template, 34, 0, "ng-template", null, 4, \u0275\u0275templateRefExtractor)(13, ComptabilitePackingTableau_ng_template_13_Template, 25, 15, "ng-template", null, 5, \u0275\u0275templateRefExtractor)(15, ComptabilitePackingTableau_ng_template_15_Template, 1, 1, "ng-template", null, 6, \u0275\u0275templateRefExtractor);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(17, "p-dialog", 12);
      \u0275\u0275twoWayListener("visibleChange", function ComptabilitePackingTableau_Template_p_dialog_visibleChange_17_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.previewDialog, $event) || (ctx.previewDialog = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275template(18, ComptabilitePackingTableau_ng_template_18_Template, 2, 2, "ng-template", null, 7, \u0275\u0275templateRefExtractor)(20, ComptabilitePackingTableau_ng_template_20_Template, 2, 1, "ng-template", null, 8, \u0275\u0275templateRefExtractor);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(22, "p-dialog", 13);
      \u0275\u0275twoWayListener("visibleChange", function ComptabilitePackingTableau_Template_p_dialog_visibleChange_22_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.versementDialog, $event) || (ctx.versementDialog = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275template(23, ComptabilitePackingTableau_ng_template_23_Template, 1, 1, "ng-template", null, 7, \u0275\u0275templateRefExtractor)(25, ComptabilitePackingTableau_ng_template_25_Template, 2, 3, "ng-template", null, 8, \u0275\u0275templateRefExtractor);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(27, "p-dialog", 14);
      \u0275\u0275twoWayListener("visibleChange", function ComptabilitePackingTableau_Template_p_dialog_visibleChange_27_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.historiqueDialog, $event) || (ctx.historiqueDialog = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275template(28, ComptabilitePackingTableau_ng_template_28_Template, 2, 2, "ng-template", null, 7, \u0275\u0275templateRefExtractor)(30, ComptabilitePackingTableau_ng_template_30_Template, 1, 0, "ng-template", null, 8, \u0275\u0275templateRefExtractor);
      \u0275\u0275elementEnd();
      \u0275\u0275element(32, "p-confirmdialog");
    }
    if (rf & 2) {
      \u0275\u0275advance(7);
      \u0275\u0275property("value", ctx.prestataires())("rows", 10)("columns", ctx.cols)("paginator", true)("globalFilterFields", ctx.filterFields)("tableStyle", \u0275\u0275pureFunction0(25, _c12));
      \u0275\u0275twoWayProperty("selection", ctx.selectedPrestataires);
      \u0275\u0275property("rowHover", true)("showCurrentPageReport", true)("rowsPerPageOptions", \u0275\u0275pureFunction0(26, _c22))("loading", ctx.loading);
      \u0275\u0275advance(10);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(27, _c32));
      \u0275\u0275twoWayProperty("visible", ctx.previewDialog);
      \u0275\u0275property("modal", true);
      \u0275\u0275advance(5);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(28, _c42));
      \u0275\u0275twoWayProperty("visible", ctx.versementDialog);
      \u0275\u0275property("modal", true);
      \u0275\u0275advance(5);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(29, _c5));
      \u0275\u0275twoWayProperty("visible", ctx.historiqueDialog);
      \u0275\u0275property("modal", true);
      \u0275\u0275advance(5);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(30, _c6));
    }
  }, dependencies: [
    CommonModule,
    NgIf,
    TableModule,
    Table,
    SortableColumn,
    SortIcon,
    TableCheckbox,
    TableHeaderCheckbox,
    FormsModule,
    DefaultValueAccessor,
    NgControlStatus,
    NgModel,
    ButtonModule,
    Button,
    RippleModule,
    ToastModule,
    Toast,
    ToolbarModule,
    Toolbar,
    InputTextModule,
    InputText,
    SelectModule,
    Select,
    DialogModule,
    Dialog,
    TagModule,
    Tag,
    InputIconModule,
    InputIcon,
    IconFieldModule,
    IconField,
    ConfirmDialogModule,
    ConfirmDialog,
    DatePickerModule,
    DatePicker,
    TextareaModule,
    Textarea,
    TooltipModule,
    Tooltip,
    InputNumberModule,
    InputNumber
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ComptabilitePackingTableau, [{
    type: Component,
    args: [{ selector: "app-comptabilite-packing-tableau", standalone: true, imports: [
      CommonModule,
      TableModule,
      FormsModule,
      ButtonModule,
      RippleModule,
      ToastModule,
      ToolbarModule,
      InputTextModule,
      SelectModule,
      DialogModule,
      TagModule,
      InputIconModule,
      IconFieldModule,
      ConfirmDialogModule,
      DatePickerModule,
      TextareaModule,
      TooltipModule,
      InputNumberModule
    ], providers: [MessageService, ConfirmationService], template: `<p-toast />\r
\r
<div class="card">\r
    <p-toolbar styleClass="mb-12">\r
        <ng-template #start>\r
            <div class="flex items-center gap-4">\r
                <div>\r
                    <label class="block text-sm font-medium mb-1">P\xE9riode d\xE9but</label>\r
                    <p-datepicker\r
                        [(ngModel)]="filtrePeriodeDebut"\r
                        dateFormat="dd/mm/yy"\r
                        [showIcon]="true"\r
                        placeholder="D\xE9but"\r
                        inputStyleClass="w-full"\r
                        styleClass="w-48"\r
                    />\r
                </div>\r
                <div>\r
                    <label class="block text-sm font-medium mb-1">P\xE9riode fin</label>\r
                    <p-datepicker\r
                        [(ngModel)]="filtrePeriodeFin"\r
                        dateFormat="dd/mm/yy"\r
                        [showIcon]="true"\r
                        placeholder="Fin"\r
                        inputStyleClass="w-full"\r
                        styleClass="w-48"\r
                    />\r
                </div>\r
                <div class="flex items-end h-full pt-5">\r
                    <p-button label="Filtrer" icon="pi pi-filter" severity="secondary" (onClick)="loadComptabilite()" />\r
                </div>\r
            </div>\r
        </ng-template>\r
\r
        <ng-template #end>\r
            <p-button label="Export" icon="pi pi-download" severity="secondary" (onClick)="exportCSV()" />\r
        </ng-template>\r
    </p-toolbar>\r
\r
    <p-table\r
        #dt\r
        [value]="prestataires()"\r
        [rows]="10"\r
        [columns]="cols"\r
        [paginator]="true"\r
        [globalFilterFields]="filterFields"\r
        [tableStyle]="{ 'min-width': '90rem' }"\r
        [(selection)]="selectedPrestataires"\r
        [rowHover]="true"\r
        dataKey="prestataire_id"\r
        currentPageReportTemplate="Affichage {first} \xE0 {last} sur {totalRecords} prestataires"\r
        [showCurrentPageReport]="true"\r
        [rowsPerPageOptions]="[10, 20, 30]"\r
        [loading]="loading"\r
    >\r
        <ng-template #caption>\r
            <div class="flex items-center justify-between">\r
                <h5 class="m-0">Comptabilit\xE9 Packings - R\xE9capitulatif par prestataire</h5>\r
                <p-iconfield>\r
                    <p-inputicon styleClass="pi pi-search" />\r
                    <input pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Rechercher..." />\r
                </p-iconfield>\r
            </div>\r
        </ng-template>\r
        <ng-template #header>\r
            <tr>\r
                <th style="width: 3rem">\r
                    <p-tableHeaderCheckbox />\r
                </th>\r
                <th pSortableColumn="prestataire_nom" style="min-width: 14rem">\r
                    <span class="flex items-center gap-2">Prestataire\r
                    <p-sortIcon field="prestataire_nom" /></span>\r
                </th>\r
                <th style="min-width: 10rem">T\xE9l\xE9phone</th>\r
                <th pSortableColumn="nb_packings_non_factures" style="min-width: 8rem">\r
                    <span class="flex items-center gap-2">Non factur\xE9s\r
                    <p-sortIcon field="nb_packings_non_factures" /></span>\r
                </th>\r
                <th pSortableColumn="montant_non_facture" style="min-width: 10rem">\r
                    <span class="flex items-center gap-2">Mnt non factur\xE9\r
                    <p-sortIcon field="montant_non_facture" /></span>\r
                </th>\r
                <th pSortableColumn="montant_facture" style="min-width: 10rem">\r
                    <span class="flex items-center gap-2">Factur\xE9\r
                    <p-sortIcon field="montant_facture" /></span>\r
                </th>\r
                <th pSortableColumn="montant_verse" style="min-width: 10rem">\r
                    <span class="flex items-center gap-2">Vers\xE9\r
                    <p-sortIcon field="montant_verse" /></span>\r
                </th>\r
                <th pSortableColumn="montant_restant_facture" style="min-width: 10rem">\r
                    <span class="flex items-center gap-2">Reste facture\r
                    <p-sortIcon field="montant_restant_facture" /></span>\r
                </th>\r
                <th pSortableColumn="montant_total_du" style="min-width: 12rem">\r
                    <span class="flex items-center gap-2">Total d\xFB\r
                    <p-sortIcon field="montant_total_du" /></span>\r
                </th>\r
                <th style="min-width: 10rem"></th>\r
            </tr>\r
        </ng-template>\r
        <ng-template #body let-item>\r
            <tr>\r
                <td style="width: 3rem">\r
                    <p-tableCheckbox [value]="item" />\r
                </td>\r
                <td>\r
                    <span class="font-semibold">{{ item.prestataire_nom }}</span>\r
                </td>\r
                <td>{{ item.prestataire_phone }}</td>\r
                <td>\r
                    <p-tag [value]="item.nb_packings_non_factures + ''" severity="warn" *ngIf="item.nb_packings_non_factures > 0" />\r
                    <span *ngIf="item.nb_packings_non_factures === 0">0</span>\r
                </td>\r
                <td>{{ formatCurrency(item.montant_non_facture) }}</td>\r
                <td>{{ formatCurrency(item.montant_facture) }}</td>\r
                <td class="text-green-600 font-semibold">{{ formatCurrency(item.montant_verse) }}</td>\r
                <td>\r
                    <span [class]="item.montant_restant_facture > 0 ? 'text-orange-500 font-semibold' : ''">\r
                        {{ formatCurrency(item.montant_restant_facture) }}\r
                    </span>\r
                </td>\r
                <td class="font-bold text-primary text-lg">{{ formatCurrency(item.montant_total_du) }}</td>\r
                <td>\r
                    <p-button icon="pi pi-wallet" severity="success" class="mr-2" [rounded]="true" [outlined]="true" pTooltip="Payer" (click)="openVersement(item)" />\r
                    <p-button icon="pi pi-eye" severity="info" [rounded]="true" [outlined]="true" pTooltip="Pr\xE9visualiser" (click)="openPreview(item)" *ngIf="item.nb_packings_non_factures > 0" />\r
                </td>\r
            </tr>\r
        </ng-template>\r
        <ng-template #summary>\r
            <div class="flex items-center justify-between flex-wrap gap-4" *ngIf="comptaSummary">\r
                <div class="flex items-center gap-6">\r
                    <span><strong>{{ comptaSummary.nb_prestataires }}</strong> prestataire(s)</span>\r
                    <span>Non factur\xE9 : <strong>{{ formatCurrency(comptaSummary.total_non_facture) }}</strong></span>\r
                    <span>Vers\xE9 : <strong class="text-green-600">{{ formatCurrency(comptaSummary.total_verse) }}</strong></span>\r
                </div>\r
                <div class="text-xl font-bold text-primary">\r
                    Total d\xFB : {{ formatCurrency(comptaSummary.montant_global_du) }}\r
                </div>\r
            </div>\r
        </ng-template>\r
    </p-table>\r
</div>\r
\r
<!-- Dialog Pr\xE9visualisation -->\r
<p-dialog [(visible)]="previewDialog" [style]="{ width: '850px' }" header="Pr\xE9visualisation des packings" [modal]="true">\r
    <ng-template #content>\r
        <div class="flex flex-col gap-4" *ngIf="previewData">\r
            <div class="flex items-center justify-between bg-surface-100 dark:bg-surface-800 rounded-lg p-4">\r
                <div>\r
                    <span class="font-bold">{{ previewData.nb_packings }}</span> packing(s) -\r
                    <span class="font-bold">{{ previewData.total_rouleaux }}</span> rouleaux\r
                </div>\r
                <div class="text-xl font-bold text-primary">{{ formatCurrency(previewData.montant_total) }}</div>\r
            </div>\r
\r
            <p-table [value]="previewData.packings" [rows]="10" [paginator]="previewData.packings.length > 10" [rowHover]="true">\r
                <ng-template #header>\r
                    <tr>\r
                        <th>R\xE9f\xE9rence</th>\r
                        <th>D\xE9but</th>\r
                        <th>Fin</th>\r
                        <th>Rouleaux</th>\r
                        <th>Montant</th>\r
                    </tr>\r
                </ng-template>\r
                <ng-template #body let-packing>\r
                    <tr>\r
                        <td>{{ packing.reference }}</td>\r
                        <td>{{ formatDateDisplay(packing.date_debut) }}</td>\r
                        <td>{{ formatDateDisplay(packing.date_fin) }}</td>\r
                        <td>{{ packing.nb_rouleaux }}</td>\r
                        <td class="font-bold">{{ formatCurrency(packing.montant) }}</td>\r
                    </tr>\r
                </ng-template>\r
            </p-table>\r
        </div>\r
        <div *ngIf="previewLoading" class="flex items-center justify-center p-8">\r
            <i class="pi pi-spin pi-spinner text-4xl"></i>\r
        </div>\r
    </ng-template>\r
\r
    <ng-template #footer>\r
        <p-button label="Fermer" icon="pi pi-times" text (click)="previewDialog = false" />\r
        <p-button label="Payer" icon="pi pi-wallet" severity="success" (click)="previewDialog = false; openVersement(selectedItem!)" *ngIf="selectedItem" />\r
    </ng-template>\r
</p-dialog>\r
\r
<!-- Dialog Paiement -->\r
<p-dialog [(visible)]="versementDialog" [style]="{ width: '550px' }" header="Payer" [modal]="true">\r
    <ng-template #content>\r
        <div class="flex flex-col gap-4" *ngIf="selectedItem">\r
            <!-- Nom + Total d\xFB -->\r
            <div class="flex items-center justify-between">\r
                <span class="font-bold text-lg">{{ selectedItem.prestataire_nom }}</span>\r
                <span class="font-bold text-xl text-primary">{{ formatCurrency(selectedItem.montant_total_du) }}</span>\r
            </div>\r
\r
            <!-- Loading -->\r
            <div *ngIf="versementLoading" class="flex items-center justify-center p-6">\r
                <i class="pi pi-spin pi-spinner text-3xl"></i>\r
            </div>\r
\r
            <!-- Facturer d'abord si pas de paiements -->\r
            <div *ngIf="!versementLoading && paiementsPrestataire.length === 0 && selectedItem.nb_packings_non_factures > 0" class="text-center p-4">\r
                <p class="mb-4 text-surface-500">{{ selectedItem.nb_packings_non_factures }} packing(s) \xE0 facturer avant de payer</p>\r
                <p-button\r
                    label="Facturer"\r
                    icon="pi pi-money-bill"\r
                    severity="warn"\r
                    (click)="facturerNonFactures()"\r
                    [loading]="facturerLoading"\r
                />\r
            </div>\r
\r
            <!-- Formulaire versement -->\r
            <div *ngIf="!versementLoading && selectedPaiement">\r
                <!-- Bandeau facturation si non-factur\xE9s restants -->\r
                <div *ngIf="selectedItem.nb_packings_non_factures > 0" class="flex items-center justify-between bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 mb-4">\r
                    <span class="text-sm">{{ selectedItem.nb_packings_non_factures }} packing(s) non factur\xE9(s)</span>\r
                    <p-button label="Facturer" size="small" severity="warn" [outlined]="true" (click)="facturerNonFactures()" [loading]="facturerLoading" />\r
                </div>\r
\r
                <!-- S\xE9lection facture si plusieurs -->\r
                <div *ngIf="paiementsPrestataire.length > 1" class="mb-4">\r
                    <label class="block font-bold mb-2">Facture</label>\r
                    <p-select\r
                        [(ngModel)]="selectedPaiement"\r
                        [options]="paiementsPrestataire"\r
                        optionLabel="reference"\r
                        placeholder="S\xE9lectionner"\r
                        styleClass="w-full"\r
                    />\r
                </div>\r
\r
                <div class="flex items-center justify-between mb-4">\r
                    <span class="text-sm text-surface-500">Restant sur {{ selectedPaiement.reference }}</span>\r
                    <span class="font-bold text-orange-500">{{ formatCurrency(selectedPaiement.montant_restant) }}</span>\r
                </div>\r
\r
                <div class="flex flex-col gap-4">\r
                    <div>\r
                        <label class="block font-bold mb-2">Montant \xE0 verser</label>\r
                        <p-inputnumber\r
                            [(ngModel)]="versementData.montant"\r
                            [min]="1"\r
                            [max]="selectedPaiement.montant_restant"\r
                            suffix=" GNF"\r
                            [useGrouping]="true"\r
                            locale="fr-FR"\r
                            inputStyleClass="w-full"\r
                            styleClass="w-full"\r
                        />\r
                        <small class="text-red-500" *ngIf="versementSubmitted && !versementData.montant">Requis.</small>\r
                    </div>\r
\r
                    <div>\r
                        <label class="block font-bold mb-2">Mode de paiement</label>\r
                        <p-select\r
                            [(ngModel)]="versementData.mode_paiement"\r
                            [options]="modesPaiement"\r
                            optionLabel="label"\r
                            optionValue="value"\r
                            styleClass="w-full"\r
                        />\r
                    </div>\r
\r
                    <div>\r
                        <label class="block font-bold mb-2">Notes</label>\r
                        <textarea pTextarea [(ngModel)]="versementData.notes" rows="2" class="w-full"></textarea>\r
                    </div>\r
                </div>\r
            </div>\r
\r
            <!-- Aucune facture et aucun non-factur\xE9 -->\r
            <div *ngIf="!versementLoading && paiementsPrestataire.length === 0 && selectedItem.nb_packings_non_factures === 0" class="text-center p-4 text-surface-500">\r
                Aucun paiement en cours.\r
            </div>\r
        </div>\r
    </ng-template>\r
\r
    <ng-template #footer>\r
        <p-button label="Annuler" icon="pi pi-times" text (click)="hideVersementDialog()" [disabled]="versementSaving" />\r
        <p-button\r
            label="Payer"\r
            icon="pi pi-check"\r
            severity="success"\r
            (click)="saveVersement()"\r
            [disabled]="versementSaving || !selectedPaiement"\r
            [loading]="versementSaving"\r
        />\r
    </ng-template>\r
</p-dialog>\r
\r
<!-- Dialog Historique Versements -->\r
<p-dialog [(visible)]="historiqueDialog" [style]="{ width: '750px' }" header="Historique des versements" [modal]="true">\r
    <ng-template #content>\r
        <div *ngIf="historiqueLoading" class="flex items-center justify-center p-8">\r
            <i class="pi pi-spin pi-spinner text-4xl"></i>\r
        </div>\r
\r
        <div *ngIf="historiqueData" class="flex flex-col gap-4">\r
            <!-- R\xE9sum\xE9 paiement -->\r
            <div class="bg-surface-100 dark:bg-surface-800 rounded-lg p-4">\r
                <div class="flex items-center justify-between mb-2">\r
                    <span class="font-bold text-lg">{{ historiqueData.reference }}</span>\r
                    <p-tag [value]="historiqueData.is_solde ? 'Sold\xE9' : 'En cours'" [severity]="historiqueData.is_solde ? 'success' : 'warn'" />\r
                </div>\r
                <div class="grid grid-cols-12 gap-4">\r
                    <div class="col-span-4">\r
                        <span class="text-sm text-surface-500">Montant total</span>\r
                        <div class="font-bold">{{ formatCurrency(historiqueData.montant_total) }}</div>\r
                    </div>\r
                    <div class="col-span-4">\r
                        <span class="text-sm text-surface-500">Vers\xE9</span>\r
                        <div class="font-bold text-green-600">{{ formatCurrency(historiqueData.montant_verse) }}</div>\r
                    </div>\r
                    <div class="col-span-4">\r
                        <span class="text-sm text-surface-500">Restant</span>\r
                        <div class="font-bold text-orange-500">{{ formatCurrency(historiqueData.montant_restant) }}</div>\r
                    </div>\r
                </div>\r
            </div>\r
\r
            <!-- Liste versements -->\r
            <p-table [value]="historiqueData.versements" [rowHover]="true" *ngIf="historiqueData.versements.length > 0">\r
                <ng-template #header>\r
                    <tr>\r
                        <th>R\xE9f\xE9rence</th>\r
                        <th>Date</th>\r
                        <th>Montant</th>\r
                        <th>Mode</th>\r
                        <th>Notes</th>\r
                        <th></th>\r
                    </tr>\r
                </ng-template>\r
                <ng-template #body let-versement>\r
                    <tr>\r
                        <td class="font-semibold">{{ versement.reference }}</td>\r
                        <td>{{ formatDateDisplay(versement.date_versement) }}</td>\r
                        <td class="text-green-600 font-bold">{{ formatCurrency(versement.montant) }}</td>\r
                        <td>{{ versement.mode_paiement_label }}</td>\r
                        <td>{{ versement.notes || '-' }}</td>\r
                        <td>\r
                            <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true" [text]="true" pTooltip="Supprimer" (click)="confirmDeleteVersement(historiqueData!.paiement_id, versement)" />\r
                        </td>\r
                    </tr>\r
                </ng-template>\r
            </p-table>\r
\r
            <div *ngIf="historiqueData.versements.length === 0" class="text-center p-4 text-surface-500">\r
                Aucun versement enregistr\xE9.\r
            </div>\r
        </div>\r
    </ng-template>\r
\r
    <ng-template #footer>\r
        <p-button label="Fermer" icon="pi pi-times" text (click)="historiqueDialog = false" />\r
    </ng-template>\r
</p-dialog>\r
\r
<p-confirmdialog [style]="{ width: '450px' }" />\r
` }]
  }], () => [{ type: PackingPaiementService }, { type: MessageService }, { type: ConfirmationService }], { dt: [{
    type: ViewChild,
    args: ["dt"]
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(ComptabilitePackingTableau, { className: "ComptabilitePackingTableau", filePath: "src/app/pages/comptabilite/components/comptabilite-packing-tableau/comptabilite-packing-tableau.ts", lineNumber: 79 });
})();

// src/app/pages/comptabilite/comptabilite-packing-liste/comptabilite-packing-liste.ts
var ComptabilitePackingListe = class _ComptabilitePackingListe {
  ngOnInit() {
  }
  static \u0275fac = function ComptabilitePackingListe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ComptabilitePackingListe)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _ComptabilitePackingListe, selectors: [["app-comptabilite-packing-liste"]], features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService, ProductService])], decls: 3, vars: 0, consts: [[1, "grid", "grid-cols-12", "gap-8", "mb-8"]], template: function ComptabilitePackingListe_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0);
      \u0275\u0275element(1, "app-stats-comptabilite-packing-widget");
      \u0275\u0275elementEnd();
      \u0275\u0275element(2, "app-comptabilite-packing-tableau");
    }
  }, dependencies: [
    CommonModule,
    StatsComptabilitePackingWidget,
    ComptabilitePackingTableau
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ComptabilitePackingListe, [{
    type: Component,
    args: [{ selector: "app-comptabilite-packing-liste", standalone: true, imports: [
      CommonModule,
      StatsComptabilitePackingWidget,
      ComptabilitePackingTableau
    ], providers: [MessageService, ConfirmationService, ProductService], template: '\r\n \r\n<div class="grid grid-cols-12 gap-8 mb-8">\r\n  <app-stats-comptabilite-packing-widget></app-stats-comptabilite-packing-widget>\r\n</div>\r\n\r\n <app-comptabilite-packing-tableau></app-comptabilite-packing-tableau>\r\n ' }]
  }], null, null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(ComptabilitePackingListe, { className: "ComptabilitePackingListe", filePath: "src/app/pages/comptabilite/comptabilite-packing-liste/comptabilite-packing-liste.ts", lineNumber: 78 });
})();

// src/app/pages/comptabilite/comptabilite.routes.ts
var comptabilite_routes_default = [
  { path: "", component: ComptabilitePackingListe },
  { path: "comptabilite-packing", component: ComptabilitePackingListe },
  { path: "packing-paiement", component: PackingPaiement },
  { path: "**", redirectTo: "/notfound" }
];
export {
  comptabilite_routes_default as default
};
//# sourceMappingURL=chunk-DKUPH3C5.js.map
