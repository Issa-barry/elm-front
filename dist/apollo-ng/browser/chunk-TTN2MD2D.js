import{b as vt}from"./chunk-QTPK4WUM.js";import{a as ht}from"./chunk-UTPN3HX3.js";import{b as ge}from"./chunk-PWRH4TVB.js";import{b as dt}from"./chunk-OAYELUTM.js";import{a as Q}from"./chunk-SUWPPEDH.js";import{a as bt,b as Ve}from"./chunk-IMZITBI5.js";import{b as Ae}from"./chunk-6MAGWI7U.js";import{a as We}from"./chunk-2L636W5W.js";import{a as _t,b as gt}from"./chunk-W3Q6QMRU.js";import{a as Le,b as ze}from"./chunk-LOBJQVB7.js";import{a as Re,b as Be}from"./chunk-3HDW43E7.js";import{a as Oe,d as Ee,e as De,k as Ie}from"./chunk-KYBPPGZP.js";import"./chunk-KKEZTC3T.js";import{a as ft,b as Se}from"./chunk-QAU7W4US.js";import"./chunk-GO7AEQHW.js";import"./chunk-44MNQRCX.js";import{b as we,c as Y}from"./chunk-FHJ3HI6Y.js";import"./chunk-MGFZT6L3.js";import{b as Ne}from"./chunk-2M2YESUI.js";import"./chunk-Q737E3VB.js";import"./chunk-GVSJPEUD.js";import"./chunk-CQGFVLY5.js";import"./chunk-ZOHIMUT6.js";import"./chunk-TB7JIXSI.js";import{a as Te,b as Fe}from"./chunk-D4ZZGRXJ.js";import"./chunk-USWDVUUM.js";import"./chunk-KHGHC55C.js";import{a as ye}from"./chunk-MDPPMPGK.js";import{a as pt,b as mt}from"./chunk-3CPQXP4V.js";import"./chunk-MYGUYXAJ.js";import{b as ut}from"./chunk-UWJ6EXCC.js";import"./chunk-NIW5LLYW.js";import{b as nt,d as q}from"./chunk-C4SKCR7Q.js";import"./chunk-TZVXXQOJ.js";import{a as _e,d as at}from"./chunk-PPJOJKS5.js";import{a as be,b as lt,c as R,d as he,e as B}from"./chunk-P557RNKH.js";import"./chunk-PALTTDOF.js";import{c as Me,d as ke}from"./chunk-WF73AWMM.js";import"./chunk-SXW2RLBH.js";import"./chunk-LSUA6MZX.js";import"./chunk-M2LTT3HJ.js";import"./chunk-JYP5AZVX.js";import"./chunk-T7HI4VPR.js";import{a as st,b as ve,c as ct,d as Ce}from"./chunk-II7RVJNR.js";import{a as ot,b as fe}from"./chunk-PW7MMR7K.js";import{b as rt,e as G,h as H,p as U}from"./chunk-3LUOICNH.js";import{a as xe,b as Pe}from"./chunk-3G6KBQ3S.js";import"./chunk-D7FY7VLK.js";import"./chunk-BODZH67C.js";import"./chunk-7UZYWCAJ.js";import{i as $,j as K}from"./chunk-IK72ORTM.js";import"./chunk-Z2XDSDL7.js";import{la as j,pa as F}from"./chunk-344GK45C.js";import{i as de,j as ue,k as W,v as T}from"./chunk-6PXXCRY5.js";import"./chunk-4O3FVBGX.js";import{$ as _,$b as d,Ab as u,Bb as w,Cb as O,Db as V,Hb as v,La as oe,Lb as f,Mb as p,Na as l,Qb as le,R as Xe,Rb as se,Sa as J,Sb as ce,V as et,Vb as z,Wb as pe,Xb as me,Ya as y,Yb as L,_b as o,aa as g,ac as E,bb as I,bc as it,dc as M,ea as ne,ec as k,fc as S,hb as h,hc as A,ia as re,ic as D,lc as Ke,ma as tt,mc as Qe,sc as C,uc as x,wc as P,xb as c,yb as i,zb as a}from"./chunk-E5DLUAUS.js";import"./chunk-GAL4ENT6.js";var X={especes:"Esp\xE8ces",virement:"Virement bancaire",cheque:"Ch\xE8que",mobile_money:"Mobile Money"},wt={impayee:"Impay\xE9e",partielle:"Partiellement pay\xE9e",payee:"Pay\xE9e",annulee:"Annul\xE9e"},Ct={impayee:"danger",partielle:"warn",payee:"success",annulee:"secondary"};var qe=class{id;reference;prestataire_id;date;montant_total;nb_packings;date_paiement;mode_paiement;statut;notes;created_by;validated_by;created_at;updated_at;deleted_at;statut_label;prestataire_nom;montant_verse;montant_restant;mode_paiement_label;total_rouleaux;prix_par_rouleau;prestataire;packings;versements;creator;constructor(t={}){this.id=t.id??0,this.reference=t.reference??"",this.prestataire_id=t.prestataire_id??0,this.date=t.date??"",this.montant_total=t.montant_total??0,this.nb_packings=t.nb_packings??0,this.date_paiement=t.date_paiement??null,this.mode_paiement=t.mode_paiement??null,this.statut=t.statut??"impayee",this.notes=t.notes??null,this.created_by=t.created_by??null,this.validated_by=t.validated_by??null,this.created_at=t.created_at??"",this.updated_at=t.updated_at??"",this.deleted_at=t.deleted_at??null,this.statut_label=t.statut_label??wt[this.statut]??"",this.prestataire_nom=t.prestataire_nom??null,this.montant_verse=t.montant_verse??0,this.montant_restant=t.montant_restant??0,this.mode_paiement_label=t.mode_paiement_label??"",this.total_rouleaux=t.total_rouleaux??0,this.prix_par_rouleau=t.prix_par_rouleau??0,this.prestataire=t.prestataire,this.packings=t.packings,this.versements=t.versements,this.creator=t.creator}},Ye=class{prestataire_id;prestataire_nom;prestataire_phone;prestataire_type;nb_packings_non_factures;montant_non_facture;nb_factures_en_cours;montant_facture;montant_verse;montant_restant_facture;montant_total_du;derniere_date;statut;constructor(t={}){this.prestataire_id=t.prestataire_id??0,this.prestataire_nom=t.prestataire_nom??"",this.prestataire_phone=t.prestataire_phone??"",this.prestataire_type=t.prestataire_type??"",this.nb_packings_non_factures=t.nb_packings_non_factures??0,this.montant_non_facture=t.montant_non_facture??0,this.nb_factures_en_cours=t.nb_factures_en_cours??0,this.montant_facture=t.montant_facture??0,this.montant_verse=t.montant_verse??0,this.montant_restant_facture=t.montant_restant_facture??0,this.montant_total_du=t.montant_total_du??0,this.derniere_date=t.derniere_date??null,this.statut=this.montant_total_du===0?"solde":this.montant_verse>0?"partiel":"impaye"}},Z=class{date_debut;date_fin;nb_prestataires;total_non_facture;total_facture;total_verse;total_restant_facture;montant_global_du;montant_total;prestataires;constructor(t={}){this.date_debut=t.date_debut??null,this.date_fin=t.date_fin??null,this.nb_prestataires=t.nb_prestataires??0,this.total_non_facture=t.total_non_facture??0,this.total_facture=t.total_facture??0,this.total_verse=t.total_verse??0,this.total_restant_facture=t.total_restant_facture??0,this.montant_global_du=t.montant_global_du??0,this.montant_total=this.total_facture+this.total_non_facture,this.prestataires=(t.prestataires??[]).map(e=>new Ye(e))}},je=class{prestataire_id;date_debut;date_fin;nb_packings;montant_total;total_rouleaux;packings;constructor(t={}){this.prestataire_id=t.prestataire_id??0,this.date_debut=t.date_debut??"",this.date_fin=t.date_fin??"",this.nb_packings=t.nb_packings??0,this.montant_total=t.montant_total??0,this.total_rouleaux=t.total_rouleaux??0,this.packings=t.packings??[]}};var N=class r{constructor(t){this.http=t}apiUrl=`${pt.apiUrl}/facture-packings`;getFactures(t){let e=new _e;return t&&(t.prestataire_id&&(e=e.set("prestataire_id",t.prestataire_id.toString())),t.date_debut&&(e=e.set("date_debut",t.date_debut)),t.date_fin&&(e=e.set("date_fin",t.date_fin)),t.statut&&(e=e.set("statut",t.statut)),t.soldee!==void 0&&(e=e.set("soldee",t.soldee.toString())),t.search&&(e=e.set("search",t.search)),t.sort_by&&(e=e.set("sort_by",t.sort_by)),t.sort_order&&(e=e.set("sort_order",t.sort_order)),t.per_page&&(e=e.set("per_page",t.per_page.toString()))),this.http.get(this.apiUrl,{params:e})}getFacture(t){return this.http.get(`${this.apiUrl}/${t}`)}getPreview(t,e,n){let s=new _e().set("prestataire_id",t.toString()).set("date_debut",e).set("date_fin",n);return this.http.get(`${this.apiUrl}/preview`,{params:s})}getComptabilite(t){let e=new _e;return t&&(t.date_debut&&(e=e.set("date_debut",t.date_debut)),t.date_fin&&(e=e.set("date_fin",t.date_fin)),t.prestataire_id&&(e=e.set("prestataire_id",t.prestataire_id.toString()))),this.http.get(`${this.apiUrl}/comptabilite`,{params:e})}createFacture(t){return this.http.post(this.apiUrl,t)}deleteFacture(t){return this.http.delete(`${this.apiUrl}/${t}`)}getVersements(t){return this.http.get(`${this.apiUrl}/${t}/versements`)}createVersement(t,e){return this.http.post(`${this.apiUrl}/${t}/versements`,e)}deleteVersement(t,e){return this.http.delete(`${this.apiUrl}/${t}/versements/${e}`)}static \u0275fac=function(e){return new(e||r)(et(at))};static \u0275prov=Xe({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ge=class r{constructor(t){this.paiementService=t}summary=null;ngOnInit(){this.loadStats()}loadStats(t){this.paiementService.getComptabilite(t).subscribe({next:e=>{this.summary=new Z(e.data)}})}formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t)+" GNF"}static \u0275fac=function(e){return new(e||r)(y(N))};static \u0275cmp=I({type:r,selectors:[["app-stats-comptabilite-packing-widget"]],hostVars:2,hostBindings:function(e,n){e&2&&pe("display","contents")},decls:40,vars:13,consts:[[1,"col-span-12"],[1,"stats-bar"],[1,"stats-bar__item"],[1,"stats-bar__icon"],[1,"pi","pi-wallet"],[1,"stats-bar__value"],[1,"stats-bar__label"],[1,"stats-bar__divider"],[1,"pi","pi-check-circle"],[1,"pi","pi-arrow-right"],[1,"pi","pi-users"]],template:function(e,n){e&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),V(4,"i",4),O(),w(5,"div")(6,"div",5),o(7),C(8,"money"),O(),w(9,"div",6),o(10,"Montant total"),O()()(),V(11,"div",7),w(12,"div",2)(13,"div",3),V(14,"i",8),O(),w(15,"div")(16,"div",5),o(17),C(18,"money"),O(),w(19,"div",6),o(20,"Total pay\xE9"),O()()(),V(21,"div",7),w(22,"div",2)(23,"div",3),V(24,"i",9),O(),w(25,"div")(26,"div",5),o(27),C(28,"money"),O(),w(29,"div",6),o(30,"Reste \xE0 payer"),O()()(),V(31,"div",7),w(32,"div",2)(33,"div",3),V(34,"i",10),O(),w(35,"div")(36,"div",5),o(37),O(),w(38,"div",6),o(39,"Prestataires"),O()()()()()),e&2&&(l(7),d(n.summary?x(8,4,n.summary.montant_total,"GNF"):"--"),l(10),d(n.summary?x(18,7,n.summary.total_verse,"GNF"):"--"),l(10),d(n.summary?x(28,10,n.summary.montant_global_du,"GNF"):"--"),l(10),d(n.summary?n.summary.nb_prestataires:"--"))},dependencies:[T,Q],styles:[".stats-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--p-surface-0);border:1px solid var(--p-surface-200);border-radius:14px;padding:1.25rem 2rem;gap:0;box-shadow:0 1px 3px #0000000a}.stats-bar__item[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:1rem;padding:.5rem 1.5rem}.stats-bar__divider[_ngcontent-%COMP%]{width:1px;height:40px;background:var(--p-surface-200);flex-shrink:0}.stats-bar__icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:1.1rem;background:var(--p-surface-100);color:var(--p-surface-600)}.stats-bar__value[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:var(--p-surface-900);letter-spacing:-.02em;line-height:1.2}.stats-bar__label[_ngcontent-%COMP%]{font-size:.78rem;color:var(--p-surface-400);margin-top:2px}@media (max-width: 768px){.stats-bar[_ngcontent-%COMP%]{flex-direction:column;gap:.35rem;padding:.75rem;border-radius:16px;box-shadow:none}.stats-bar__item[_ngcontent-%COMP%]{padding:.65rem .5rem;width:100%;gap:.75rem}.stats-bar__divider[_ngcontent-%COMP%]{width:100%;height:1px}.stats-bar__icon[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:10px;font-size:1rem}.stats-bar__value[_ngcontent-%COMP%]{font-size:1.2rem}}.app-dark[_nghost-%COMP%]   .stats-bar[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar[_ngcontent-%COMP%]{background:var(--p-surface-800);border-color:var(--p-surface-700);box-shadow:0 1px 3px #00000026}.app-dark[_nghost-%COMP%]   .stats-bar__divider[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar__divider[_ngcontent-%COMP%]{background:var(--p-surface-600)}.app-dark[_nghost-%COMP%]   .stats-bar__icon[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar__icon[_ngcontent-%COMP%]{background:var(--p-surface-700);color:var(--p-surface-300)}.app-dark[_nghost-%COMP%]   .stats-bar__value[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar__value[_ngcontent-%COMP%]{color:var(--p-surface-0)}.app-dark[_nghost-%COMP%]   .stats-bar__label[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar__label[_ngcontent-%COMP%]{color:var(--p-surface-400)}"]})};var Rt=["dt"],Bt=()=>[10,20,30],Nt=()=>({width:"800px"}),Lt=()=>({width:"450px"}),zt=(r,t,e)=>({"compta-mobile-status-badge--danger":r,"compta-mobile-status-badge--warn":t,"compta-mobile-status-badge--success":e}),At=(r,t,e)=>({"status-badge--danger":r,"status-badge--warn":t,"status-badge--success":e});function Wt(r,t){if(r&1){let e=v();i(0,"article",22),f("click",function(){let s=_(e).$implicit,m=p(2);return g(m.goToDetail(s))}),i(1,"div",23),o(2),a(),i(3,"div",24)(4,"div",25),o(5),a(),i(6,"div",26),o(7),C(8,"phoneFormat"),a(),i(9,"div",27)(10,"span",28),o(11),a(),i(12,"span",29),o(13),a(),i(14,"button",30),f("click",function(s){let m=_(e).$implicit,b=p(2);return s.stopPropagation(),g(b.goToDetail(m))}),a()()()()}if(r&2){let e=t.$implicit,n=p(2);l(2),E(" ",n.getInitials(e.prestataire_nom)," "),l(3),d(e.prestataire_nom),l(2),it("",x(8,7,e.prestataire_phone,"INT")," \xB7 ",n.formatDateDisplay(e.derniere_date)),l(4),d(n.formatCurrency(e.montant_facture)),l(),c("ngClass",Ke(10,zt,e.statut==="impaye",e.statut==="partiel",e.statut==="solde")),l(),d(n.getStatutLabel(e.statut))}}function qt(r,t){if(r&1&&(i(0,"section",20),h(1,Wt,15,14,"article",21),a()),r&2){let e=p();l(),c("ngForOf",e.mobileVisiblePrestataires)("ngForTrackBy",e.trackByPrestataireId)}}function jt(r,t){r&1&&(i(0,"div",32),o(1,"Chargement..."),a())}function Gt(r,t){r&1&&(i(0,"div",32),o(1,"Aucun prestataire."),a())}function Ht(r,t){if(r&1&&h(0,jt,2,0,"div",31)(1,Gt,2,0,"div",31),r&2){let e=p();c("ngIf",e.loading),l(),c("ngIf",!e.loading&&!e.mobileFilteredPrestataires.length)}}function Ut(r,t){if(r&1){let e=v();i(0,"div",33)(1,"button",34),f("click",function(){_(e);let s=p();return g(s.loadMoreMobile())}),a()()}}function $t(r,t){if(r&1){let e=v();i(0,"div",35)(1,"p-datepicker",36),S("ngModelChange",function(s){_(e);let m=p();return k(m.filtrePeriodeDebut,s)||(m.filtrePeriodeDebut=s),g(s)}),a(),i(2,"p-datepicker",37),S("ngModelChange",function(s){_(e);let m=p();return k(m.filtrePeriodeFin,s)||(m.filtrePeriodeFin=s),g(s)}),a(),i(3,"p-button",38),f("onClick",function(){_(e);let s=p();return g(s.loadComptabilite())}),a()()}if(r&2){let e=p();l(),M("ngModel",e.filtrePeriodeDebut),c("showIcon",!0),l(),M("ngModel",e.filtrePeriodeFin),c("showIcon",!0),l(),c("rounded",!0)("outlined",!0)}}function Kt(r,t){if(r&1){let e=v();i(0,"div",39)(1,"p-select",40),S("ngModelChange",function(s){_(e);let m=p();return k(m.filtreStatut,s)||(m.filtreStatut=s),g(s)}),f("onChange",function(){_(e);let s=p();return g(s.applyStatutFilter())}),a(),i(2,"p-button",41),f("onClick",function(){_(e);let s=p();return g(s.exportCSV())}),a()()}if(r&2){let e=p();l(),M("ngModel",e.filtreStatut),c("options",e.statutOptions)}}function Qt(r,t){if(r&1){let e=v();i(0,"div",42)(1,"h5",43),o(2,"Comptabilit\xE9 Packing"),a(),i(3,"p-iconfield",44),u(4,"p-inputicon",12),i(5,"input",45),f("input",function(s){_(e);let m=p(),b=z(17);return g(m.onGlobalFilter(b,s))}),a()()()}}function Yt(r,t){r&1&&(i(0,"tr")(1,"th",46)(2,"span",47),o(3,"Prestataire "),u(4,"p-sortIcon",48),a()(),i(5,"th")(6,"span",47),o(7,"T\xE9l\xE9phone"),a()(),i(8,"th",49)(9,"span",47),o(10,"Date "),u(11,"p-sortIcon",50),a()(),i(12,"th",51)(13,"span",52),o(14,"Total "),u(15,"p-sortIcon",53),a()(),i(16,"th",54)(17,"span",52),o(18,"Pay\xE9 "),u(19,"p-sortIcon",55),a()(),i(20,"th",56)(21,"span",52),o(22,"Reste d\xFB "),u(23,"p-sortIcon",57),a()(),i(24,"th",58)(25,"span",59),o(26,"Statut "),u(27,"p-sortIcon",60),a()(),u(28,"th",61),a())}function Zt(r,t){if(r&1){let e=v();i(0,"tr",62),f("dblclick",function(){let s=_(e).$implicit,m=p();return g(m.goToDetail(s))}),i(1,"td")(2,"div",63)(3,"span",64),o(4),a(),i(5,"span",65),o(6),a()()(),i(7,"td",66),o(8),C(9,"phoneFormat"),a(),i(10,"td",66),o(11),a(),i(12,"td",67),o(13),a(),i(14,"td",68),o(15),a(),i(16,"td",67),o(17),a(),i(18,"td",69)(19,"span",70),o(20),a()(),i(21,"td",69)(22,"p-button",71),f("click",function(){let s=_(e).$implicit,m=p();return g(m.goToDetail(s))}),a()()()}if(r&2){let e=t.$implicit,n=p();l(3),pe("background","var(--p-primary-50)")("color","var(--p-primary-600)"),l(),E(" ",n.getInitials(e.prestataire_nom)," "),l(2),d(e.prestataire_nom),l(2),d(x(9,15,e.prestataire_phone,"INT")),l(3),d(n.formatDateDisplay(e.derniere_date)),l(2),d(n.formatCurrency(e.montant_facture)),l(2),d(n.formatCurrency(e.montant_verse)),l(2),d(n.formatCurrency(e.montant_restant_facture)),l(2),c("ngClass",Ke(18,At,e.statut==="impaye",e.statut==="partiel",e.statut==="solde")),l(),E(" ",e.statut==="impaye"?"Impay\xE9":e.statut==="partiel"?"Partiel":"Sold\xE9"," "),l(2),c("text",!0)("rounded",!0)}}function Jt(r,t){r&1&&(i(0,"tr")(1,"td",72)(2,"div",73),u(3,"i",74),i(4,"span"),o(5,"Aucun prestataire trouv\xE9"),a()()()())}function Xt(r,t){r&1&&(i(0,"tr")(1,"th"),o(2,"R\xE9f\xE9rence"),a(),i(3,"th"),o(4,"Date"),a(),i(5,"th",82),o(6,"Rouleaux"),a(),i(7,"th",82),o(8,"Montant"),a()())}function ei(r,t){if(r&1&&(i(0,"tr")(1,"td",83),o(2),a(),i(3,"td",84),o(4),a(),i(5,"td",82),o(6),a(),i(7,"td",85),o(8),a()()),r&2){let e=t.$implicit,n=p(3);l(2),d(e.reference),l(2),d(n.formatDateDisplay(e.date)),l(2),d(e.nb_rouleaux),l(2),d(n.formatCurrency(e.montant))}}function ti(r,t){if(r&1&&(i(0,"div",77)(1,"div",78)(2,"span")(3,"strong"),o(4),a(),o(5," packings"),a(),u(6,"span",79),i(7,"span")(8,"strong"),o(9),a(),o(10," rouleaux"),a(),i(11,"span",80),o(12),a()(),i(13,"p-table",81),h(14,Xt,9,0,"ng-template",null,5,P)(16,ei,9,4,"ng-template",null,6,P),a()()),r&2){let e=p(2);l(4),d(e.previewData.nb_packings),l(5),d(e.previewData.total_rouleaux),l(3),d(e.formatCurrency(e.previewData.montant_total)),l(),c("value",e.previewData.packings)("rows",10)("paginator",e.previewData.packings.length>10)("rowHover",!0)}}function ii(r,t){r&1&&(i(0,"div",86),u(1,"i",87),a())}function ai(r,t){if(r&1&&h(0,ti,18,7,"div",75)(1,ii,2,0,"div",76),r&2){let e=p();c("ngIf",e.previewData),l(),c("ngIf",e.previewLoading)}}function ni(r,t){if(r&1){let e=v();i(0,"p-button",88),f("click",function(){_(e);let s=p();return g(s.previewDialog=!1)}),a()}r&2&&c("text",!0)}var te=class r{constructor(t,e,n){this.router=t;this.factureService=e;this.messageService=n}dataChanged=new J;filterFields=["prestataire_nom","prestataire_phone","montant_total_du"];prestataires=re([]);selectedPrestataires=null;comptaSummary=null;loading=!1;filtrePeriodeDebut=null;filtrePeriodeFin=null;filtreStatut=null;statutOptions=[{label:"Tous",value:null},{label:"Impay\xE9",value:"impaye"},{label:"Partiel",value:"partiel"},{label:"Sold\xE9",value:"solde"}];selectedItem=null;previewDialog=!1;previewData=null;previewLoading=!1;facturerLoading=!1;dt;exportColumns;cols;mobileSearchTerm="";mobilePageSize=10;mobileVisibleCount=this.mobilePageSize;ngOnInit(){this.loadComptabilite(),this.initColumns()}initColumns(){this.cols=[{field:"prestataire_nom",header:"Prestataire"},{field:"prestataire_phone",header:"T\xE9l\xE9phone"},{field:"nb_packings_non_factures",header:"Non factur\xE9s"},{field:"montant_non_facture",header:"Mnt non factur\xE9"},{field:"montant_facture",header:"Factur\xE9"},{field:"montant_verse",header:"Vers\xE9"},{field:"montant_restant_facture",header:"Reste facture"},{field:"montant_total_du",header:"Total d\xFB"}],this.exportColumns=this.cols.map(t=>({title:t.header,dataKey:t.field}))}loadComptabilite(){this.loading=!0;let t={};this.filtrePeriodeDebut&&(t.date_debut=this.formatDate(this.filtrePeriodeDebut)),this.filtrePeriodeFin&&(t.date_fin=this.formatDate(this.filtrePeriodeFin)),this.factureService.getComptabilite(t).subscribe({next:e=>{this.comptaSummary=new Z(e.data),this.applyStatutFilter(),this.loading=!1,this.dataChanged.emit(t)},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger la comptabilit\xE9",life:3e3}),this.loading=!1}})}applyStatutFilter(){this.comptaSummary&&(this.mobileVisibleCount=this.mobilePageSize,this.filtreStatut?this.prestataires.set(this.comptaSummary.prestataires.filter(t=>t.statut===this.filtreStatut)):this.prestataires.set(this.comptaSummary.prestataires))}applyMobileStatut(t){this.filtreStatut=t,this.applyStatutFilter()}exportCSV(){this.dt.exportCSV()}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}openPreview(t){let e=this.filtrePeriodeDebut?this.formatDate(this.filtrePeriodeDebut):"2000-01-01",n=this.filtrePeriodeFin?this.formatDate(this.filtrePeriodeFin):"2099-12-31";this.selectedItem=t,this.previewDialog=!0,this.previewLoading=!0,this.previewData=null,this.factureService.getPreview(t.prestataire_id,e,n).subscribe({next:s=>{this.previewData=new je(s.data),this.previewLoading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger la pr\xE9visualisation",life:3e3}),this.previewLoading=!1,this.previewDialog=!1}})}facturerNonFactures(){if(!this.selectedItem||this.facturerLoading)return;this.facturerLoading=!0;let t=this.filtrePeriodeDebut?this.formatDate(this.filtrePeriodeDebut):"2000-01-01",e=this.filtrePeriodeFin?this.formatDate(this.filtrePeriodeFin):"2099-12-31",n={prestataire_id:this.selectedItem.prestataire_id,date_debut:t,date_fin:e};this.factureService.createFacture(n).subscribe({next:s=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Facture ${s.data.reference} cr\xE9\xE9e`,life:3e3}),this.facturerLoading=!1,this.selectedItem&&(this.selectedItem.nb_packings_non_factures=0,this.selectedItem.montant_non_facture=0),this.loadComptabilite()},error:s=>{let m=s?.error?.message||"Impossible de cr\xE9er la facture";this.messageService.add({severity:"error",summary:"Erreur",detail:m,life:5e3}),this.facturerLoading=!1}})}formatDate(t){return t?typeof t=="string"?t:new Date(t).toISOString().split("T")[0]:""}formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t)+" GNF"}formatDateDisplay(t){return t==null||t===""?"":new Date(t).toLocaleDateString("fr-FR")}goToDetail(t){this.router.navigate(["/comptabilite/comptabilite-packing-detail",t.prestataire_id],{queryParams:{prestataire_nom:t.prestataire_nom,prestataire_phone:t.prestataire_phone}})}getInitials(t){if(!t||!t.trim())return"--";let e=t.trim().split(/\s+/).filter(Boolean);return e.length===1?e[0].slice(0,2).toUpperCase():`${e[0][0]}${e[e.length-1][0]}`.toUpperCase()}get mobileFilteredPrestataires(){let t=this.prestataires(),e=this.mobileSearchTerm.trim().toLowerCase();return e?t.filter(n=>(n.prestataire_nom||"").toLowerCase().includes(e)||(n.prestataire_phone||"").replace(/\s/g,"").includes(e.replace(/\s/g,""))):t}get mobileVisiblePrestataires(){return this.mobileFilteredPrestataires.slice(0,this.mobileVisibleCount)}get canLoadMoreMobile(){return this.mobileVisibleCount<this.mobileFilteredPrestataires.length}onMobileSearchChange(){this.mobileVisibleCount=this.mobilePageSize}loadMoreMobile(){this.mobileVisibleCount+=this.mobilePageSize}trackByPrestataireId(t,e){return e.prestataire_id}getStatutLabel(t){return t==="impaye"?"Impay\xE9":t==="partiel"?"Partiel":"Sold\xE9"}static \u0275fac=function(e){return new(e||r)(y(q),y(N),y(F))};static \u0275cmp=I({type:r,selectors:[["app-comptabilite-packing-tableau"]],viewQuery:function(e,n){if(e&1&&le(Rt,5),e&2){let s;se(s=ce())&&(n.dt=s.first)}},outputs:{dataChanged:"dataChanged"},features:[A([F])],decls:32,vars:24,consts:[["mobileListState",""],["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["emptymessage",""],["content",""],["footer",""],[1,"compta-tableau-mobile"],[1,"compta-mobile-search"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Prestataire, t\xE9l\xE9phone...",1,"w-full",3,"ngModelChange","ngModel"],["class","compta-mobile-list",4,"ngIf","ngIfElse"],["class","compta-mobile-load-more",4,"ngIf"],[1,"card","tableau-card","compta-table-card","compta-tableau-desktop"],["styleClass","mb-6 compta-toolbar"],["styleClass","compta-data-table","dataKey","prestataire_id","currentPageReportTemplate"," {first} \xE0 {last} sur {totalRecords} prestataires",3,"selectionChange","value","rows","columns","paginator","globalFilterFields","selection","rowHover","showCurrentPageReport","rowsPerPageOptions","loading"],["header","Pr\xE9visualisation",3,"visibleChange","visible","modal","draggable"],[1,"compta-mobile-list"],["class","compta-mobile-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"compta-mobile-card",3,"click"],["aria-hidden","true",1,"compta-mobile-card-avatar"],[1,"compta-mobile-card-body"],[1,"compta-mobile-card-name"],[1,"compta-mobile-card-meta"],[1,"compta-mobile-card-footer"],[1,"compta-mobile-card-summary"],[1,"compta-mobile-status-badge",3,"ngClass"],["pButton","","pRipple","","icon","pi pi-arrow-right","pTooltip","D\xE9tail","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm","compta-mobile-action-btn",3,"click"],["class","compta-mobile-state",4,"ngIf"],[1,"compta-mobile-state"],[1,"compta-mobile-load-more"],["pButton","","label","Charger plus","icon","pi pi-angle-down",1,"compta-mobile-load-more-btn",3,"click"],[1,"compta-toolbar__start"],["dateFormat","dd/mm/yy","placeholder","Date d\xE9but","inputStyleClass","w-full","styleClass","compta-toolbar__date",3,"ngModelChange","ngModel","showIcon"],["dateFormat","dd/mm/yy","placeholder","Date fin","inputStyleClass","w-full","styleClass","compta-toolbar__date",3,"ngModelChange","ngModel","showIcon"],["icon","pi pi-filter","severity","primary","styleClass","compta-toolbar__filter-btn","pTooltip","Appliquer les filtres",3,"onClick","rounded","outlined"],[1,"compta-toolbar__end"],["optionLabel","label","optionValue","value","placeholder","Statut","styleClass","compta-toolbar__status",3,"ngModelChange","onChange","ngModel","options"],["label","Export","icon","pi pi-download","severity","secondary","styleClass","compta-toolbar__export-btn",3,"onClick"],[1,"table-caption"],[1,"m-0"],[1,"table-caption__search"],["pInputText","","type","text","placeholder","Rechercher...",3,"input"],["pSortableColumn","prestataire_nom"],[1,"col-header"],["field","prestataire_nom"],["pSortableColumn","derniere_date"],["field","derniere_date"],["pSortableColumn","montant_facture",1,"text-right"],[1,"col-header","justify-end"],["field","montant_facture"],["pSortableColumn","montant_verse",1,"text-right"],["field","montant_verse"],["pSortableColumn","montant_restant_facture",1,"text-right"],["field","montant_restant_facture"],["pSortableColumn","statut",1,"text-center"],[1,"col-header","justify-center"],["field","statut"],[1,"text-center",2,"width","5rem"],[1,"table-row",3,"dblclick"],[1,"cell-prestataire"],[1,"cell-prestataire__avatar"],[1,"cell-prestataire__name"],[1,"cell-secondary","cell-bold"],[1,"text-right","cell-mono","cell-bold"],[1,"text-right","cell-mono","cell-success"],[1,"text-center"],[1,"status-badge",3,"ngClass"],["icon","pi pi-arrow-right","severity","secondary","pTooltip","D\xE9tail",3,"click","text","rounded"],["colspan","8"],[1,"empty-state"],[1,"pi","pi-inbox"],["class","flex flex-col gap-4",4,"ngIf"],["class","flex items-center justify-center p-12",4,"ngIf"],[1,"flex","flex-col","gap-4"],[1,"preview-summary"],[1,"preview-summary__sep"],[1,"ml-auto","text-xl","font-bold","text-primary"],["styleClass","p-datatable-sm",3,"value","rows","paginator","rowHover"],[1,"text-right"],[1,"font-medium"],[1,"cell-secondary"],[1,"text-right","font-semibold"],[1,"flex","items-center","justify-center","p-12"],[1,"pi","pi-spin","pi-spinner","text-3xl","text-surface-300"],["label","Fermer",3,"click","text"]],template:function(e,n){if(e&1){let s=v();u(0,"p-toast"),i(1,"div",10)(2,"section",11)(3,"p-iconfield"),u(4,"p-inputicon",12),i(5,"input",13),S("ngModelChange",function(b){return _(s),k(n.mobileSearchTerm,b)||(n.mobileSearchTerm=b),g(b)}),f("ngModelChange",function(){return _(s),g(n.onMobileSearchChange())}),a()()(),h(6,qt,2,2,"section",14)(7,Ht,2,2,"ng-template",null,0,P)(9,Ut,2,0,"div",15),a(),i(10,"div",16)(11,"p-toolbar",17),h(12,$t,4,6,"ng-template",null,1,P)(14,Kt,3,2,"ng-template",null,2,P),a(),i(16,"p-table",18,3),S("selectionChange",function(b){return _(s),k(n.selectedPrestataires,b)||(n.selectedPrestataires=b),g(b)}),h(18,Qt,6,0,"ng-template",null,4,P)(20,Yt,29,0,"ng-template",null,5,P)(22,Zt,23,22,"ng-template",null,6,P)(24,Jt,6,0,"ng-template",null,7,P),a()(),i(26,"p-dialog",19),S("visibleChange",function(b){return _(s),k(n.previewDialog,b)||(n.previewDialog=b),g(b)}),h(27,ai,2,2,"ng-template",null,8,P)(29,ni,1,1,"ng-template",null,9,P),a(),u(31,"p-confirmdialog")}if(e&2){let s=z(8);l(5),M("ngModel",n.mobileSearchTerm),l(),c("ngIf",!n.loading&&n.mobileVisiblePrestataires.length)("ngIfElse",s),l(3),c("ngIf",!n.loading&&n.canLoadMoreMobile),l(7),c("value",n.prestataires())("rows",10)("columns",n.cols)("paginator",!0)("globalFilterFields",n.filterFields),M("selection",n.selectedPrestataires),c("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",D(21,Bt))("loading",n.loading),l(10),L(D(22,Nt)),M("visible",n.previewDialog),c("modal",!0)("draggable",!1),l(5),L(D(23,Lt))}},dependencies:[T,de,ue,W,Ie,Oe,Ee,De,U,rt,G,H,B,R,he,K,$,Fe,Te,Ve,bt,fe,ot,ke,Me,Be,Re,Ne,Ce,ct,ve,st,ze,Le,Se,ft,Ae,Pe,xe,Y,dt,We],styles:[".compta-tableau-mobile[_ngcontent-%COMP%]{display:none}.compta-mobile-search[_ngcontent-%COMP%]{margin-bottom:.75rem}[_nghost-%COMP%]     .compta-mobile-search .p-iconfield, [_nghost-%COMP%]     .compta-mobile-search .p-inputtext{width:100%}.compta-mobile-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.compta-mobile-card[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:.875rem 1rem;background:var(--p-surface-0);border:1px solid var(--p-surface-200);border-radius:12px;cursor:pointer;transition:background .15s ease}.compta-mobile-card[_ngcontent-%COMP%]:active{background:var(--p-surface-100)}.compta-mobile-card-avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:10px;background:var(--p-primary-50);color:var(--p-primary-600);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.8rem;flex-shrink:0}.compta-mobile-card-body[_ngcontent-%COMP%]{flex:1;min-width:0}.compta-mobile-card-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--p-surface-900);line-height:1.3}.compta-mobile-card-meta[_ngcontent-%COMP%]{font-size:.85rem;color:var(--p-surface-500);margin-top:.2rem}.compta-mobile-card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-top:.5rem;flex-wrap:wrap}.compta-mobile-card-summary[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--p-surface-800)}.compta-mobile-status-badge[_ngcontent-%COMP%]{font-size:.72rem;font-weight:600;padding:.2rem .5rem;border-radius:999px}.compta-mobile-status-badge--danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.compta-mobile-status-badge--warn[_ngcontent-%COMP%]{background:#fffbeb;color:#d97706}.compta-mobile-status-badge--success[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669}.compta-mobile-action-btn[_ngcontent-%COMP%]{color:var(--p-primary-600)!important}.compta-mobile-state[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;color:var(--p-surface-500);font-size:.9rem}.compta-mobile-load-more[_ngcontent-%COMP%]{margin-top:.75rem;display:flex;justify-content:center}.compta-mobile-load-more-btn[_ngcontent-%COMP%]{width:100%;max-width:18rem}@media (max-width: 768px){.compta-tableau-mobile[_ngcontent-%COMP%]{display:block}.compta-tableau-desktop[_ngcontent-%COMP%]{display:none!important}}.tableau-card[_ngcontent-%COMP%]{border-radius:14px!important;box-shadow:0 1px 3px #0000000a!important;overflow:hidden}.compta-table-card[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]     .compta-toolbar.p-toolbar{padding:1rem;border:1px solid var(--p-surface-200);border-radius:12px;background:var(--p-surface-50)}.compta-toolbar__start[_ngcontent-%COMP%], .compta-toolbar__end[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}[_nghost-%COMP%]     .compta-toolbar__date.p-datepicker, [_nghost-%COMP%]     .compta-toolbar__status.p-select{width:10rem}[_nghost-%COMP%]     .compta-toolbar__filter-btn.p-button, [_nghost-%COMP%]     .compta-toolbar__export-btn.p-button{height:2.5rem}[_nghost-%COMP%]     .p-datatable .p-datatable-caption{padding:1.5rem 1.75rem 1.75rem;border-bottom:1px solid var(--p-surface-100);margin-bottom:0}.table-caption[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1.5rem;flex-wrap:wrap}[_nghost-%COMP%]     .table-caption__search .p-iconfield, [_nghost-%COMP%]     .table-caption__search .p-inputtext{width:100%}[_nghost-%COMP%]     .compta-data-table .p-datatable-table{min-width:55rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem 1.25rem}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1.1rem 1.25rem}.col-header[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.03em;color:var(--p-surface-500)}.table-row[_ngcontent-%COMP%]{cursor:pointer;transition:background .15s ease}.cell-prestataire[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.cell-prestataire__avatar[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.8rem;flex-shrink:0}.cell-prestataire__name[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:var(--p-surface-800)}.cell-secondary[_ngcontent-%COMP%]{color:var(--p-surface-400);font-size:.9rem}.cell-mono[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums;font-size:.9rem}.cell-success[_ngcontent-%COMP%]{color:#059669}.cell-bold[_ngcontent-%COMP%]{font-weight:600;color:var(--p-surface-800)}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.78rem;font-weight:600;letter-spacing:.01em}.status-badge--danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.status-badge--warn[_ngcontent-%COMP%]{background:#fffbeb;color:#d97706}.status-badge--success[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;padding:3rem 0;color:var(--p-surface-300)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}.preview-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.25rem;background:var(--p-surface-50);border-radius:10px;font-size:.9rem;color:var(--p-surface-600)}.preview-summary__sep[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%;background:var(--p-surface-300)}@media (max-width: 768px){[_nghost-%COMP%]     .compta-table-card.card{padding:1rem;border-radius:16px}[_nghost-%COMP%]     .compta-toolbar.p-toolbar{padding:.75rem;margin-bottom:.75rem;gap:.625rem}[_nghost-%COMP%]     .compta-toolbar .p-toolbar-start, [_nghost-%COMP%]     .compta-toolbar .p-toolbar-end{width:100%}.compta-toolbar__start[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr) auto;gap:.5rem}.compta-toolbar__end[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:minmax(0,1fr) auto;gap:.5rem}[_nghost-%COMP%]     .compta-toolbar__date.p-datepicker, [_nghost-%COMP%]     .compta-toolbar__status.p-select{width:100%}.table-caption[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}[_nghost-%COMP%]     .p-datatable .p-datatable-caption{padding:1rem}[_nghost-%COMP%]     .compta-data-table .p-datatable-table{min-width:46rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th, [_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.85rem .9rem}}.app-dark[_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .app-dark[_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%]{color:var(--p-surface-100)}.app-dark[_nghost-%COMP%]   .col-header[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .col-header[_ngcontent-%COMP%]{color:var(--p-surface-400)}.app-dark[_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%]{background:#dc26261f}.app-dark[_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%]{background:#d977061f}.app-dark[_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%]{background:#0596691f}.app-dark[_nghost-%COMP%]   .preview-summary[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .preview-summary[_ngcontent-%COMP%]{background:var(--p-surface-700)}.app-dark[_nghost-%COMP%]     .compta-toolbar.p-toolbar, .app-dark   [_nghost-%COMP%]     .compta-toolbar.p-toolbar{background:var(--p-surface-700);border-color:var(--p-surface-600)}.app-dark[_nghost-%COMP%]     .p-datatable .p-datatable-caption, .app-dark   [_nghost-%COMP%]     .p-datatable .p-datatable-caption{border-bottom-color:var(--p-surface-700)}"]})};var ie=class r{constructor(t,e){this.router=t;this.document=e}mobileBreakpoint=768;mobilePwaClass="comptabilite-packing-mobile-pwa";mobileStatusMenuItems=[{label:"Tous",command:()=>this.applyMobileStatut(null)},{label:"Impay\xE9",command:()=>this.applyMobileStatut("impaye")},{label:"Partiel",command:()=>this.applyMobileStatut("partiel")},{label:"Sold\xE9",command:()=>this.applyMobileStatut("solde")}];tableauRef;ngOnInit(){this.syncMobilePwaMode()}ngOnDestroy(){this.document.body.classList.remove(this.mobilePwaClass)}onWindowResize(){this.syncMobilePwaMode()}goHome(){this.router.navigate(["/"])}applyMobileStatut(t){this.tableauRef?.applyMobileStatut(t)}syncMobilePwaMode(){typeof window>"u"||(window.innerWidth<=this.mobileBreakpoint?this.document.body.classList.add(this.mobilePwaClass):this.document.body.classList.remove(this.mobilePwaClass))}static \u0275fac=function(e){return new(e||r)(y(q),y(ne))};static \u0275cmp=I({type:r,selectors:[["app-comptabilite-packing-liste"]],viewQuery:function(e,n){if(e&1&&le(te,5),e&2){let s;se(s=ce())&&(n.tableauRef=s.first)}},hostBindings:function(e,n){e&1&&f("resize",function(){return n.onWindowResize()},oe)},features:[A([F,j,ht])],decls:16,vars:2,consts:[["statusMenu",""],["statsWidget",""],[1,"compta-mobile-shell","compta-packing-mobile-app"],[1,"compta-packing-mobile-header"],["pButton","","pRipple","","icon","pi pi-arrow-left","aria-label","Retour \xE0 l'accueil",1,"p-button-rounded","p-button-text","compta-mobile-back",3,"click"],[1,"compta-mobile-title-wrap"],[1,"compta-mobile-title"],[1,"compta-mobile-subtitle"],["appendTo","body","styleClass","compta-mobile-status-menu",3,"model","popup"],["pButton","","pRipple","","icon","pi pi-filter","aria-label","Filtrer par statut",1,"p-button-rounded","p-button-text","compta-mobile-filter-btn",3,"click"],[1,"compta-mobile-scroll"],[1,"compta-mobile-shell__stats","grid","grid-cols-12","gap-6","mb-6"],[1,"compta-mobile-shell__table",3,"dataChanged"]],template:function(e,n){if(e&1){let s=v();i(0,"section",2)(1,"header",3)(2,"button",4),f("click",function(){return _(s),g(n.goHome())}),a(),i(3,"div",5)(4,"h1",6),o(5,"Comptabilit\xE9 Packing"),a(),i(6,"p",7),o(7,"Facturation prestataires"),a()(),u(8,"p-menu",8,0),i(10,"button",9),f("click",function(b){_(s);let ae=z(9);return g(ae.toggle(b))}),a()(),i(11,"div",10)(12,"div",11),u(13,"app-stats-comptabilite-packing-widget",null,1),a(),i(15,"app-comptabilite-packing-tableau",12),f("dataChanged",function(b){_(s);let ae=z(14);return g(ae.loadStats(b))}),a()()()}e&2&&(l(8),c("model",n.mobileStatusMenuItems)("popup",!0))},dependencies:[T,B,R,K,$,gt,_t,Ge,te],styles:["[_nghost-%COMP%]{display:block}.compta-mobile-shell[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.compta-mobile-shell__stats[_ngcontent-%COMP%]{margin-bottom:0}.compta-packing-mobile-header[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.compta-packing-mobile-app[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100dvh;min-height:100vh;height:100dvh;overflow:hidden;margin:calc(-.25rem - env(safe-area-inset-top)) -.875rem 0;margin-bottom:calc(-.875rem - env(safe-area-inset-bottom));padding:0 .875rem calc(.875rem + env(safe-area-inset-bottom));padding-left:calc(.875rem + env(safe-area-inset-left));padding-right:calc(.875rem + env(safe-area-inset-right));background:var(--p-surface-50)}.app-dark[_nghost-%COMP%]   .compta-packing-mobile-app[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .compta-packing-mobile-app[_ngcontent-%COMP%]{background:var(--p-surface-900)}.compta-mobile-scroll[_ngcontent-%COMP%]{flex:1;min-height:0;overflow-y:auto;-webkit-overflow-scrolling:touch;padding-top:.75rem}.compta-packing-mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:calc(.5rem + env(safe-area-inset-top)) .5rem .6rem .25rem;margin:0 -.875rem;margin-left:calc(-.875rem - env(safe-area-inset-left));margin-right:calc(-.875rem - env(safe-area-inset-right));padding-left:calc(.875rem + env(safe-area-inset-left));padding-right:calc(.875rem + env(safe-area-inset-right));flex-shrink:0;background:var(--p-surface-0);border-bottom:1px solid var(--p-surface-200);position:sticky;top:0;z-index:30}.app-dark[_nghost-%COMP%]   .compta-packing-mobile-header[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .compta-packing-mobile-header[_ngcontent-%COMP%]{background:var(--p-surface-800);border-bottom-color:var(--p-surface-700)}.compta-mobile-back[_ngcontent-%COMP%]{color:var(--p-primary-600)!important}.compta-mobile-title-wrap[_ngcontent-%COMP%]{flex:1;min-width:0}.compta-mobile-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;margin:0;color:var(--p-surface-900);line-height:1.2}.app-dark[_nghost-%COMP%]   .compta-mobile-title[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .compta-mobile-title[_ngcontent-%COMP%]{color:var(--p-surface-0)}.compta-mobile-subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-surface-500);margin:.15rem 0 0}.compta-mobile-filter-btn[_ngcontent-%COMP%]{color:var(--p-primary-600)!important}.compta-mobile-shell__stats[_ngcontent-%COMP%]{margin-bottom:0!important}}"]})};function oi(r,t){if(r&1){let e=v();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),o(4),a(),i(5,"div",5),o(6,"Versement facture"),a()(),i(7,"button",6),f("click",function(){_(e);let s=p();return g(s.onClose.emit())}),u(8,"i",7),a()(),i(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),o(13,"Total facture"),a(),i(14,"div",12),o(15),C(16,"money"),a()(),i(17,"div",10)(18,"div",11),o(19,"D\xE9j\xE0 vers\xE9"),a(),i(20,"div",13),o(21),C(22,"money"),a()(),u(23,"div",14),i(24,"div",10)(25,"div",15),o(26,"Reste \xE0 payer"),a(),i(27,"div",16),o(28),C(29,"money"),a()()(),i(30,"div",17)(31,"div",18),o(32,"Montant \xE0 verser"),a(),i(33,"p-inputnumber",19),S("ngModelChange",function(s){_(e);let m=p();return k(m.montant,s)||(m.montant=s),g(s)}),a()(),i(34,"div",17)(35,"div",18),o(36,"Mode de paiement"),a(),i(37,"div",20)(38,"div",21),f("click",function(){_(e);let s=p();return g(s.selectMode("especes"))}),u(39,"i",22),i(40,"span"),o(41,"Esp\xE8ces"),a()(),i(42,"div",21),f("click",function(){_(e);let s=p();return g(s.selectMode("virement"))}),u(43,"i",23),i(44,"span"),o(45,"Virement"),a()(),i(46,"div",21),f("click",function(){_(e);let s=p();return g(s.selectMode("mobile_money"))}),u(47,"i",24),i(48,"span"),o(49,"Mobile"),a()()()()(),i(50,"div",25)(51,"div",26)(52,"div",27)(53,"div",12),o(54,"Montant \xE0 payer"),a()(),i(55,"div",28),o(56),a()(),i(57,"button",29),f("click",function(){_(e);let s=p();return g(s.confirmer())}),u(58,"i",30),i(59,"span",31),o(60,"Confirmer le paiement"),a()()()()}if(r&2){let e=p();l(4),d(e.facture.reference.replace("FACT-PACK-","")),l(3),c("text",!0)("rounded",!0),l(8),d(x(16,19,e.facture.montant_total,"GNF")),l(6),d(x(22,22,e.facture.montant_verse,"GNF")),l(7),d(x(29,25,e.facture.montant_restant,"GNF")),l(5),M("ngModel",e.montant),c("min",1)("max",e.facture.montant_restant)("useGrouping",!0),l(5),me("slideover-mode--active",e.selectedMode==="especes"),l(4),me("slideover-mode--active",e.selectedMode==="virement"),l(4),me("slideover-mode--active",e.selectedMode==="mobile_money"),l(10),d(e.montant?e.formatCurrency(e.montant):"0 GNF"),l(),c("disabled",e.saving||!e.montant)("loading",e.saving)}}var Ue=class r{facture=null;saving=!1;onPay=new J;onClose=new J;montant=null;selectedMode="especes";ngOnChanges(){this.facture&&(this.montant=this.facture.montant_restant,this.selectedMode="especes")}selectMode(t){this.selectedMode=t}confirmer(){!this.montant||this.montant<=0||!this.facture||this.onPay.emit({montant:this.montant,mode_paiement:this.selectedMode})}formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t)+" GNF"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=I({type:r,selectors:[["app-comptabilite-packing-paiement"]],inputs:{facture:"facture",saving:"saving"},outputs:{onPay:"onPay",onClose:"onClose"},features:[tt],decls:1,vars:1,consts:[["class","flex flex-col h-full bg-surface-0 dark:bg-surface-900",4,"ngIf"],[1,"flex","flex-col","h-full","bg-surface-0","dark:bg-surface-900"],[1,"w-full","p-6","border-b","border-surface-200","dark:border-surface-700","flex","justify-start","items-center"],[1,"flex-1"],[1,"text-surface-900","dark:text-surface-0","text-xl","font-medium","leading-tight"],[1,"text-surface-500","dark:text-surface-400","text-sm","font-normal","mt-1"],["pButton","",1,"w-10","h-10",3,"click","text","rounded"],["pButtonIcon","",1,"pi","pi-times"],[1,"flex-1","w-full","p-6","flex","flex-col","justify-start","items-start","gap-6","overflow-y-auto"],[1,"w-full","p-5","bg-surface-50","dark:bg-surface-800","rounded-xl","flex","flex-col","justify-start","items-start","gap-4"],[1,"w-full","flex","justify-start","items-start","gap-6"],[1,"flex-1","text-surface-500","dark:text-surface-400","text-base","font-normal","leading-tight"],[1,"text-surface-900","dark:text-surface-0","text-base","font-medium","leading-tight"],[1,"text-base","font-semibold","leading-tight",2,"color","#059669"],[1,"w-full","h-px","bg-surface-200","dark:bg-surface-700"],[1,"flex-1","text-surface-900","dark:text-surface-0","text-base","font-semibold","leading-tight"],[1,"text-lg","font-bold","leading-tight",2,"color","#d97706"],[1,"w-full","flex","flex-col","gap-3"],[1,"text-surface-500","dark:text-surface-400","text-xs","font-semibold","uppercase","tracking-wider"],["suffix"," GNF","locale","fr-FR","inputStyleClass","w-full text-right text-xl font-bold py-4","styleClass","w-full","placeholder","0",3,"ngModelChange","ngModel","min","max","useGrouping"],[1,"w-full","flex","gap-3","paiement-modes"],[1,"slideover-mode",3,"click"],[1,"pi","pi-money-bill"],[1,"pi","pi-building"],[1,"pi","pi-mobile"],[1,"w-full","border-t","border-surface-200","dark:border-surface-700","p-6","flex","flex-col","gap-5"],[1,"w-full","flex","justify-start","items-start","gap-4"],[1,"flex","justify-start","items-end","gap-2"],[1,"flex-1","text-right","text-surface-900","dark:text-surface-0","text-lg","font-bold","leading-tight"],["pButton","","severity","contrast",1,"w-full","py-3",3,"click","disabled","loading"],["pButtonIcon","",1,"pi","pi-check","mr-2"],["pButtonLabel",""]],template:function(e,n){e&1&&h(0,oi,61,28,"div",0),e&2&&c("ngIf",n.facture)},dependencies:[T,W,U,G,H,B,R,be,lt,ge,Y,we,Q],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:0}.slideover-mode[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:1rem .75rem;border-radius:12px;border:1.5px solid var(--p-surface-200);background:transparent;cursor:pointer;transition:all .15s ease;color:var(--p-surface-500);font-size:.82rem;font-weight:500}.slideover-mode[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.slideover-mode[_ngcontent-%COMP%]:hover{border-color:var(--p-surface-300);background:var(--p-surface-50)}.slideover-mode--active[_ngcontent-%COMP%]{border-color:var(--p-primary-500);background:var(--p-primary-50);color:var(--p-primary-600);font-weight:600}.app-dark[_nghost-%COMP%]   .slideover-mode[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .slideover-mode[_ngcontent-%COMP%]{border-color:var(--p-surface-600);color:var(--p-surface-300)}.app-dark[_nghost-%COMP%]   .slideover-mode[_ngcontent-%COMP%]:hover, .app-dark   [_nghost-%COMP%]   .slideover-mode[_ngcontent-%COMP%]:hover{background:var(--p-surface-800);border-color:var(--p-surface-500)}.app-dark[_nghost-%COMP%]   .slideover-mode--active[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .slideover-mode--active[_ngcontent-%COMP%]{border-color:var(--p-primary-500);background:#3b82f61f;color:var(--p-primary-400)}"]})};var li=()=>[10,20,30],si=()=>({"min-width":"55rem"}),kt=()=>({width:"750px"}),St=()=>({"max-height":"70vh",overflow:"auto"}),ci=()=>({width:"450px"}),pi=(r,t,e,n)=>({"detail-facture-card__badge--danger":r,"detail-facture-card__badge--warn":t,"detail-facture-card__badge--success":e,"detail-facture-card__badge--secondary":n}),mi=(r,t,e,n)=>({"status-badge--danger":r,"status-badge--warn":t,"status-badge--success":e,"status-badge--secondary":n});function di(r,t){if(r&1&&(i(0,"p",39),o(1),C(2,"phoneFormat"),a()),r&2){let e=p();l(),d(x(2,1,e.prestatairePhone,"INT"))}}function ui(r,t){if(r&1&&(i(0,"span",40),u(1,"i",41),o(2),C(3,"phoneFormat"),a()),r&2){let e=p();l(2),E(" ",x(3,1,e.prestatairePhone,"INT")," ")}}function _i(r,t){if(r&1){let e=v();i(0,"div",42)(1,"div",43),f("click",function(){_(e);let s=p();return g(s.closeSlideoverPaiement())}),a(),i(2,"div",44)(3,"app-comptabilite-packing-paiement",45),f("onPay",function(s){_(e);let m=p();return g(m.onSlideoverPay(s))})("onClose",function(){_(e);let s=p();return g(s.closeSlideoverPaiement())}),a()()()}if(r&2){let e=p();l(3),c("facture",e.slideoverFacture)("saving",e.slideoverSaving)}}function gi(r,t){r&1&&(i(0,"div",46),o(1,"Chargement..."),a())}function fi(r,t){r&1&&(i(0,"div",46),o(1,"Aucune facture pour ce prestataire."),a())}function bi(r,t){if(r&1){let e=v();i(0,"p-button",64),f("click",function(){_(e);let s=p().$implicit,m=p(2);return g(m.openSlideoverPaiement(s))}),a()}r&2&&c("text",!0)("rounded",!0)}function hi(r,t){if(r&1){let e=v();i(0,"p-button",65),f("click",function(){_(e);let s=p().$implicit,m=p(2);return g(m.openHistorique(s))}),a()}r&2&&c("text",!0)("rounded",!0)}function vi(r,t){if(r&1){let e=v();i(0,"p-button",66),f("click",function(){_(e);let s=p().$implicit,m=p(2);return g(m.confirmDeleteFacture(s))}),a()}r&2&&c("text",!0)("rounded",!0)}function Ci(r,t){if(r&1&&(i(0,"article",49)(1,"div",50)(2,"span",51),o(3),a(),i(4,"span",52),o(5),a(),i(6,"span",53),o(7),a()(),i(8,"div",54)(9,"span",55),o(10),C(11,"money"),a(),i(12,"span",56),o(13),C(14,"money"),a(),i(15,"span",57),o(16),C(17,"money"),a()(),i(18,"div",58)(19,"span",59),o(20),a(),i(21,"div",60),h(22,bi,1,2,"p-button",61)(23,hi,1,2,"p-button",62)(24,vi,1,2,"p-button",63),a()()()),r&2){let e=t.$implicit,n=p(2);l(3),d(n.getReferenceShort(e.reference)),l(2),d(n.formatDateDisplay(e.date)),l(2),E("",e.total_rouleaux," rouleaux"),l(3),d(x(11,11,e.montant_total,"GNF")),l(3),E("Vers\xE9 : ",x(14,14,e.montant_verse,"GNF")),l(3),E("Restant : ",x(17,17,e.montant_restant,"GNF")),l(3),c("ngClass",Qe(20,pi,e.statut==="impayee",e.statut==="partielle",e.statut==="payee",e.statut==="annulee")),l(),d(e.statut_label),l(2),c("ngIf",n.canCreateVersement&&e.statut!=="payee"),l(),c("ngIf",n.canReadVersement),l(),c("ngIf",n.canDeleteFacture&&e.montant_verse===0)}}function xi(r,t){if(r&1&&(i(0,"div",47),h(1,Ci,25,25,"article",48),a()),r&2){let e=p();l(),c("ngForOf",e.factures())}}function Pi(r,t){r&1&&(i(0,"div",67)(1,"h5",68),o(2,"Factures"),a()())}function yi(r,t){r&1&&(i(0,"tr")(1,"th",69)(2,"span",70),o(3,"R\xE9f\xE9rence "),u(4,"p-sortIcon",71),a()(),i(5,"th",72)(6,"span",70),o(7,"Date "),u(8,"p-sortIcon",73),a()(),i(9,"th",74)(10,"span",75),o(11,"Rouleaux "),u(12,"p-sortIcon",76),a()(),i(13,"th",77)(14,"span",75),o(15,"Prix/rouleau"),a()(),i(16,"th",78)(17,"span",75),o(18,"A payer "),u(19,"p-sortIcon",79),a()(),i(20,"th",80)(21,"span",75),o(22,"Vers\xE9 "),u(23,"p-sortIcon",81),a()(),i(24,"th",77)(25,"span",75),o(26,"Restant"),a()(),i(27,"th",82)(28,"span",83),o(29,"Statut "),u(30,"p-sortIcon",84),a()(),u(31,"th",85),a())}function Mi(r,t){if(r&1){let e=v();i(0,"p-button",64),f("click",function(){_(e);let s=p().$implicit,m=p();return g(m.openSlideoverPaiement(s))}),a()}r&2&&c("text",!0)("rounded",!0)}function ki(r,t){if(r&1){let e=v();i(0,"p-button",96),f("click",function(){_(e);let s=p().$implicit,m=p();return g(m.openHistorique(s))}),a()}r&2&&c("text",!0)("rounded",!0)}function Si(r,t){if(r&1){let e=v();i(0,"p-button",97),f("click",function(){_(e);let s=p().$implicit,m=p();return g(m.confirmDeleteFacture(s))}),a()}r&2&&c("text",!0)("rounded",!0)}function wi(r,t){if(r&1&&(i(0,"tr")(1,"td",86),o(2),a(),i(3,"td",87),o(4),a(),i(5,"td",88),o(6),a(),i(7,"td",88),o(8),C(9,"money"),a(),i(10,"td",88),o(11),C(12,"money"),a(),i(13,"td",89),o(14),C(15,"money"),a(),i(16,"td",90),o(17),C(18,"money"),a(),i(19,"td",91)(20,"span",92),o(21),a()(),i(22,"td")(23,"div",93),h(24,Mi,1,2,"p-button",61)(25,ki,1,2,"p-button",94)(26,Si,1,2,"p-button",95),a()()()),r&2){let e=t.$implicit,n=p();l(2),d(n.getReferenceShort(e.reference)),l(2),d(n.formatDateDisplay(e.date)),l(2),d(e.total_rouleaux),l(2),d(x(9,12,e.prix_par_rouleau,"GNF")),l(3),d(x(12,15,e.montant_total,"GNF")),l(3),d(x(15,18,e.montant_verse,"GNF")),l(3),d(x(18,21,e.montant_restant,"GNF")),l(3),c("ngClass",Qe(24,mi,e.statut==="impayee",e.statut==="partielle",e.statut==="payee",e.statut==="annulee")),l(),E(" ",e.statut_label," "),l(3),c("ngIf",n.canCreateVersement&&e.statut!=="payee"),l(),c("ngIf",n.canReadVersement),l(),c("ngIf",n.canDeleteFacture&&e.montant_verse===0)}}function Oi(r,t){r&1&&(i(0,"tr")(1,"td",98)(2,"div",99),u(3,"i",100),i(4,"span"),o(5,"Aucune facture pour ce prestataire"),a()()()())}function Ei(r,t){r&1&&(i(0,"small",111),o(1,"Montant requis."),a())}function Di(r,t){if(r&1){let e=v();i(0,"div",101)(1,"div",102)(2,"span",103),o(3),a(),u(4,"span",104),i(5,"span"),o(6,"Total : "),i(7,"strong"),o(8),C(9,"money"),a()(),u(10,"span",104),i(11,"span",105),o(12,"Vers\xE9 : "),i(13,"strong"),o(14),C(15,"money"),a()(),u(16,"span",104),i(17,"span",106),o(18),C(19,"money"),a()(),i(20,"div",101)(21,"div",36)(22,"label",107),o(23,"Mode de paiement"),a(),i(24,"p-select",108),S("ngModelChange",function(s){_(e);let m=p();return k(m.versementData.mode_paiement,s)||(m.versementData.mode_paiement=s),g(s)}),a()(),i(25,"div",36)(26,"label",107),o(27,"Montant \xE0 verser"),a(),i(28,"p-inputnumber",109),S("ngModelChange",function(s){_(e);let m=p();return k(m.versementData.montant,s)||(m.versementData.montant=s),g(s)}),a(),h(29,Ei,2,0,"small",110),a()()()}if(r&2){let e=p();l(3),d(e.getReferenceShort(e.selectedFacture.reference)),l(5),d(x(9,11,e.selectedFacture.montant_total,"GNF")),l(6),d(x(15,14,e.selectedFacture.montant_verse,"GNF")),l(4),E("Restant : ",x(19,17,e.selectedFacture.montant_restant,"GNF")),l(6),M("ngModel",e.versementData.mode_paiement),c("options",e.modesPaiement),l(4),M("ngModel",e.versementData.montant),c("min",1)("max",e.selectedFacture.montant_restant)("useGrouping",!0),l(),c("ngIf",e.versementSubmitted&&!e.versementData.montant)}}function Ii(r,t){if(r&1){let e=v();i(0,"button",112),f("click",function(){_(e);let s=p();return g(s.hideVersementDialog())}),i(1,"span",113),o(2,"Annuler"),a()(),i(3,"button",114),f("click",function(){_(e);let s=p();return g(s.saveVersement())}),i(4,"span",113),o(5,"Enregistrer"),a()()}if(r&2){let e=p();c("outlined",!0),l(3),c("disabled",e.versementSaving)("loading",e.versementSaving)}}function Ti(r,t){r&1&&(i(0,"div",115),u(1,"i",116),a())}function Fi(r,t){r&1&&u(0,"th",124)}function Vi(r,t){if(r&1&&(i(0,"tr")(1,"th")(2,"span",70),o(3,"Date"),a()(),i(4,"th",77)(5,"span",75),o(6,"Montant"),a()(),i(7,"th")(8,"span",70),o(9,"Mode"),a()(),i(10,"th")(11,"span",70),o(12,"Notes"),a()(),h(13,Fi,1,0,"th",123),a()),r&2){let e=p(3);l(13),c("ngIf",e.canDeleteVersement)}}function Ri(r,t){if(r&1){let e=v();i(0,"td",91)(1,"p-button",66),f("click",function(){_(e);let s=p().$implicit,m=p(3);return g(m.confirmDeleteVersement(m.historiqueData.facture_id,s))}),a()()}r&2&&(l(),c("text",!0)("rounded",!0))}function Bi(r,t){if(r&1&&(i(0,"tr")(1,"td",125),o(2),a(),i(3,"td",126),o(4),a(),i(5,"td"),o(6),a(),i(7,"td",125),o(8),a(),h(9,Ri,2,2,"td",127),a()),r&2){let e=t.$implicit,n=p(3);l(2),d(n.formatDateDisplay(e.date_versement)),l(2),d(n.formatCurrency(e.montant)),l(2),d(e.mode_paiement_label),l(2),d(e.notes||"-"),l(),c("ngIf",n.canDeleteVersement)}}function Ni(r,t){if(r&1&&(i(0,"p-table",122),h(1,Vi,14,1,"ng-template",null,1,P)(3,Bi,10,5,"ng-template",null,2,P),a()),r&2){let e=p(2);c("value",e.historiqueData.versements)("rowHover",!0)}}function Li(r,t){r&1&&(i(0,"div",99),u(1,"i",100),i(2,"span"),o(3,"Aucun versement enregistr\xE9"),a()())}function zi(r,t){if(r&1&&(i(0,"div",101)(1,"div",102)(2,"span",117),o(3),a(),u(4,"span",104),i(5,"span"),o(6,"Total: "),i(7,"strong"),o(8),a()(),u(9,"span",104),i(10,"span",105),o(11,"Vers\xE9: "),i(12,"strong"),o(13),a()(),u(14,"span",104),i(15,"span",118),o(16),a(),i(17,"span",119)(18,"span",92),o(19),a()()(),h(20,Ni,5,2,"p-table",120)(21,Li,4,0,"div",121),a()),r&2){let e=p();l(3),d(e.getReferenceShort(e.historiqueData.reference)),l(5),d(e.formatCurrency(e.historiqueData.montant_total)),l(5),d(e.formatCurrency(e.historiqueData.montant_verse)),l(3),E("Restant: ",e.formatCurrency(e.historiqueData.montant_restant)),l(2),c("ngClass",e.historiqueData.is_soldee?"status-badge--success":"status-badge--warn"),l(),E(" ",e.historiqueData.is_soldee?"Sold\xE9":"En cours"," "),l(),c("ngIf",e.historiqueData.versements.length>0),l(),c("ngIf",e.historiqueData.versements.length===0)}}function Ai(r,t){if(r&1){let e=v();i(0,"p-button",128),f("click",function(){_(e);let s=p();return g(s.historiqueDialog=!1)}),a()}r&2&&c("text",!0)}var $e=class r{constructor(t,e,n,s,m,b,ae){this.route=t;this.router=e;this.factureService=n;this.messageService=s;this.confirmationService=m;this.authService=b;this.document=ae;this.canReadVersement=this.authService.hasPermission("versements.read"),this.canCreateVersement=this.authService.hasPermission("versements.create"),this.canDeleteVersement=this.authService.hasPermission("versements.delete"),this.canDeleteFacture=this.authService.hasPermission("facture-packings.delete")}mobileBreakpoint=768;mobilePwaClass="comptabilite-packing-detail-mobile-pwa";prestataireId=0;prestataireNom="";prestatairePhone="";factures=re([]);loading=!1;totalFacture=0;totalVerse=0;totalRestant=0;versementDialog=!1;selectedFacture=null;versementData={montant:null,date_versement:new Date,mode_paiement:"especes",notes:""};versementSaving=!1;versementSubmitted=!1;modesPaiement=[{label:X.especes,value:"especes"},{label:X.virement,value:"virement"},{label:X.cheque,value:"cheque"},{label:X.mobile_money,value:"mobile_money"}];historiqueDialog=!1;historiqueData=null;historiqueLoading=!1;canReadVersement=!1;canCreateVersement=!1;canDeleteVersement=!1;canDeleteFacture=!1;ngOnInit(){this.syncMobilePwaMode(),this.route.params.subscribe(t=>{this.prestataireId=+t.id||0}),this.route.queryParams.subscribe(t=>{this.prestataireNom=t.prestataire_nom||"",this.prestatairePhone=t.prestataire_phone||""}),this.prestataireId&&this.loadFactures()}ngOnDestroy(){this.document.body.classList.remove(this.mobilePwaClass)}onWindowResize(){this.syncMobilePwaMode()}syncMobilePwaMode(){typeof window>"u"||(window.innerWidth<=this.mobileBreakpoint?this.document.body.classList.add(this.mobilePwaClass):this.document.body.classList.remove(this.mobilePwaClass))}loadFactures(){this.loading=!0,this.factureService.getFactures({prestataire_id:this.prestataireId}).subscribe({next:t=>{let e=(t.data||[]).map(n=>new qe(n));this.factures.set(e),this.calculateTotals(e),this.loading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger les factures",life:3e3}),this.loading=!1}})}calculateTotals(t){this.totalFacture=t.reduce((e,n)=>e+n.montant_total,0),this.totalVerse=t.reduce((e,n)=>e+n.montant_verse,0),this.totalRestant=t.reduce((e,n)=>e+n.montant_restant,0)}openVersement(t){this.selectedFacture=t,this.versementDialog=!0,this.versementSubmitted=!1,this.versementData={montant:t.montant_restant,date_versement:new Date,mode_paiement:"especes",notes:""}}hideVersementDialog(){this.versementDialog=!1,this.selectedFacture=null,this.versementSubmitted=!1}saveVersement(){if(this.versementSubmitted=!0,!this.selectedFacture||!this.versementData.montant||!this.versementData.date_versement||this.versementSaving)return;this.versementSaving=!0;let t={montant:this.versementData.montant,date_versement:this.formatDate(this.versementData.date_versement),mode_paiement:this.versementData.mode_paiement,notes:this.versementData.notes||void 0};this.factureService.createVersement(this.selectedFacture.id,t).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Versement de ${this.formatCurrency(t.montant)} enregistr\xE9`,life:3e3}),this.versementSaving=!1,this.versementDialog=!1,this.loadFactures()},error:e=>{let n=e?.error?.message||"Impossible d'enregistrer le versement";this.messageService.add({severity:"error",summary:"Erreur",detail:n,life:5e3}),this.versementSaving=!1}})}openHistorique(t){this.historiqueDialog=!0,this.historiqueLoading=!0,this.historiqueData=null,this.factureService.getVersements(t.id).subscribe({next:e=>{this.historiqueData=e.data,this.historiqueLoading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger les versements",life:3e3}),this.historiqueLoading=!1,this.historiqueDialog=!1}})}confirmDeleteVersement(t,e){this.confirmationService.confirm({message:`Supprimer le versement de ${this.formatCurrency(e.montant)} ?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Supprimer",rejectLabel:"Annuler",accept:()=>{this.factureService.deleteVersement(t,e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Versement supprim\xE9",life:3e3}),this.historiqueData&&this.openHistorique({id:t}),this.loadFactures()},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de supprimer le versement",life:3e3})}})}})}confirmDeleteFacture(t){this.confirmationService.confirm({message:`Supprimer la facture ${t.reference} ?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Supprimer",rejectLabel:"Annuler",accept:()=>{this.factureService.deleteFacture(t.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Facture supprim\xE9e",life:3e3}),this.loadFactures()},error:e=>{let n=e?.error?.message||"Impossible de supprimer la facture";this.messageService.add({severity:"error",summary:"Erreur",detail:n,life:5e3})}})}})}getStatutSeverity(t){return Ct[t]??"info"}formatDate(t){return t?typeof t=="string"?t:new Date(t).toISOString().split("T")[0]:""}formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t)+" GNF"}formatDateDisplay(t){return t?new Date(t).toLocaleDateString("fr-FR"):""}getReferenceShort(t){return(t||"").replace("FACT-PACK-","")}goBack(){this.router.navigate(["/comptabilite/comptabilite-packing-liste"])}slideoverVisible=!1;slideoverFacture=null;slideoverSaving=!1;openSlideoverPaiement(t){this.slideoverFacture=t,this.slideoverVisible=!0}closeSlideoverPaiement(){this.slideoverVisible=!1,this.slideoverFacture=null}onSlideoverPay(t){if(!this.slideoverFacture||this.slideoverSaving)return;this.slideoverSaving=!0;let e={montant:t.montant,date_versement:this.formatDate(new Date),mode_paiement:t.mode_paiement};this.factureService.createVersement(this.slideoverFacture.id,e).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Versement de ${this.formatCurrency(e.montant)} enregistr\xE9`,life:3e3}),this.slideoverSaving=!1,this.closeSlideoverPaiement(),this.loadFactures()},error:n=>{let s=n?.error?.message||"Impossible d'enregistrer le versement";this.messageService.add({severity:"error",summary:"Erreur",detail:s,life:5e3}),this.slideoverSaving=!1}})}static \u0275fac=function(e){return new(e||r)(y(nt),y(q),y(N),y(F),y(j),y(mt),y(ne))};static \u0275cmp=I({type:r,selectors:[["app-comptabilite-packing-detail"]],hostBindings:function(e,n){e&1&&f("resize",function(){return n.onWindowResize()},oe)},features:[A([F,j])],decls:71,vars:51,consts:[["caption",""],["header",""],["body",""],["emptymessage",""],["footer",""],["position","top-right","appendTo","body",3,"baseZIndex","preventOpenDuplicates"],[1,"detail-page-wrap"],[1,"detail-mobile-header"],["pButton","","pRipple","","icon","pi pi-arrow-left","aria-label","Retour \xE0 la liste",1,"p-button-rounded","p-button-text","detail-mobile-back",3,"click"],[1,"detail-mobile-title-wrap"],[1,"detail-mobile-title"],["class","detail-mobile-subtitle",4,"ngIf"],[1,"detail-header","detail-header--desktop"],[1,"detail-header__left"],["icon","pi pi-arrow-left","severity","secondary","pTooltip","Retour",3,"click","rounded","text"],[1,"detail-header__name"],["class","detail-header__phone",4,"ngIf"],["class","fixed inset-0 z-50",4,"ngIf"],[1,"detail-mobile-scroll"],[1,"stats-bar","mb-6"],[1,"stats-bar__item"],[1,"stats-bar__icon"],[1,"pi","pi-wallet"],[1,"stats-bar__value"],[1,"stats-bar__label"],[1,"stats-bar__divider"],[1,"pi","pi-check-circle"],[1,"pi","pi-arrow-right"],[1,"detail-factures-mobile"],[1,"detail-factures-mobile__title"],["class","detail-factures-mobile__state",4,"ngIf"],["class","detail-factures-mobile__list",4,"ngIf"],[1,"card","tableau-card","detail-tableau-desktop"],["dataKey","id","currentPageReportTemplate","{first} \xE0 {last} sur {totalRecords} factures",3,"value","rows","paginator","rowHover","showCurrentPageReport","rowsPerPageOptions","loading","tableStyle"],["header","Enregistrer un versement",3,"visibleChange","visible","contentStyle","modal","blockScroll","dismissableMask","closeOnEscape"],["class","flex flex-col gap-4",4,"ngIf"],[1,"mt-4"],["header","Historique des versements",3,"visibleChange","visible","contentStyle","modal","blockScroll","dismissableMask","closeOnEscape"],["class","flex items-center justify-center p-12",4,"ngIf"],[1,"detail-mobile-subtitle"],[1,"detail-header__phone"],[1,"pi","pi-phone"],[1,"fixed","inset-0","z-50"],[1,"absolute","inset-0","bg-black/50","animate-fadein",3,"click"],[1,"detail-paiement-slideover","bg-surface-0","dark:bg-surface-900","absolute","top-0","right-0","shadow-xl","w-full","md:w-108","h-full","animate-fadeinright"],[3,"onPay","onClose","facture","saving"],[1,"detail-factures-mobile__state"],[1,"detail-factures-mobile__list"],["class","detail-facture-card",4,"ngFor","ngForOf"],[1,"detail-facture-card"],[1,"detail-facture-card__main"],[1,"detail-facture-card__ref"],[1,"detail-facture-card__date"],[1,"detail-facture-card__rouleaux"],[1,"detail-facture-card__amounts"],[1,"detail-facture-card__total"],[1,"detail-facture-card__verse"],[1,"detail-facture-card__restant"],[1,"detail-facture-card__footer"],[1,"detail-facture-card__badge",3,"ngClass"],[1,"detail-facture-card__actions"],["icon","pi pi-money-bill","severity","secondary","pTooltip","Payer",3,"text","rounded","click",4,"ngIf"],["icon","pi pi-list","severity","info","pTooltip","Historique",3,"text","rounded","click",4,"ngIf"],["icon","pi pi-trash","severity","danger","pTooltip","Supprimer",3,"text","rounded","click",4,"ngIf"],["icon","pi pi-money-bill","severity","secondary","pTooltip","Payer",3,"click","text","rounded"],["icon","pi pi-list","severity","info","pTooltip","Historique",3,"click","text","rounded"],["icon","pi pi-trash","severity","danger","pTooltip","Supprimer",3,"click","text","rounded"],[1,"table-caption"],[1,"table-caption__title"],["pSortableColumn","reference"],[1,"col-header"],["field","reference"],["pSortableColumn","date"],["field","date"],["pSortableColumn","total_rouleaux",1,"text-right"],[1,"col-header","justify-end"],["field","total_rouleaux"],[1,"text-right"],["pSortableColumn","montant_total",1,"text-right"],["field","montant_total"],["pSortableColumn","montant_verse",1,"text-right"],["field","montant_verse"],["pSortableColumn","statut",1,"text-center"],[1,"col-header","justify-center"],["field","statut"],[2,"width","10rem"],[1,"font-semibold"],[1,"cell-secondary","font-semibold"],[1,"text-right","cell-mono","font-semibold"],[1,"text-right","cell-mono","cell-success","font-semibold"],[1,"text-right","cell-mono","cell-bold"],[1,"text-center"],[1,"status-badge",3,"ngClass"],[1,"flex","items-center","justify-end","gap-1"],["icon","pi pi-list","severity","secondary","pTooltip","Historique versements",3,"text","rounded","click",4,"ngIf"],["icon","pi pi-trash","severity","secondary","pTooltip","Supprimer",3,"text","rounded","click",4,"ngIf"],["icon","pi pi-list","severity","secondary","pTooltip","Historique versements",3,"click","text","rounded"],["icon","pi pi-trash","severity","secondary","pTooltip","Supprimer",3,"click","text","rounded"],["colspan","9"],[1,"empty-state"],[1,"pi","pi-inbox"],[1,"flex","flex-col","gap-4"],[1,"preview-summary"],[1,"font-bold"],[1,"preview-summary__sep"],[1,"cell-success"],[1,"font-bold",2,"color","#d97706"],[1,"block","font-bold","mb-2"],["optionLabel","label","optionValue","value","styleClass","w-full","appendTo","body",3,"ngModelChange","ngModel","options"],["suffix"," GNF","locale","fr-FR","inputStyleClass","w-full","styleClass","w-full",3,"ngModelChange","ngModel","min","max","useGrouping"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],["pButton","",3,"click","outlined"],["pButtonLabel",""],["pButton","",3,"click","disabled","loading"],[1,"flex","items-center","justify-center","p-12"],[1,"pi","pi-spin","pi-spinner","text-3xl","text-surface-300"],[1,"font-bold","text-lg"],[1,"cell-bold"],[1,"ml-auto"],[3,"value","rowHover",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"value","rowHover"],["style","width: 4rem",4,"ngIf"],[2,"width","4rem"],[1,"cell-secondary"],[1,"text-right","cell-mono","cell-success","font-bold"],["class","text-center",4,"ngIf"],["label","Fermer",3,"click","text"]],template:function(e,n){if(e&1){let s=v();u(0,"p-toast",5),i(1,"div",6)(2,"header",7)(3,"button",8),f("click",function(){return _(s),g(n.goBack())}),a(),i(4,"div",9)(5,"h1",10),o(6),a(),h(7,di,3,4,"p",11),a()(),i(8,"div",12)(9,"div",13)(10,"p-button",14),f("click",function(){return _(s),g(n.goBack())}),a(),i(11,"div")(12,"h4",15),o(13),a(),h(14,ui,4,4,"span",16),a()(),u(15,"div"),a(),h(16,_i,4,2,"div",17),i(17,"div",18)(18,"div",19)(19,"div",20)(20,"div",21),u(21,"i",22),a(),i(22,"div")(23,"div",23),o(24),a(),i(25,"div",24),o(26,"Total \xE0 payer"),a()()(),u(27,"div",25),i(28,"div",20)(29,"div",21),u(30,"i",26),a(),i(31,"div")(32,"div",23),o(33),a(),i(34,"div",24),o(35,"Total vers\xE9"),a()()(),u(36,"div",25),i(37,"div",20)(38,"div",21),u(39,"i",27),a(),i(40,"div")(41,"div",23),o(42),a(),i(43,"div",24),o(44,"Reste \xE0 payer"),a()()()(),i(45,"div",28)(46,"h3",29),o(47,"Factures"),a(),h(48,gi,2,0,"div",30)(49,fi,2,0,"div",30)(50,xi,2,1,"div",31),a(),i(51,"div",32)(52,"p-table",33),h(53,Pi,3,0,"ng-template",null,0,P)(55,yi,32,0,"ng-template",null,1,P)(57,wi,27,29,"ng-template",null,2,P)(59,Oi,6,0,"ng-template",null,3,P),a()()()(),i(61,"p-dialog",34),S("visibleChange",function(b){return _(s),k(n.versementDialog,b)||(n.versementDialog=b),g(b)}),h(62,Di,30,20,"div",35)(63,Ii,6,3,"ng-template",36,4,P),a(),i(65,"p-dialog",37),S("visibleChange",function(b){return _(s),k(n.historiqueDialog,b)||(n.historiqueDialog=b),g(b)}),h(66,Ti,2,0,"div",38)(67,zi,22,8,"div",35)(68,Ai,1,1,"ng-template",null,4,P),a(),u(70,"p-confirmdialog")}e&2&&(c("baseZIndex",1100)("preventOpenDuplicates",!0),l(6),d(n.prestataireNom||"D\xE9tail"),l(),c("ngIf",n.prestatairePhone),l(3),c("rounded",!0)("text",!0),l(3),d(n.prestataireNom),l(),c("ngIf",n.prestatairePhone),l(2),c("ngIf",n.slideoverVisible),l(8),d(n.formatCurrency(n.totalFacture)),l(9),d(n.formatCurrency(n.totalVerse)),l(9),d(n.formatCurrency(n.totalRestant)),l(6),c("ngIf",n.loading),l(),c("ngIf",!n.loading&&n.factures().length===0),l(),c("ngIf",!n.loading&&n.factures().length),l(2),c("value",n.factures())("rows",10)("paginator",!0)("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",D(44,li))("loading",n.loading)("tableStyle",D(45,si)),l(9),L(D(46,kt)),M("visible",n.versementDialog),c("contentStyle",D(47,St))("modal",!0)("blockScroll",!0)("dismissableMask",!1)("closeOnEscape",!1),l(),c("ngIf",n.selectedFacture),l(3),L(D(48,kt)),M("visible",n.historiqueDialog),c("contentStyle",D(49,St))("modal",!0)("blockScroll",!0)("dismissableMask",!1)("closeOnEscape",!1),l(),c("ngIf",n.historiqueLoading),l(),c("ngIf",n.historiqueData),l(3),L(D(50,ci)))},dependencies:[T,de,ue,W,Ie,Oe,Ee,De,U,G,H,B,R,he,be,K,$,Fe,Te,Ve,fe,ke,Me,Y,we,Be,Re,Ne,Ce,ve,ze,Le,Se,Ae,Pe,xe,ge,Ue,vt,ut,We,Q],styles:["@media (max-width: 768px){.detail-paiement-slideover[_ngcontent-%COMP%]{left:0;right:0;width:100%;min-height:100dvh;min-height:100vh;height:100%;padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);box-sizing:border-box}}@media (max-width: 768px){.detail-page-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100dvh;min-height:100vh;height:100dvh;overflow:hidden;margin:calc(-.25rem - env(safe-area-inset-top)) -.875rem 0;margin-bottom:calc(-.875rem - env(safe-area-inset-bottom));padding:0 .875rem calc(.875rem + env(safe-area-inset-bottom));padding-left:calc(.875rem + env(safe-area-inset-left));padding-right:calc(.875rem + env(safe-area-inset-right))}}@media (max-width: 768px){.detail-mobile-scroll[_ngcontent-%COMP%]{flex:1;min-height:0;overflow-y:auto;-webkit-overflow-scrolling:touch}}.detail-mobile-header[_ngcontent-%COMP%]{display:none}.detail-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:var(--p-surface-0);border-radius:14px;padding:1.25rem 1.75rem;margin-bottom:1.5rem;box-shadow:0 1px 3px #0000000a}.detail-header__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.detail-header__name[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:700;color:var(--p-surface-800)}.detail-header__phone[_ngcontent-%COMP%]{font-size:.85rem;color:var(--p-surface-400);display:flex;align-items:center;gap:.35rem;margin-top:.15rem}.stats-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--p-surface-0);border-radius:14px;padding:1.25rem 2rem;box-shadow:0 1px 3px #0000000a}.stats-bar__item[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:1rem;padding:.5rem 1.5rem}.stats-bar__divider[_ngcontent-%COMP%]{width:1px;height:40px;background:var(--p-surface-200);flex-shrink:0}.stats-bar__icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:1.1rem;background:var(--p-surface-100);color:var(--p-surface-600)}.stats-bar__value[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:var(--p-surface-900);letter-spacing:-.02em;line-height:1.2}.stats-bar__label[_ngcontent-%COMP%]{font-size:.78rem;color:var(--p-surface-400);margin-top:2px}.tableau-card[_ngcontent-%COMP%]{border-radius:14px!important;box-shadow:0 1px 3px #0000000a!important;overflow:hidden}.table-caption__title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:var(--p-surface-700)}.col-header[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.03em;color:var(--p-surface-500)}.cell-secondary[_ngcontent-%COMP%]{color:var(--p-surface-500);font-size:.9rem}.cell-mono[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums;font-size:.9rem}.cell-success[_ngcontent-%COMP%]{color:#059669}.cell-bold[_ngcontent-%COMP%]{font-weight:600;color:var(--p-surface-800)}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.78rem;font-weight:600}.status-badge--danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.status-badge--warn[_ngcontent-%COMP%]{background:#fffbeb;color:#d97706}.status-badge--success[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669}.status-badge--secondary[_ngcontent-%COMP%]{background:var(--p-surface-100);color:var(--p-surface-500)}.preview-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.25rem;background:var(--p-surface-50);border-radius:10px;font-size:.9rem;color:var(--p-surface-600);flex-wrap:wrap}.preview-summary__sep[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%;background:var(--p-surface-300)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;padding:3rem 0;color:var(--p-surface-300)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem 1.25rem}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1.1rem 1.25rem}.detail-factures-mobile[_ngcontent-%COMP%]{display:none}.detail-factures-mobile__title[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:1rem;font-weight:700;color:var(--p-surface-800)}.detail-factures-mobile__state[_ngcontent-%COMP%]{text-align:center;padding:1.5rem 1rem;color:var(--p-surface-500);font-size:.9rem}.detail-factures-mobile__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.detail-facture-card[_ngcontent-%COMP%]{background:var(--p-surface-0);border:1px solid var(--p-surface-200);border-radius:12px;padding:1rem 1.25rem;display:flex;flex-direction:column;gap:.75rem}.detail-facture-card__main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:.5rem 1rem}.detail-facture-card__ref[_ngcontent-%COMP%]{font-weight:700;font-size:.95rem;color:var(--p-surface-900)}.detail-facture-card__date[_ngcontent-%COMP%]{font-size:.9rem;color:var(--p-surface-500)}.detail-facture-card__rouleaux[_ngcontent-%COMP%]{font-size:.85rem;color:var(--p-surface-500)}.detail-facture-card__amounts[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem 1rem;font-size:.9rem}.detail-facture-card__total[_ngcontent-%COMP%]{font-weight:700;color:var(--p-surface-800)}.detail-facture-card__verse[_ngcontent-%COMP%], .detail-facture-card__restant[_ngcontent-%COMP%]{color:var(--p-surface-600);font-weight:500}.detail-facture-card__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;flex-wrap:wrap;padding-top:.5rem;border-top:1px solid var(--p-surface-100)}.detail-facture-card__badge[_ngcontent-%COMP%]{font-size:.72rem;font-weight:600;padding:.2rem .5rem;border-radius:999px}.detail-facture-card__badge--danger[_ngcontent-%COMP%], .detail-facture-card__badge--warn[_ngcontent-%COMP%], .detail-facture-card__badge--success[_ngcontent-%COMP%], .detail-facture-card__badge--secondary[_ngcontent-%COMP%]{background:var(--p-surface-100);color:var(--p-surface-600)}.detail-facture-card__actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.detail-facture-card__actions[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{color:var(--p-surface-500)!important}@media (max-width: 768px){.detail-mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:calc(.5rem + env(safe-area-inset-top)) .5rem .6rem .25rem;margin:0 -.875rem;margin-left:calc(-.875rem - env(safe-area-inset-left));margin-right:calc(-.875rem - env(safe-area-inset-right));padding-left:calc(.875rem + env(safe-area-inset-left));padding-right:calc(.875rem + env(safe-area-inset-right));flex-shrink:0;background:var(--p-surface-0);border-bottom:1px solid var(--p-surface-200);position:sticky;top:0;z-index:25}.app-dark[_nghost-%COMP%]   .detail-mobile-header[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-mobile-header[_ngcontent-%COMP%]{background:var(--p-surface-800);border-bottom-color:var(--p-surface-700)}.detail-mobile-back[_ngcontent-%COMP%]{color:var(--p-primary-600)!important}.detail-mobile-title-wrap[_ngcontent-%COMP%]{flex:1;min-width:0}.detail-mobile-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin:0;color:var(--p-surface-900);line-height:1.2}.detail-mobile-subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-surface-500);margin:.15rem 0 0}.detail-header--desktop[_ngcontent-%COMP%]{display:none!important}.detail-factures-mobile[_ngcontent-%COMP%]{display:block}.detail-tableau-desktop[_ngcontent-%COMP%]{display:none!important}.stats-bar[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;padding:1rem}.stats-bar__item[_ngcontent-%COMP%]{padding:.75rem 1rem;width:100%}.stats-bar__divider[_ngcontent-%COMP%]{width:100%;height:1px}}.app-dark[_nghost-%COMP%]   .detail-mobile-title[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-mobile-title[_ngcontent-%COMP%]{color:var(--p-surface-0)}.app-dark[_nghost-%COMP%]   .detail-mobile-subtitle[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-mobile-subtitle[_ngcontent-%COMP%]{color:var(--p-surface-400)}.app-dark[_nghost-%COMP%]   .detail-facture-card[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card[_ngcontent-%COMP%]{background:var(--p-surface-800);border-color:var(--p-surface-600)}.app-dark[_nghost-%COMP%]   .detail-facture-card__ref[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__ref[_ngcontent-%COMP%], .app-dark[_nghost-%COMP%]   .detail-facture-card__total[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__total[_ngcontent-%COMP%]{color:var(--p-surface-100)}.app-dark[_nghost-%COMP%]   .detail-facture-card__footer[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__footer[_ngcontent-%COMP%]{border-top-color:var(--p-surface-600)}.app-dark[_nghost-%COMP%]   .detail-factures-mobile__title[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-factures-mobile__title[_ngcontent-%COMP%]{color:var(--p-surface-200)}.app-dark[_nghost-%COMP%]   .detail-header[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-header[_ngcontent-%COMP%]{background:var(--p-surface-800)}.app-dark[_nghost-%COMP%]   .detail-header__name[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-header__name[_ngcontent-%COMP%]{color:var(--p-surface-0)}.app-dark[_nghost-%COMP%]   .stats-bar[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar[_ngcontent-%COMP%]{background:var(--p-surface-800);box-shadow:0 1px 3px #00000026}.app-dark[_nghost-%COMP%]   .stats-bar__divider[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar__divider[_ngcontent-%COMP%]{background:var(--p-surface-600)}.app-dark[_nghost-%COMP%]   .stats-bar__icon[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar__icon[_ngcontent-%COMP%]{background:var(--p-surface-700);color:var(--p-surface-400)}.app-dark[_nghost-%COMP%]   .stats-bar__value[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .stats-bar__value[_ngcontent-%COMP%]{color:var(--p-surface-0)}.app-dark[_nghost-%COMP%]   .detail-facture-card__verse[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__verse[_ngcontent-%COMP%], .app-dark[_nghost-%COMP%]   .detail-facture-card__restant[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__restant[_ngcontent-%COMP%]{color:var(--p-surface-400)}.app-dark[_nghost-%COMP%]   .detail-facture-card__badge--danger[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__badge--danger[_ngcontent-%COMP%], .app-dark[_nghost-%COMP%]   .detail-facture-card__badge--warn[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__badge--warn[_ngcontent-%COMP%], .app-dark[_nghost-%COMP%]   .detail-facture-card__badge--success[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__badge--success[_ngcontent-%COMP%], .app-dark[_nghost-%COMP%]   .detail-facture-card__badge--secondary[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__badge--secondary[_ngcontent-%COMP%]{background:var(--p-surface-700);color:var(--p-surface-300)}.app-dark[_nghost-%COMP%]   .detail-facture-card__actions[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .detail-facture-card__actions[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{color:var(--p-surface-400)!important}.app-dark[_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .app-dark[_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%]{color:var(--p-surface-100)}.app-dark[_nghost-%COMP%]   .table-caption__title[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .table-caption__title[_ngcontent-%COMP%]{color:var(--p-surface-200)}.app-dark[_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%]{background:#dc26261f}.app-dark[_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%]{background:#d977061f}.app-dark[_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%]{background:#0596691f}.app-dark[_nghost-%COMP%]   .status-badge--secondary[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--secondary[_ngcontent-%COMP%]{background:var(--p-surface-700)}.app-dark[_nghost-%COMP%]   .preview-summary[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .preview-summary[_ngcontent-%COMP%]{background:var(--p-surface-700)}"]})};var Un=[{path:"",component:ie,canActivate:[ye],data:{permissions:["facture-packings.read"]}},{path:"comptabilite-packing-liste",component:ie,canActivate:[ye],data:{permissions:["facture-packings.read"]}},{path:"comptabilite-packing-detail/:id",component:$e,canActivate:[ye],data:{permissions:["facture-packings.read"]}},{path:"**",redirectTo:"/notfound"}];export{Un as default};
