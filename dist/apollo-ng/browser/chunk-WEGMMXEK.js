import{a as Fe,b as De}from"./chunk-LFPYXO44.js";import{b as Se}from"./chunk-MQRFWSAZ.js";import"./chunk-4T3UXQLE.js";import{a as ye,b as we}from"./chunk-KYONH4Z7.js";import{a as he,d as ve,e as ke,k as Ee}from"./chunk-5OQ2YKCO.js";import"./chunk-EPKB2NOO.js";import{a as A}from"./chunk-ND4R2U6I.js";import"./chunk-D6GHGGHE.js";import"./chunk-2JJZYWJZ.js";import"./chunk-6D57XO4D.js";import"./chunk-6KDRPASW.js";import"./chunk-EP3YWI2Y.js";import"./chunk-SZBX3NDY.js";import"./chunk-OOHQQYFS.js";import{a as Ce,b as Pe}from"./chunk-GCTRRDXC.js";import"./chunk-KL2GTUAH.js";import{d as re}from"./chunk-EFWXUZ2L.js";import"./chunk-XTBLLWCW.js";import"./chunk-UX2ORES7.js";import"./chunk-Q3TOKHIX.js";import{b as be}from"./chunk-H7BPPC6A.js";import"./chunk-3HK4LEG7.js";import"./chunk-TV7G5U4M.js";import{c as q,d as xe}from"./chunk-EGUL2QML.js";import"./chunk-XFRV2ODC.js";import"./chunk-VA7GDT7A.js";import"./chunk-CBQGLCGU.js";import"./chunk-I3IWLKIW.js";import"./chunk-DHSWO6FJ.js";import{a as ue,b as ce,c as pe,d as ge}from"./chunk-HTAYFB7Z.js";import{a as oe,b as le}from"./chunk-2B7VQJS6.js";import{d as O,g as G,k as j}from"./chunk-64TATO5O.js";import{a as fe,b as _e}from"./chunk-7DSJRHKD.js";import"./chunk-UQZNRTDQ.js";import"./chunk-B7FWBV5J.js";import{b as se,d as me}from"./chunk-M5YMP7G2.js";import"./chunk-BODZH67C.js";import"./chunk-7UZYWCAJ.js";import"./chunk-NG3S2PV5.js";import{i as de}from"./chunk-TD6BQ4FR.js";import"./chunk-AXKZCRGQ.js";import{la as N,pa as W}from"./chunk-GAWVI3MB.js";import{i as ie,k as ne,q as B,r as ae,u as L}from"./chunk-K5JLGCJ3.js";import"./chunk-4O3FVBGX.js";import{$ as f,$b as x,Ab as Y,Bb as Z,Gb as P,Kb as g,Lb as b,Ma as l,Ra as U,Ub as $,Wb as ee,Xa as T,Zb as o,_b as F,aa as _,ab as C,ac as w,bc as k,cc as E,db as X,dc as y,fc as te,gb as p,gc as V,qc as v,rc as R,sc as S,vc as M,wb as m,xb as n,yb as a,zb as u}from"./chunk-WHEAM6WH.js";import"./chunk-GAL4ENT6.js";var h=class{id;contact_id;contact;date_debut;date_fin;nombre_rouleaux;prix_rouleau;montant=0;statut;created_at;updated_at;constructor(i){i&&(Object.assign(this,i),i.date_debut&&typeof i.date_debut=="string"&&(this.date_debut=new Date(i.date_debut)),i.date_fin&&typeof i.date_fin=="string"&&(this.date_fin=new Date(i.date_fin)),!i.montant&&i.nombre_rouleaux&&i.prix_rouleau&&(this.montant=i.nombre_rouleaux*i.prix_rouleau))}calculateMontant(){return this.nombre_rouleaux&&this.prix_rouleau?(this.montant=this.nombre_rouleaux*this.prix_rouleau,this.montant):this.montant||0}calculatePrixRouleau(){return this.montant&&this.nombre_rouleaux&&this.nombre_rouleaux>0?(this.prix_rouleau=this.montant/this.nombre_rouleaux,this.prix_rouleau):this.prix_rouleau||0}};var D=class r{transform(i,t="GNF",e=!0){if(i==null||i==="")return e?"0 GNF":"0";let d=typeof i=="string"?parseFloat(i):i;if(isNaN(d))return e?"0 GNF":"0";let c=Math.round(d).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"  ");return e?`${c} ${t==="EUR"?"\u20AC":"GNF"}`:c}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=X({name:"money",type:r,pure:!0})};var Te=()=>[5,10,20,50],Ve=()=>["contact.nom","contact.prenom","contact.phone"],Re=()=>({"min-width":"60rem"});function Be(r,i){if(r&1){let t=P();n(0,"div",21)(1,"p-iconfield",22),u(2,"p-inputicon",23),n(3,"input",24),g("input",function(d){f(t);let s=b(),c=$(28);return _(s.onGlobalFilter(c,d))}),a()(),n(4,"span",25),o(5),a()()}if(r&2){let t=b();l(5),x(" Total: ",t.packings.length," packing(s) ")}}function Le(r,i){r&1&&(n(0,"tr")(1,"th",26),o(2," Contact "),u(3,"p-sortIcon",27),a(),n(4,"th",28),o(5," T\xE9l\xE9phone "),u(6,"p-sortIcon",29),a(),n(7,"th",30),o(8," Date d\xE9but "),u(9,"p-sortIcon",31),a(),n(10,"th",32),o(11," Date fin "),u(12,"p-sortIcon",33),a(),n(13,"th",34),o(14," Rouleaux "),u(15,"p-sortIcon",35),a(),n(16,"th",36),o(17," Montant "),u(18,"p-sortIcon",37),a(),n(19,"th",38),o(20," Statut "),u(21,"p-sortIcon",39),a(),n(22,"th",40),o(23," Actions "),a()())}function Ne(r,i){if(r&1){let t=P();n(0,"tr")(1,"td")(2,"div",41)(3,"div",42),u(4,"i",43),a(),n(5,"div")(6,"div",44),o(7),a(),n(8,"div",45),o(9),a()()()(),n(10,"td")(11,"span",46),o(12),a()(),n(13,"td")(14,"span"),o(15),v(16,"date"),a()(),n(17,"td")(18,"span"),o(19),v(20,"date"),a()(),n(21,"td",47)(22,"span",48),o(23),a()(),n(24,"td",47)(25,"span",49),o(26),v(27,"money"),a()(),n(28,"td",47),u(29,"p-tag",50),a(),n(30,"td",47)(31,"div",51)(32,"button",52),g("click",function(){let d=f(t).$implicit,s=b();return _(s.viewDetails(d))}),a(),n(33,"button",53),g("click",function(d){let s=f(t).$implicit,c=b();return _(c.deletePacking(s,d))}),a()()()()}if(r&2){let t=i.$implicit,e=b();l(7),w(" ",t.contact==null?null:t.contact.prenom," ",t.contact==null?null:t.contact.nom," "),l(2),w(" ",t.contact==null?null:t.contact.ville," - ",t.contact==null?null:t.contact.quartier," "),l(3),x(" ",t.contact==null?null:t.contact.phone," "),l(3),F(S(16,11,t.date_debut,"dd/MM/yyyy")),l(4),F(S(20,14,t.date_fin,"dd/MM/yyyy")),l(4),x(" ",t.nombre_rouleaux," "),l(3),x(" ",R(27,17,t.montant)," "),l(3),m("value",e.getStatutLabel(t.statut))("severity",e.getStatutSeverity(t.statut))}}function We(r,i){if(r&1){let t=P();n(0,"tr")(1,"td",54)(2,"div",55),u(3,"i",56),n(4,"p",57),o(5," Aucun packing trouv\xE9 "),a(),n(6,"button",58),g("click",function(){f(t);let d=b();return _(d.navigateToNew())}),a()()()()}}var I=class r{constructor(i,t,e){this.router=i;this.messageService=t;this.confirmationService=e}packings=[];allPackings=[];loading=!1;searchValue="";dateDebutFilter=null;dateFinFilter=null;statutFilter=null;statutOptions=[{label:"Tous",value:""},{label:"En cours",value:"en_cours"},{label:"Termin\xE9",value:"termine"},{label:"Annul\xE9",value:"annule"}];ngOnInit(){this.loadPackings()}loadPackings(){this.loading=!0,setTimeout(()=>{this.allPackings=this.getMockPackings(),this.applyFilters(),this.loading=!1},500)}applyFilters(){let i=[...this.allPackings];(this.dateDebutFilter||this.dateFinFilter)&&(i=i.filter(t=>{let e=new Date(t.date_debut),d=new Date(t.date_fin),s=!0,c=!0;return this.dateDebutFilter&&(s=e>=this.dateDebutFilter),this.dateFinFilter&&(c=d<=this.dateFinFilter),s&&c})),this.statutFilter&&this.statutFilter!==""&&(i=i.filter(t=>t.statut===this.statutFilter)),this.packings=i}onFilterChange(){this.applyFilters()}resetFilters(){this.dateDebutFilter=null,this.dateFinFilter=null,this.statutFilter=null,this.searchValue="",this.applyFilters()}getMockPackings(){return[new h({id:"1",contact_id:"1",contact:{id:"1",nom:"Diallo",prenom:"Mamadou",phone:"+224 622 00 00 01",ville:"Conakry",quartier:"Kaloum"},date_debut:new Date("2025-01-20"),date_fin:new Date("2025-01-25"),nombre_rouleaux:150,prix_rouleau:5e4,montant:75e5,statut:"en_cours",created_at:"2025-01-18T10:00:00"}),new h({id:"2",contact_id:"2",contact:{id:"2",nom:"Bah",prenom:"Fatoumata",phone:"+224 622 00 00 02",ville:"Conakry",quartier:"Matam"},date_debut:new Date("2025-01-15"),date_fin:new Date("2025-01-18"),nombre_rouleaux:200,prix_rouleau:45e3,montant:9e6,statut:"termine",created_at:"2025-01-14T14:30:00"}),new h({id:"3",contact_id:"3",contact:{id:"3",nom:"Camara",prenom:"Ibrahima",phone:"+224 622 00 00 03",ville:"Conakry",quartier:"Ratoma"},date_debut:new Date("2025-01-22"),date_fin:new Date("2025-01-30"),nombre_rouleaux:300,prix_rouleau:48e3,montant:144e5,statut:"en_cours",created_at:"2025-01-18T09:15:00"}),new h({id:"4",contact_id:"4",contact:{id:"4",nom:"Sylla",prenom:"Aissatou",phone:"+224 622 00 00 04",ville:"Conakry",quartier:"Dixinn"},date_debut:new Date("2025-01-10"),date_fin:new Date("2025-01-15"),nombre_rouleaux:120,prix_rouleau:52e3,montant:624e4,statut:"termine",created_at:"2025-01-09T08:30:00"}),new h({id:"5",contact_id:"5",contact:{id:"5",nom:"Soumah",prenom:"Mohamed",phone:"+224 622 00 00 05",ville:"Conakry",quartier:"Kaporo"},date_debut:new Date("2025-01-25"),date_fin:new Date("2025-02-05"),nombre_rouleaux:250,prix_rouleau:47e3,montant:1175e4,statut:"en_cours",created_at:"2025-01-18T11:45:00"})]}navigateToNew(){this.router.navigate(["/packings/packings-new"])}navigateToEdit(i){this.router.navigate(["/packings/packings-edit/",i.id])}viewDetails(i){this.router.navigate(["/packings/packings-edit/",i.id])}deletePacking(i,t){this.confirmationService.confirm({target:t.target,message:`\xCAtes-vous s\xFBr de vouloir supprimer ce packing de ${i.contact?.prenom} ${i.contact?.nom} ?`,header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Oui, supprimer",rejectLabel:"Annuler",acceptButtonStyleClass:"p-button-danger",accept:()=>{this.confirmDelete(i)}})}confirmDelete(i){this.loading=!0,setTimeout(()=>{this.allPackings=this.allPackings.filter(t=>t.id!==i.id),this.applyFilters(),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Packing supprim\xE9 avec succ\xE8s",life:3e3}),this.loading=!1},500)}getStatutSeverity(i){switch(i){case"en_cours":return"info";case"termine":return"success";case"annule":return"danger";default:return"warn"}}getStatutLabel(i){switch(i){case"en_cours":return"En cours";case"termine":return"Termin\xE9";case"annule":return"Annul\xE9";default:return"Inconnu"}}calculateDays(i){if(!i.date_debut||!i.date_fin)return 0;let t=new Date(i.date_debut),e=new Date(i.date_fin),d=Math.abs(e.getTime()-t.getTime());return Math.ceil(d/(1e3*60*60*24))+1}onGlobalFilter(i,t){i.filterGlobal(t.target.value,"contains")}handleError(i,t){this.messageService.add({severity:"error",summary:"Erreur",detail:i,life:5e3}),console.error("Erreur:",t)}static \u0275fac=function(t){return new(t||r)(T(re),T(W),T(N))};static \u0275cmp=C({type:r,selectors:[["app-packing-liste"]],features:[te([W,N])],decls:37,vars:20,consts:[["dt",""],["caption",""],["header",""],["body",""],["emptymessage",""],[1,"card"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4","mb-6"],[1,"text-3xl","font-bold","text-surface-900","dark:text-surface-0","mb-2"],[1,"text-surface-600","dark:text-surface-400"],[1,"flex","gap-2"],["pButton","","pRipple","","label","Nouveau Packing","icon","pi pi-plus",3,"click"],[1,"mb-4","p-4","bg-surface-50","dark:bg-surface-800","rounded-lg"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","md:col-span-3"],[1,"font-medium","text-surface-900","dark:text-surface-0","mb-2","block","text-sm"],["dateFormat","dd/mm/yy","placeholder","Filtrer par date d\xE9but","fluid","",3,"ngModelChange","onSelect","onClear","ngModel","showIcon","showClear"],["dateFormat","dd/mm/yy","placeholder","Filtrer par date fin","fluid","",3,"ngModelChange","onSelect","onClear","ngModel","showIcon","showClear"],["optionLabel","label","optionValue","value","placeholder","Filtrer par statut","fluid","",3,"ngModelChange","onChange","ngModel","options","showClear"],[1,"col-span-12","md:col-span-3","flex","items-end"],["pButton","","pRipple","","label","R\xE9initialiser","icon","pi pi-filter-slash","severity","secondary","outlined","",1,"w-full",3,"click"],["currentPageReportTemplate","Affichage de {first} \xE0 {last} sur {totalRecords} packings","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","loading","paginator","rows","rowsPerPageOptions","showCurrentPageReport","globalFilterFields","tableStyle"],[1,"flex","items-center","justify-between"],["iconPosition","left"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Rechercher...",1,"w-full","md:w-80",3,"input"],[1,"text-surface-600","dark:text-surface-400","text-sm"],["pSortableColumn","contact.nom"],["field","contact.nom"],["pSortableColumn","contact.phone"],["field","contact.phone"],["pSortableColumn","date_debut"],["field","date_debut"],["pSortableColumn","date_fin"],["field","date_fin"],["pSortableColumn","nombre_rouleaux",1,"text-center"],["field","nombre_rouleaux"],["pSortableColumn","montant",1,"text-center"],["field","montant"],["pSortableColumn","statut",1,"text-center"],["field","statut"],[1,"text-center",2,"width","120px"],[1,"flex","items-center","gap-2"],[1,"flex","items-center","justify-center","w-10","h-10","rounded-full","bg-primary/10"],[1,"pi","pi-user","text-primary"],[1,"font-medium","text-surface-900","dark:text-surface-0"],[1,"text-sm","text-surface-500","dark:text-surface-400"],[1,"text-surface-700","dark:text-surface-300"],[1,"text-center"],[1,"font-bold","text-primary","text-lg"],[1,"font-bold","text-surface-900","dark:text-surface-0","text-base"],[3,"value","severity"],[1,"flex","items-center","justify-center","gap-2"],["pButton","","pRipple","","icon","pi pi-eye","severity","info","pTooltip","Voir les d\xE9tails","tooltipPosition","top",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","severity","danger","pTooltip","Supprimer","tooltipPosition","top",1,"p-button-rounded","p-button-text",3,"click"],["colspan","8"],[1,"flex","flex-col","items-center","justify-center","py-12"],[1,"pi","pi-inbox","text-6xl","text-surface-300","dark:text-surface-600","mb-4"],[1,"text-surface-500","dark:text-surface-400","text-lg","mb-4"],["pButton","","pRipple","","label","Cr\xE9er un packing","icon","pi pi-plus",3,"click"]],template:function(t,e){if(t&1){let d=P();u(0,"p-toast")(1,"p-confirmDialog"),n(2,"div",5)(3,"div",6)(4,"div")(5,"h1",7),o(6," Gestion des Packings "),a(),n(7,"p",8),o(8," Liste de tous les packings enregistr\xE9s "),a()(),n(9,"div",9)(10,"button",10),g("click",function(){return f(d),_(e.navigateToNew())}),a()()(),n(11,"div",11)(12,"div",12)(13,"div",13)(14,"label",14),o(15," Date de d\xE9but "),a(),n(16,"p-datepicker",15),y("ngModelChange",function(c){return f(d),E(e.dateDebutFilter,c)||(e.dateDebutFilter=c),_(c)}),g("onSelect",function(){return f(d),_(e.onFilterChange())})("onClear",function(){return f(d),_(e.onFilterChange())}),a()(),n(17,"div",13)(18,"label",14),o(19," Date de fin "),a(),n(20,"p-datepicker",16),y("ngModelChange",function(c){return f(d),E(e.dateFinFilter,c)||(e.dateFinFilter=c),_(c)}),g("onSelect",function(){return f(d),_(e.onFilterChange())})("onClear",function(){return f(d),_(e.onFilterChange())}),a()(),n(21,"div",13)(22,"label",14),o(23," Statut "),a(),n(24,"p-select",17),y("ngModelChange",function(c){return f(d),E(e.statutFilter,c)||(e.statutFilter=c),_(c)}),g("onChange",function(){return f(d),_(e.onFilterChange())}),a()(),n(25,"div",18)(26,"button",19),g("click",function(){return f(d),_(e.resetFilters())}),a()()()(),n(27,"p-table",20,0),p(29,Be,6,1,"ng-template",null,1,M)(31,Le,24,0,"ng-template",null,2,M)(33,Ne,34,19,"ng-template",null,3,M)(35,We,7,0,"ng-template",null,4,M),a()()}t&2&&(l(16),k("ngModel",e.dateDebutFilter),m("showIcon",!0)("showClear",!0),l(4),k("ngModel",e.dateFinFilter),m("showIcon",!0)("showClear",!0),l(4),k("ngModel",e.statutFilter),m("options",e.statutOptions)("showClear",!0),l(3),m("value",e.packings)("loading",e.loading)("paginator",!0)("rows",10)("rowsPerPageOptions",V(17,Te))("showCurrentPageReport",!0)("globalFilterFields",V(18,Ve))("tableStyle",V(19,Re)))},dependencies:[L,j,O,G,Ee,he,ve,ke,me,se,we,ye,le,oe,ce,ue,ge,pe,Pe,Ce,Se,De,Fe,A,_e,fe,xe,q,B,D],styles:["[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background-color:var(--surface-50);color:var(--surface-700);font-weight:600;padding:1rem}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-50)}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.75rem 1rem}[_nghost-%COMP%]     .dark .p-datatable .p-datatable-thead>tr>th{background-color:var(--surface-800);color:var(--surface-200)}[_nghost-%COMP%]     .dark .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-800)}"]})};function Oe(r,i){if(r&1){let t=P();n(0,"button",37),g("click",function(){f(t);let d=b();return _(d.enableEditing())}),u(1,"i",38),o(2," Modifier "),a()}}function Ge(r,i){r&1&&(n(0,"span",39),o(1,"*"),a())}function je(r,i){if(r&1&&(n(0,"div",28)(1,"div",40),u(2,"i",41),a(),n(3,"div")(4,"div",42),o(5),a(),n(6,"div",43),o(7),a()()()),r&2){let t=i.$implicit;l(5),w("",t.prenom," ",t.nom),l(2),F(t.phone)}}function Ae(r,i){if(r&1&&(n(0,"div",45),u(1,"i",41),n(2,"span"),o(3),a()()),r&2){let t=b().$implicit;l(3),w("",t.prenom," ",t.nom)}}function qe(r,i){if(r&1&&p(0,Ae,4,2,"div",44),r&2){let t=i.$implicit;m("ngIf",t)}}function ze(r,i){r&1&&(n(0,"small",39),o(1," Veuillez s\xE9lectionner un machiniste "),a())}function Qe(r,i){r&1&&(n(0,"span",39),o(1,"*"),a())}function Ke(r,i){if(r&1&&(n(0,"small",46),o(1),a()),r&2){let t=b();l(),x(" ",t.dateDebutError," ")}}function He(r,i){r&1&&(n(0,"span",39),o(1,"*"),a())}function Ue(r,i){if(r&1&&(n(0,"small",46),o(1),a()),r&2){let t=b();l(),x(" ",t.dateFinError," ")}}function Je(r,i){if(r&1&&(n(0,"small",47),o(1),a()),r&2){let t=b();l(),x(" ",t.dateRangeError," ")}}function Xe(r,i){r&1&&(n(0,"span",39),o(1,"*"),a())}function Ye(r,i){r&1&&(n(0,"small",39),o(1," Le nombre de rouleaux doit \xEAtre sup\xE9rieur \xE0 0 "),a())}function Ze(r,i){r&1&&(n(0,"span",39),o(1,"*"),a())}function $e(r,i){r&1&&(n(0,"small",39),o(1," Le prix unitaire doit \xEAtre sup\xE9rieur \xE0 0 "),a())}function et(r,i){if(r&1&&(n(0,"div",48),u(1,"i",49),o(2),v(3,"number"),a()),r&2){let t=b();l(2),w(" ",t.model.nombre_rouleaux," rouleaux \xD7 ",S(3,2,t.model.prix_rouleau,"1.0-0")," GNF ")}}function tt(r,i){r&1&&(n(0,"div",50),u(1,"i",51),o(2," Entrez la quantit\xE9 et le prix unitaire pour calculer le montant "),a())}function it(r,i){if(r&1&&(n(0,"div",52)(1,"div",53)(2,"div",54),u(3,"i",55),n(4,"span",56),o(5,"R\xE9capitulatif"),a()(),n(6,"div",57)(7,"div",58)(8,"div",59),u(9,"i",60),n(10,"div",61)(11,"div",31),o(12,"Contact"),a(),n(13,"div",62),o(14),a(),n(15,"div",63),o(16),a()()(),n(17,"div",59),u(18,"i",64),n(19,"div",61)(20,"div",31),o(21,"P\xE9riode"),a(),n(22,"div",65),o(23),v(24,"date"),v(25,"date"),a(),n(26,"div",63),o(27),a()()()(),n(28,"div",58)(29,"div",59),u(30,"i",66),n(31,"div",61)(32,"div",31),o(33,"Quantit\xE9"),a(),n(34,"div",67),o(35),a()()(),n(36,"div",59),u(37,"i",68),n(38,"div",61)(39,"div",31),o(40,"Prix unitaire"),a(),n(41,"div",65),o(42),v(43,"number"),a()()(),n(44,"div",69),u(45,"i",70),n(46,"div",61)(47,"div",31),o(48,"Montant total"),a(),n(49,"div",71),o(50),v(51,"number"),a()()()()()()()),r&2){let t,e,d=b();l(14),w(" ",(t=d.getSelectedContact())==null?null:t.prenom," ",(t=d.getSelectedContact())==null?null:t.nom," "),l(2),x(" ",(e=d.getSelectedContact())==null?null:e.phone," "),l(7),w(" ",S(24,9,d.model.date_debut,"dd/MM/yyyy")," - ",S(25,12,d.model.date_fin,"dd/MM/yyyy")," "),l(4),x(" ",d.calculateDays()," jour(s) "),l(8),x(" ",d.model.nombre_rouleaux," rouleaux "),l(7),x(" ",S(43,15,d.model.prix_rouleau,"1.0-0")," GNF "),l(8),x(" ",S(51,18,d.model.montant,"1.0-0")," GNF ")}}function nt(r,i){if(r&1&&(n(0,"span"),o(1),a()),r&2){let t=b(2);l(),F(t.mode==="create"?"Enregistrer":"Sauvegarder")}}function at(r,i){r&1&&(n(0,"span"),o(1,"Enregistrement..."),a())}function rt(r,i){if(r&1){let t=P();n(0,"div",72)(1,"button",73),g("click",function(){f(t);let d=b();return _(d.onSubmit())}),u(2,"i",74),p(3,nt,2,1,"span",75)(4,at,2,0,"span",75),a(),n(5,"button",76),g("click",function(){f(t);let d=b();return _(d.mode==="create"?d.onCancel():d.cancelEditing())}),u(6,"i",77),o(7," Annuler "),a()()}if(r&2){let t=b();l(),m("disabled",!t.isValid()||t.loading),l(),ee("mr-2",!t.loading),m("ngClass",t.loading?"pi-spin pi-spinner":"pi-check"),l(),m("ngIf",!t.loading),l(),m("ngIf",t.loading),l(),m("disabled",t.loading)}}var Q=class r{mode="create";initialData=null;contacts=[];loading=!1;submitForm=new U;cancel=new U;submitted=!1;isEditing=!1;model=new h;minDate=new Date;dateDebutError=null;dateFinError=null;dateRangeError=null;ngOnInit(){this.model=this.initialData?new h(this.initialData):new h,this.mode==="create"&&(this.isEditing=!0)}onPrixOrQuantityChange(){this.model.nombre_rouleaux&&this.model.prix_rouleau&&this.model.calculateMontant()}validateDateDebut(){if(!this.model.date_debut)return this.dateDebutError="Date de d\xE9but obligatoire.",!1;let i=new Date(this.model.date_debut),t=new Date;return t.setHours(0,0,0,0),i<t?(this.dateDebutError="La date de d\xE9but ne peut pas \xEAtre dans le pass\xE9.",!1):(this.dateDebutError=null,!0)}validateDateFin(){return this.model.date_fin?(this.dateFinError=null,!0):(this.dateFinError="Date de fin obligatoire.",!1)}validateDateRange(){if(!this.model.date_debut||!this.model.date_fin)return!0;let i=new Date(this.model.date_debut);return new Date(this.model.date_fin)<i?(this.dateRangeError="La date de fin doit \xEAtre sup\xE9rieure ou \xE9gale \xE0 la date de d\xE9but.",!1):(this.dateRangeError=null,!0)}onDateDebutChange(){this.submitted&&(this.validateDateDebut(),this.validateDateRange())}onDateFinChange(){this.submitted&&(this.validateDateFin(),this.validateDateRange())}onDateBlur(i){i==="debut"&&this.model.date_debut?this.validateDateDebut():i==="fin"&&this.model.date_fin&&this.validateDateFin(),this.validateDateRange()}getContactLabel(i){return`${i.prenom} ${i.nom} - ${i.phone}`}getSelectedContact(){return this.contacts.find(i=>i.id===this.model.contact_id)}calculateDays(){if(!this.model.date_debut||!this.model.date_fin)return 0;let i=new Date(this.model.date_debut),t=new Date(this.model.date_fin),e=Math.abs(t.getTime()-i.getTime());return Math.ceil(e/(1e3*60*60*24))+1}isValid(){return!(this.model.contact_id&&this.model.date_debut&&this.model.date_fin&&this.model.nombre_rouleaux&&this.model.nombre_rouleaux>0&&this.model.prix_rouleau&&this.model.prix_rouleau>0)?!1:this.validateDateDebut()&&this.validateDateFin()&&this.validateDateRange()}enableEditing(){this.isEditing=!0}cancelEditing(){this.isEditing=!1,this.submitted=!1,this.dateDebutError=null,this.dateFinError=null,this.dateRangeError=null,this.model=this.initialData?new h(this.initialData):new h}resetForm(){this.submitted=!1,this.dateDebutError=null,this.dateFinError=null,this.dateRangeError=null,this.model=new h}onSubmit(){this.submitted=!0,this.isValid()&&(this.model.calculateMontant(),this.model.contact=this.getSelectedContact(),this.submitForm.emit(this.model))}onCancel(){this.cancel.emit()}get fieldsDisabled(){return this.mode==="edit"&&!this.isEditing||this.loading}hasErrors(){return!!(this.dateDebutError||this.dateFinError||this.dateRangeError)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=C({type:r,selectors:[["app-packing-from"]],inputs:{mode:"mode",initialData:"initialData",contacts:"contacts",loading:"loading"},outputs:{submitForm:"submitForm",cancel:"cancel"},decls:62,vars:42,consts:[[1,"card"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-surface-900","dark:text-surface-0","text-xl","font-bold"],["pButton","","pRipple","","severity","warn","class","w-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","lg:col-span-2"],[1,"col-span-12","lg:col-span-10"],[1,"mb-6","col-span-12"],["for","contact",1,"font-medium","text-surface-900","dark:text-surface-0","mb-2","block"],["class","text-red-500",4,"ngIf"],["id","contact","optionLabel","nom","optionValue","id","placeholder","S\xE9lectionnez un machiniste","filterBy","nom,prenom,phone","fluid","",3,"ngModelChange","ngModel","options","filter","showClear","disabled"],["pTemplate","item"],["pTemplate","selectedItem"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-6"],["for","dateDebut",1,"font-medium","text-surface-900","dark:text-surface-0","mb-2","block"],["id","dateDebut","dateFormat","dd/mm/yy","placeholder","S\xE9lectionnez la date","fluid","",3,"ngModelChange","onSelect","onBlur","ngModel","showIcon","minDate","disabled"],["class","text-red-500 block mt-1",4,"ngIf"],["for","dateFin",1,"font-medium","text-surface-900","dark:text-surface-0","mb-2","block"],["id","dateFin","dateFormat","dd/mm/yy","placeholder","S\xE9lectionnez la date","fluid","",3,"ngModelChange","onSelect","onBlur","ngModel","showIcon","minDate","disabled"],["class","text-red-500 block mt-2",4,"ngIf"],[1,"mb-6","col-span-12","grid","grid-cols-12","gap-3"],["for","nombreRouleaux",1,"font-medium","text-surface-900","dark:text-surface-0","mb-2","block"],["id","nombreRouleaux","placeholder","Entrez le nombre","mode","decimal","fluid","",3,"ngModelChange","ngModel","showButtons","min","max","useGrouping","disabled"],["for","prixRouleau",1,"font-medium","text-surface-900","dark:text-surface-0","mb-2","block"],["id","prixRouleau","mode","currency","currency","GNF","locale","fr-GN","placeholder","Prix par rouleau","fluid","",3,"ngModelChange","ngModel","min","disabled"],[1,"bg-gradient-to-r","from-primary/10","to-primary/5","border-l-4","border-primary","rounded-lg","p-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","rounded-full","bg-primary/20","flex","items-center","justify-center"],[1,"pi","pi-money-bill","text-primary","text-xl"],[1,"text-xs","text-surface-600","dark:text-surface-400","mb-1"],[1,"text-3xl","font-bold","text-primary"],["class","text-sm text-surface-600 dark:text-surface-300 mt-3 flex items-center gap-2",4,"ngIf"],["class","text-sm text-surface-500 dark:text-surface-400 mt-3 italic",4,"ngIf"],["class","col-span-12 mb-6",4,"ngIf"],["class","col-span-12 flex gap-2 mb-4",4,"ngIf"],["pButton","","pRipple","","severity","warn",1,"w-auto",3,"click"],[1,"pi","pi-pencil","mr-2"],[1,"text-red-500"],[1,"flex","items-center","justify-center","w-10","h-10","rounded-full","bg-primary/10"],[1,"pi","pi-user","text-primary"],[1,"font-medium"],[1,"text-sm","text-surface-500"],["class","flex items-center gap-2",4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"text-red-500","block","mt-1"],[1,"text-red-500","block","mt-2"],[1,"text-sm","text-surface-600","dark:text-surface-300","mt-3","flex","items-center","gap-2"],[1,"pi","pi-calculator","text-surface-500"],[1,"text-sm","text-surface-500","dark:text-surface-400","mt-3","italic"],[1,"pi","pi-info-circle","mr-2"],[1,"col-span-12","mb-6"],[1,"bg-blue-50","dark:bg-blue-900/20","border","border-blue-200","dark:border-blue-800","rounded-lg","p-5"],[1,"flex","items-center","gap-2","mb-4"],[1,"pi","pi-info-circle","text-blue-600","dark:text-blue-400","text-lg"],[1,"font-bold","text-blue-900","dark:text-blue-100","text-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"space-y-3"],[1,"flex","items-start","gap-3"],[1,"pi","pi-user","text-blue-600","mt-1"],[1,"flex-1"],[1,"font-semibold","text-surface-900","dark:text-surface-0"],[1,"text-sm","text-surface-500","dark:text-surface-400"],[1,"pi","pi-calendar","text-blue-600","mt-1"],[1,"font-medium","text-surface-900","dark:text-surface-0"],[1,"pi","pi-box","text-blue-600","mt-1"],[1,"font-bold","text-primary","text-xl"],[1,"pi","pi-tag","text-blue-600","mt-1"],[1,"flex","items-start","gap-3","pt-3","border-t","border-blue-200","dark:border-blue-700"],[1,"pi","pi-wallet","text-blue-600","mt-1"],[1,"font-bold","text-primary","text-2xl"],[1,"col-span-12","flex","gap-2","mb-4"],["pButton","","pRipple","",1,"w-auto",3,"click","disabled"],[1,"pi",3,"ngClass"],[4,"ngIf"],["pButton","","pRipple","","severity","secondary",1,"w-auto",3,"click","disabled"],[1,"pi","pi-times","mr-2"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),o(3),a(),p(4,Oe,3,0,"button",3),a(),n(5,"div",4),u(6,"div",5),n(7,"div",6)(8,"div",4)(9,"div",7)(10,"label",8),o(11," Contact "),p(12,Ge,2,0,"span",9),o(13," (Machiniste) "),a(),n(14,"p-select",10),y("ngModelChange",function(s){return E(e.model.contact_id,s)||(e.model.contact_id=s),s}),p(15,je,8,3,"ng-template",11)(16,qe,1,1,"ng-template",12),a(),p(17,ze,2,0,"small",9),a(),n(18,"div",7)(19,"div",13)(20,"div",14)(21,"label",15),o(22," Date de d\xE9but "),p(23,Qe,2,0,"span",9),a(),n(24,"p-datepicker",16),y("ngModelChange",function(s){return E(e.model.date_debut,s)||(e.model.date_debut=s),s}),g("onSelect",function(){return e.onDateDebutChange()})("onBlur",function(){return e.onDateBlur("debut")}),a(),p(25,Ke,2,1,"small",17),a(),n(26,"div",14)(27,"label",18),o(28," Date de fin "),p(29,He,2,0,"span",9),a(),n(30,"p-datepicker",19),y("ngModelChange",function(s){return E(e.model.date_fin,s)||(e.model.date_fin=s),s}),g("onSelect",function(){return e.onDateFinChange()})("onBlur",function(){return e.onDateBlur("fin")}),a(),p(31,Ue,2,1,"small",17),a()(),p(32,Je,2,1,"small",20),a(),n(33,"div",21)(34,"div",14)(35,"label",22),o(36," Nombre de rouleaux "),p(37,Xe,2,0,"span",9),a(),n(38,"p-inputnumber",23),y("ngModelChange",function(s){return E(e.model.nombre_rouleaux,s)||(e.model.nombre_rouleaux=s),s}),g("ngModelChange",function(){return e.onPrixOrQuantityChange()}),a(),p(39,Ye,2,0,"small",9),a(),n(40,"div",14)(41,"label",24),o(42," Prix unitaire (GNF) "),p(43,Ze,2,0,"span",9),a(),n(44,"p-inputnumber",25),y("ngModelChange",function(s){return E(e.model.prix_rouleau,s)||(e.model.prix_rouleau=s),s}),g("ngModelChange",function(){return e.onPrixOrQuantityChange()}),a(),p(45,$e,2,0,"small",9),a()(),n(46,"div",7)(47,"div",26)(48,"div",27)(49,"div",28)(50,"div",29),u(51,"i",30),a(),n(52,"div")(53,"div",31),o(54," Montant total "),a(),n(55,"div",32),o(56),v(57,"money"),a()()()(),p(58,et,4,5,"div",33)(59,tt,3,0,"div",34),a()(),p(60,it,52,21,"div",35)(61,rt,8,7,"div",36),a()()()()),t&2&&(l(3),x(" ",e.mode==="create"?"Nouveau Packing":"D\xE9tails du Packing"," "),l(),m("ngIf",e.mode==="edit"&&!e.isEditing),l(8),m("ngIf",e.isEditing),l(2),k("ngModel",e.model.contact_id),m("options",e.contacts)("filter",!0)("showClear",!0)("disabled",e.fieldsDisabled),l(3),m("ngIf",e.submitted&&!e.model.contact_id&&e.isEditing),l(6),m("ngIf",e.isEditing),l(),k("ngModel",e.model.date_debut),m("showIcon",!0)("minDate",e.minDate)("disabled",e.fieldsDisabled),l(),m("ngIf",e.submitted&&e.dateDebutError&&e.isEditing),l(4),m("ngIf",e.isEditing),l(),k("ngModel",e.model.date_fin),m("showIcon",!0)("minDate",e.model.date_debut||e.minDate)("disabled",e.fieldsDisabled),l(),m("ngIf",e.submitted&&e.dateFinError&&e.isEditing),l(),m("ngIf",e.submitted&&e.dateRangeError&&e.isEditing),l(5),m("ngIf",e.isEditing),l(),k("ngModel",e.model.nombre_rouleaux),m("showButtons",!0)("min",1)("max",9999)("useGrouping",!1)("disabled",e.fieldsDisabled),l(),m("ngIf",e.submitted&&(!e.model.nombre_rouleaux||e.model.nombre_rouleaux<1)&&e.isEditing),l(4),m("ngIf",e.isEditing),l(),k("ngModel",e.model.prix_rouleau),m("min",0)("disabled",e.fieldsDisabled),l(),m("ngIf",e.submitted&&(!e.model.prix_rouleau||e.model.prix_rouleau<=0)&&e.isEditing),l(11),x(" ",R(57,40,e.model.montant)," "),l(2),m("ngIf",e.model.nombre_rouleaux&&e.model.prix_rouleau),l(),m("ngIf",!e.model.nombre_rouleaux||!e.model.prix_rouleau),l(),m("ngIf",e.model.contact_id&&e.model.date_debut&&e.model.date_fin&&e.model.nombre_rouleaux&&e.model.prix_rouleau&&!e.hasErrors()),l(),m("ngIf",e.isEditing))},dependencies:[L,ie,ne,j,O,G,A,q,be,de,ae,B,D],encapsulation:2})};var K=class r{contacts=[{id:"1",nom:"Diallo",prenom:"Mamadou",phone:"+224 621 23 45 67",ville:"Conakry",quartier:"Kaloum"}];loading=!1;onSubmit(i){this.loading=!0,console.log("Packing \xE0 cr\xE9er:",i),setTimeout(()=>{this.loading=!1,alert("Packing cr\xE9\xE9 avec succ\xE8s !")},1500)}onCancel(){console.log("Annulation")}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=C({type:r,selectors:[["app-packing-new"]],decls:1,vars:2,consts:[[3,"submitForm","mode","loading"]],template:function(t,e){t&1&&(n(0,"app-packing-from",0),g("submitForm",function(s){return e.onSubmit(s)}),a()),t&2&&m("mode","create")("loading",e.loading)},dependencies:[Q],encapsulation:2})};var H=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=C({type:r,selectors:[["app-packing-edit"]],decls:2,vars:0,template:function(t,e){t&1&&(Y(0,"p"),o(1,"packing-edit works!"),Z())},encapsulation:2})};var li=[{path:"",component:I},{path:"packings",component:I},{path:"packings-new",component:K},{path:"packings-edit/:id",component:H},{path:"**",redirectTo:"/notfound"}];export{li as default};
