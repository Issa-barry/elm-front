import {
  AutoCompleteModule
} from "./chunk-A6J3NOVY.js";
import "./chunk-A2P4OWTV.js";
import {
  ParametresService
} from "./chunk-NQ4DNQ2K.js";
import {
  Skeleton,
  SkeletonModule
} from "./chunk-IML3OPD2.js";
import {
  MoneyPipe
} from "./chunk-W7IE5BS4.js";
import {
  Toolbar,
  ToolbarModule
} from "./chunk-GZ7D5YLH.js";
import {
  PrestataireService
} from "./chunk-L372NRZT.js";
import {
  InputGroupAddon
} from "./chunk-6Y6LUQCJ.js";
import {
  InputGroup
} from "./chunk-CJRBLZMU.js";
import {
  TextareaModule
} from "./chunk-4UOI4QYW.js";
import {
  PhoneFormatPipe
} from "./chunk-I52ZMC4J.js";
import {
  Menu,
  MenuModule
} from "./chunk-HBQ7KAGJ.js";
import {
  ConfirmDialog,
  ConfirmDialogModule
} from "./chunk-G5PVWGBM.js";
import {
  Dialog,
  DialogModule
} from "./chunk-A2LLWIIX.js";
import {
  Toast,
  ToastModule
} from "./chunk-MIKKBFN3.js";
import "./chunk-IAPVHBD4.js";
import {
  authorizationGuard
} from "./chunk-YMUHY675.js";
import {
  AuthService,
  environment
} from "./chunk-66GARPBB.js";
import "./chunk-RTHJZPEL.js";
import {
  Router
} from "./chunk-FHW6CQ6W.js";
import "./chunk-MT6PN7RC.js";
import {
  SortIcon,
  SortableColumn,
  Table,
  TableModule
} from "./chunk-QPQPF4QG.js";
import "./chunk-5SLVYV4D.js";
import {
  DatePicker,
  DatePickerModule
} from "./chunk-3C4VBMIP.js";
import "./chunk-XSYQJ4W6.js";
import "./chunk-XMHI6SP7.js";
import {
  InputNumber,
  InputNumberModule
} from "./chunk-3RHV3JZZ.js";
import "./chunk-M77IAYSM.js";
import {
  Select,
  SelectModule
} from "./chunk-F2DIVMZG.js";
import "./chunk-JMIE4XN5.js";
import "./chunk-YVCVOBBF.js";
import {
  TagModule
} from "./chunk-V7LXRUI7.js";
import "./chunk-5KB4S2LF.js";
import "./chunk-TRKKYFQF.js";
import "./chunk-5ATNZ2IU.js";
import "./chunk-CJAMEXZR.js";
import "./chunk-CF4ML4KQ.js";
import "./chunk-46OYJGUM.js";
import "./chunk-TITTMCJA.js";
import "./chunk-TEXAILZL.js";
import "./chunk-2UZZQ3O5.js";
import "./chunk-YUZALO6D.js";
import "./chunk-YWX4RJZN.js";
import {
  IconField,
  IconFieldModule,
  InputIcon,
  InputIconModule
} from "./chunk-BXX2KJCE.js";
import {
  InputText,
  InputTextModule
} from "./chunk-VMVXPPNB.js";
import {
  DefaultValueAccessor,
  FormsModule,
  NgControlStatus,
  NgModel
} from "./chunk-VJUJTGB6.js";
import {
  Tooltip,
  TooltipModule
} from "./chunk-3ISV5J4X.js";
import "./chunk-SJAYAKU2.js";
import {
  HttpClient,
  HttpParams
} from "./chunk-R3LUQ3Y4.js";
import "./chunk-CJMBUE5J.js";
import "./chunk-IDACGSZU.js";
import {
  Button,
  ButtonDirective,
  ButtonIcon,
  ButtonLabel,
  ButtonModule
} from "./chunk-V2JIX33N.js";
import "./chunk-SRAUJRPD.js";
import {
  Ripple,
  RippleModule
} from "./chunk-WSCE5RX7.js";
import "./chunk-DHPXHGGE.js";
import {
  ConfirmationService,
  MessageService,
  PrimeTemplate
} from "./chunk-JRTE2WST.js";
import {
  CommonModule,
  DatePipe,
  DecimalPipe,
  NgClass,
  NgForOf,
  NgIf
} from "./chunk-A6EA4TT7.js";
import "./chunk-WWG27WRZ.js";
import {
  Component,
  DOCUMENT,
  EventEmitter,
  HostListener,
  Inject,
  Injectable,
  Input,
  Output,
  ViewChild,
  forkJoin,
  setClassMetadata,
  signal,
  ɵsetClassDebugInfo,
  ɵɵProvidersFeature,
  ɵɵadvance,
  ɵɵclassProp,
  ɵɵdefineComponent,
  ɵɵdefineInjectable,
  ɵɵdirectiveInject,
  ɵɵdomElementEnd,
  ɵɵdomElementStart,
  ɵɵelement,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵinject,
  ɵɵlistener,
  ɵɵloadQuery,
  ɵɵnextContext,
  ɵɵpipe,
  ɵɵpipeBind1,
  ɵɵpipeBind2,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵpureFunction3,
  ɵɵqueryRefresh,
  ɵɵreference,
  ɵɵresetView,
  ɵɵresolveWindow,
  ɵɵrestoreView,
  ɵɵstyleMap,
  ɵɵstyleProp,
  ɵɵtemplate,
  ɵɵtemplateRefExtractor,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtextInterpolate2,
  ɵɵtextInterpolate3,
  ɵɵtwoWayBindingSet,
  ɵɵtwoWayListener,
  ɵɵtwoWayProperty,
  ɵɵviewQuery
} from "./chunk-FZZISKXM.js";
import {
  __spreadProps,
  __spreadValues
} from "./chunk-4MWRP73S.js";

// src/app/models/packing.model.ts
var PACKING_STATUT_LABELS = {
  a_valider: "\xC0 valider",
  valide: "Valid\xE9",
  annule: "Annul\xE9"
};
var PACKING_STATUT_SEVERITY = {
  a_valider: "warn",
  valide: "success",
  annule: "danger"
};

// src/app/pages/packings/packing-mobile-form/packing-mobile-form.ts
function PackingMobileForm_div_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 27);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" ", ctx_r0.selectedPrestataire.prenom, " ", ctx_r0.selectedPrestataire.nom, " ");
  }
}
function PackingMobileForm_p_skeleton_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-skeleton", 28);
  }
}
function PackingMobileForm_p_select_16_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 32);
    \u0275\u0275element(1, "i", 33);
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const prestataire_r3 = ctx.$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate3("", prestataire_r3.prenom, " ", prestataire_r3.nom, " \xB7 ", prestataire_r3.phone);
  }
}
function PackingMobileForm_p_select_16_ng_template_2_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 32);
    \u0275\u0275element(1, "i", 33);
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const prestataire_r4 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2("", prestataire_r4.prenom, " ", prestataire_r4.nom);
  }
}
function PackingMobileForm_p_select_16_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, PackingMobileForm_p_select_16_ng_template_2_div_0_Template, 4, 2, "div", 34);
  }
  if (rf & 2) {
    const prestataire_r4 = ctx.$implicit;
    \u0275\u0275property("ngIf", prestataire_r4);
  }
}
function PackingMobileForm_p_select_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-select", 29);
    \u0275\u0275twoWayListener("ngModelChange", function PackingMobileForm_p_select_16_Template_p_select_ngModelChange_0_listener($event) {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r0.selectedPrestataire, $event) || (ctx_r0.selectedPrestataire = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275template(1, PackingMobileForm_p_select_16_ng_template_1_Template, 4, 3, "ng-template", 30)(2, PackingMobileForm_p_select_16_ng_template_2_Template, 1, 1, "ng-template", 31);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275twoWayProperty("ngModel", ctx_r0.selectedPrestataire);
    \u0275\u0275property("options", ctx_r0.prestataires)("filter", true);
  }
}
function PackingMobileForm_small_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 35);
    \u0275\u0275text(1, "Le prestataire est requis.");
    \u0275\u0275elementEnd();
  }
}
function PackingMobileForm_p_skeleton_32_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-skeleton", 28);
  }
}
function PackingMobileForm_p_inputnumber_33_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-inputnumber", 17);
    \u0275\u0275twoWayListener("ngModelChange", function PackingMobileForm_p_inputnumber_33_Template_p_inputnumber_ngModelChange_0_listener($event) {
      \u0275\u0275restoreView(_r5);
      const ctx_r0 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r0.packing.prix_par_rouleau, $event) || (ctx_r0.packing.prix_par_rouleau = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("onInput", function PackingMobileForm_p_inputnumber_33_Template_p_inputnumber_onInput_0_listener() {
      \u0275\u0275restoreView(_r5);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.calculateMontant());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275twoWayProperty("ngModel", ctx_r0.packing.prix_par_rouleau);
    \u0275\u0275property("min", 0);
  }
}
var PackingMobileForm = class _PackingMobileForm {
  packing = {};
  prestataires = [];
  selectedPrestataire = null;
  saving = false;
  dialogLoading = false;
  submitted = false;
  onSaveEvent = new EventEmitter();
  onClose = new EventEmitter();
  selectedPrestataireChange = new EventEmitter();
  statuses = [
    { label: "\xC0 valider", value: "a_valider" },
    { label: "Valid\xE9", value: "valide" },
    { label: "Annul\xE9", value: "annule" }
  ];
  calculateMontant() {
    if (this.packing.nb_rouleaux && this.packing.prix_par_rouleau) {
      this.packing.montant = this.packing.nb_rouleaux * this.packing.prix_par_rouleau;
    }
  }
  onSave() {
    if (!this.selectedPrestataire)
      return;
    this.onSaveEvent.emit({
      packing: this.packing,
      prestataire: this.selectedPrestataire
    });
  }
  formatCurrency(value) {
    return new Intl.NumberFormat("fr-FR", {
      style: "decimal",
      minimumFractionDigits: 0
    }).format(value) + " GNF";
  }
  static \u0275fac = function PackingMobileForm_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PackingMobileForm)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _PackingMobileForm, selectors: [["app-packing-mobile-form"]], inputs: { packing: "packing", prestataires: "prestataires", selectedPrestataire: "selectedPrestataire", saving: "saving", dialogLoading: "dialogLoading", submitted: "submitted" }, outputs: { onSaveEvent: "onSaveEvent", onClose: "onClose", selectedPrestataireChange: "selectedPrestataireChange" }, decls: 48, vars: 19, consts: [[1, "packing-mobile-panel", "flex", "flex-col", "h-full", "bg-surface-0", "dark:bg-surface-900"], [1, "packing-mobile-header", "w-full", "flex-shrink-0", "p-6", "border-b", "border-surface-200", "dark:border-surface-700", "flex", "justify-start", "items-center"], [1, "flex-1"], [1, "text-surface-900", "dark:text-surface-0", "text-xl", "font-medium", "leading-tight"], ["class", "text-surface-500 dark:text-surface-400 text-sm font-normal mt-1", 4, "ngIf"], ["pButton", "", 1, "w-10", "h-10", 3, "click", "text", "rounded"], ["pButtonIcon", "", 1, "pi", "pi-times"], [1, "packing-mobile-body", "flex-1", "min-h-0", "w-full", "p-6", "flex", "flex-col", "justify-start", "items-start", "gap-6", "overflow-y-auto"], [1, "w-full", "flex", "flex-col", "gap-3"], [1, "text-surface-500", "dark:text-surface-400", "text-xs", "font-semibold", "uppercase", "tracking-wider"], [1, "w-full", "flex", "flex-col", "gap-1"], [1, "text-sm", "font-medium", "text-surface-700", "dark:text-surface-300"], ["height", "2.75rem", "styleClass", "w-full", 4, "ngIf"], ["optionLabel", "nom", "filterBy", "nom,prenom,phone", "placeholder", "S\xE9lectionner un prestataire", "styleClass", "w-full", 3, "ngModel", "options", "filter", "ngModelChange", 4, "ngIf"], ["class", "text-red-500 text-xs", 4, "ngIf"], [1, "w-full", "flex", "flex-col", "gap-4"], ["dateFormat", "dd/mm/yy", "inputStyleClass", "w-full", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "showIcon"], ["styleClass", "w-full", 3, "ngModelChange", "onInput", "ngModel", "min"], ["styleClass", "w-full", 3, "ngModel", "min", "ngModelChange", "onInput", 4, "ngIf"], ["optionLabel", "label", "optionValue", "value", "placeholder", "S\xE9lectionner un statut", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "options"], [1, "w-full", "p-4", "bg-surface-50", "dark:bg-surface-800", "rounded-xl", "flex", "items-center", "justify-between"], [1, "text-surface-900", "dark:text-surface-0", "text-base", "font-semibold"], [1, "text-lg", "font-bold", "leading-tight", 2, "color", "var(--p-primary-600)"], [1, "packing-mobile-footer", "w-full", "border-t", "border-surface-200", "dark:border-surface-700", "p-6", "flex", "flex-col", "gap-3", "flex-shrink-0"], ["pButton", "", 1, "w-full", "py-3", 3, "click", "disabled", "loading"], ["pButtonIcon", "", 1, "pi", "pi-check", "mr-2"], ["pButtonLabel", ""], [1, "text-surface-500", "dark:text-surface-400", "text-sm", "font-normal", "mt-1"], ["height", "2.75rem", "styleClass", "w-full"], ["optionLabel", "nom", "filterBy", "nom,prenom,phone", "placeholder", "S\xE9lectionner un prestataire", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "options", "filter"], ["pTemplate", "item"], ["pTemplate", "selectedItem"], [1, "flex", "items-center", "gap-2"], [1, "pi", "pi-user", "text-primary"], ["class", "flex items-center gap-2", 4, "ngIf"], [1, "text-red-500", "text-xs"]], template: function PackingMobileForm_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "div", 1)(2, "div", 2)(3, "div", 3);
      \u0275\u0275text(4);
      \u0275\u0275elementEnd();
      \u0275\u0275template(5, PackingMobileForm_div_5_Template, 2, 2, "div", 4);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(6, "button", 5);
      \u0275\u0275listener("click", function PackingMobileForm_Template_button_click_6_listener() {
        return ctx.onClose.emit();
      });
      \u0275\u0275element(7, "i", 6);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(8, "div", 7)(9, "div", 8)(10, "div", 9);
      \u0275\u0275text(11, "Prestataire");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(12, "div", 10)(13, "label", 11);
      \u0275\u0275text(14, "Machiniste");
      \u0275\u0275elementEnd();
      \u0275\u0275template(15, PackingMobileForm_p_skeleton_15_Template, 1, 0, "p-skeleton", 12)(16, PackingMobileForm_p_select_16_Template, 3, 3, "p-select", 13)(17, PackingMobileForm_small_17_Template, 2, 0, "small", 14);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(18, "div", 15)(19, "div", 9);
      \u0275\u0275text(20, "Informations");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(21, "div", 10)(22, "label", 11);
      \u0275\u0275text(23, "Date");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(24, "p-datepicker", 16);
      \u0275\u0275twoWayListener("ngModelChange", function PackingMobileForm_Template_p_datepicker_ngModelChange_24_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.packing.date, $event) || (ctx.packing.date = $event);
        return $event;
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(25, "div", 10)(26, "label", 11);
      \u0275\u0275text(27, "Nombre de rouleaux");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(28, "p-inputnumber", 17);
      \u0275\u0275twoWayListener("ngModelChange", function PackingMobileForm_Template_p_inputnumber_ngModelChange_28_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.packing.nb_rouleaux, $event) || (ctx.packing.nb_rouleaux = $event);
        return $event;
      });
      \u0275\u0275listener("onInput", function PackingMobileForm_Template_p_inputnumber_onInput_28_listener() {
        return ctx.calculateMontant();
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(29, "div", 10)(30, "label", 11);
      \u0275\u0275text(31, "Prix / rouleau (GNF)");
      \u0275\u0275elementEnd();
      \u0275\u0275template(32, PackingMobileForm_p_skeleton_32_Template, 1, 0, "p-skeleton", 12)(33, PackingMobileForm_p_inputnumber_33_Template, 1, 2, "p-inputnumber", 18);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(34, "div", 10)(35, "label", 11);
      \u0275\u0275text(36, "Statut");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(37, "p-select", 19);
      \u0275\u0275twoWayListener("ngModelChange", function PackingMobileForm_Template_p_select_ngModelChange_37_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.packing.statut, $event) || (ctx.packing.statut = $event);
        return $event;
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(38, "div", 20)(39, "span", 21);
      \u0275\u0275text(40, "Montant total");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(41, "span", 22);
      \u0275\u0275text(42);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(43, "div", 23)(44, "button", 24);
      \u0275\u0275listener("click", function PackingMobileForm_Template_button_click_44_listener() {
        return ctx.onSave();
      });
      \u0275\u0275element(45, "i", 25);
      \u0275\u0275elementStart(46, "span", 26);
      \u0275\u0275text(47);
      \u0275\u0275elementEnd()()()();
    }
    if (rf & 2) {
      \u0275\u0275advance(4);
      \u0275\u0275textInterpolate1(" ", (ctx.packing == null ? null : ctx.packing.id) ? "D\xE9tails du packing" : "Nouveau packing", " ");
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", (ctx.packing == null ? null : ctx.packing.id) && ctx.selectedPrestataire);
      \u0275\u0275advance();
      \u0275\u0275property("text", true)("rounded", true);
      \u0275\u0275advance(9);
      \u0275\u0275property("ngIf", ctx.dialogLoading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.dialogLoading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.submitted && !ctx.selectedPrestataire && !ctx.dialogLoading);
      \u0275\u0275advance(7);
      \u0275\u0275twoWayProperty("ngModel", ctx.packing.date);
      \u0275\u0275property("showIcon", true);
      \u0275\u0275advance(4);
      \u0275\u0275twoWayProperty("ngModel", ctx.packing.nb_rouleaux);
      \u0275\u0275property("min", 0);
      \u0275\u0275advance(4);
      \u0275\u0275property("ngIf", ctx.dialogLoading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.dialogLoading);
      \u0275\u0275advance(4);
      \u0275\u0275twoWayProperty("ngModel", ctx.packing.statut);
      \u0275\u0275property("options", ctx.statuses);
      \u0275\u0275advance(5);
      \u0275\u0275textInterpolate(ctx.formatCurrency(ctx.packing.montant || 0));
      \u0275\u0275advance(2);
      \u0275\u0275property("disabled", ctx.saving || ctx.dialogLoading || !ctx.selectedPrestataire)("loading", ctx.saving);
      \u0275\u0275advance(3);
      \u0275\u0275textInterpolate((ctx.packing == null ? null : ctx.packing.id) ? "Sauvegarder" : "Enregistrer");
    }
  }, dependencies: [CommonModule, NgIf, FormsModule, NgControlStatus, NgModel, ButtonModule, ButtonDirective, ButtonLabel, ButtonIcon, PrimeTemplate, InputNumberModule, InputNumber, SelectModule, Select, DatePickerModule, DatePicker, SkeletonModule, Skeleton], styles: ["\n\n[_nghost-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 0;\n}\n.packing-mobile-panel[_ngcontent-%COMP%] {\n  min-height: 0;\n  overflow: hidden;\n}\n@media (max-width: 768px) {\n  [_nghost-%COMP%] {\n    width: 100%;\n    max-width: 100%;\n    overflow: hidden;\n  }\n  .packing-mobile-panel[_ngcontent-%COMP%] {\n    width: 100%;\n    max-width: 100%;\n  }\n  .packing-mobile-footer[_ngcontent-%COMP%] {\n    padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));\n  }\n}\n/*# sourceMappingURL=packing-mobile-form.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PackingMobileForm, [{
    type: Component,
    args: [{ selector: "app-packing-mobile-form", standalone: true, imports: [
      CommonModule,
      FormsModule,
      ButtonModule,
      InputNumberModule,
      SelectModule,
      DatePickerModule,
      SkeletonModule
    ], template: `<div class="packing-mobile-panel flex flex-col h-full bg-surface-0 dark:bg-surface-900">
    <!-- Header -->
    <div class="packing-mobile-header w-full flex-shrink-0 p-6 border-b border-surface-200 dark:border-surface-700 flex justify-start items-center">
        <div class="flex-1">
            <div class="text-surface-900 dark:text-surface-0 text-xl font-medium leading-tight">
                {{ packing?.id ? 'D\xE9tails du packing' : 'Nouveau packing' }}
            </div>
            <div class="text-surface-500 dark:text-surface-400 text-sm font-normal mt-1" *ngIf="packing?.id && selectedPrestataire">
                {{ selectedPrestataire.prenom }} {{ selectedPrestataire.nom }}
            </div>
        </div>
        <button pButton [text]="true" [rounded]="true" class="w-10 h-10" (click)="onClose.emit()">
            <i pButtonIcon class="pi pi-times"></i>
        </button>
    </div>

    <!-- Body (scrollable) -->
    <div class="packing-mobile-body flex-1 min-h-0 w-full p-6 flex flex-col justify-start items-start gap-6 overflow-y-auto">
        <!-- Section Prestataire -->
        <div class="w-full flex flex-col gap-3">
            <div class="text-surface-500 dark:text-surface-400 text-xs font-semibold uppercase tracking-wider">Prestataire</div>
            <div class="w-full flex flex-col gap-1">
                <label class="text-sm font-medium text-surface-700 dark:text-surface-300">Machiniste</label>
                <p-skeleton *ngIf="dialogLoading" height="2.75rem" styleClass="w-full" />
                <p-select
                    *ngIf="!dialogLoading"
                    [(ngModel)]="selectedPrestataire"
                    [options]="prestataires"
                    optionLabel="nom"
                    [filter]="true"
                    filterBy="nom,prenom,phone"
                    placeholder="S\xE9lectionner un prestataire"
                    styleClass="w-full"
                >
                    <ng-template let-prestataire pTemplate="item">
                        <div class="flex items-center gap-2">
                            <i class="pi pi-user text-primary"></i>
                            <span>{{ prestataire.prenom }} {{ prestataire.nom }} \xB7 {{ prestataire.phone }}</span>
                        </div>
                    </ng-template>
                    <ng-template let-prestataire pTemplate="selectedItem">
                        <div class="flex items-center gap-2" *ngIf="prestataire">
                            <i class="pi pi-user text-primary"></i>
                            <span>{{ prestataire.prenom }} {{ prestataire.nom }}</span>
                        </div>
                    </ng-template>
                </p-select>
                <small class="text-red-500 text-xs" *ngIf="submitted && !selectedPrestataire && !dialogLoading">Le prestataire est requis.</small>
            </div>
        </div>

        <!-- Section Informations -->
        <div class="w-full flex flex-col gap-4">
            <div class="text-surface-500 dark:text-surface-400 text-xs font-semibold uppercase tracking-wider">Informations</div>

            <!-- Date -->
            <div class="w-full flex flex-col gap-1">
                <label class="text-sm font-medium text-surface-700 dark:text-surface-300">Date</label>
                <p-datepicker
                    [(ngModel)]="packing.date"
                    dateFormat="dd/mm/yy"
                    [showIcon]="true"
                    inputStyleClass="w-full"
                    styleClass="w-full"
                />
            </div>

            <!-- Nombre de rouleaux -->
            <div class="w-full flex flex-col gap-1">
                <label class="text-sm font-medium text-surface-700 dark:text-surface-300">Nombre de rouleaux</label>
                <p-inputnumber
                    [(ngModel)]="packing.nb_rouleaux"
                    (onInput)="calculateMontant()"
                    [min]="0"
                    styleClass="w-full"
                />
            </div>

            <!-- Prix / rouleau -->
            <div class="w-full flex flex-col gap-1">
                <label class="text-sm font-medium text-surface-700 dark:text-surface-300">Prix / rouleau (GNF)</label>
                <p-skeleton *ngIf="dialogLoading" height="2.75rem" styleClass="w-full" />
                <p-inputnumber
                    *ngIf="!dialogLoading"
                    [(ngModel)]="packing.prix_par_rouleau"
                    (onInput)="calculateMontant()"
                    [min]="0"
                    styleClass="w-full"
                />
            </div>

            <!-- Statut -->
            <div class="w-full flex flex-col gap-1">
                <label class="text-sm font-medium text-surface-700 dark:text-surface-300">Statut</label>
                <p-select
                    [(ngModel)]="packing.statut"
                    [options]="statuses"
                    optionLabel="label"
                    optionValue="value"
                    placeholder="S\xE9lectionner un statut"
                    styleClass="w-full"
                />
            </div>
        </div>

        <!-- Montant total -->
        <div class="w-full p-4 bg-surface-50 dark:bg-surface-800 rounded-xl flex items-center justify-between">
            <span class="text-surface-900 dark:text-surface-0 text-base font-semibold">Montant total</span>
            <span class="text-lg font-bold leading-tight" style="color: var(--p-primary-600)">{{ formatCurrency(packing.montant || 0) }}</span>
        </div>
    </div>

    <!-- Footer (toujours visible) -->
    <div class="packing-mobile-footer w-full border-t border-surface-200 dark:border-surface-700 p-6 flex flex-col gap-3 flex-shrink-0">
        <button pButton class="w-full py-3" (click)="onSave()" [disabled]="saving || dialogLoading || !selectedPrestataire" [loading]="saving">
            <i pButtonIcon class="pi pi-check mr-2"></i>
            <span pButtonLabel>{{ packing?.id ? 'Sauvegarder' : 'Enregistrer' }}</span>
        </button>
    </div>
</div>
`, styles: ["/* src/app/pages/packings/packing-mobile-form/packing-mobile-form.scss */\n:host {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 0;\n}\n.packing-mobile-panel {\n  min-height: 0;\n  overflow: hidden;\n}\n@media (max-width: 768px) {\n  :host {\n    width: 100%;\n    max-width: 100%;\n    overflow: hidden;\n  }\n  .packing-mobile-panel {\n    width: 100%;\n    max-width: 100%;\n  }\n  .packing-mobile-footer {\n    padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));\n  }\n}\n/*# sourceMappingURL=packing-mobile-form.css.map */\n"] }]
  }], null, { packing: [{
    type: Input
  }], prestataires: [{
    type: Input
  }], selectedPrestataire: [{
    type: Input
  }], saving: [{
    type: Input
  }], dialogLoading: [{
    type: Input
  }], submitted: [{
    type: Input
  }], onSaveEvent: [{
    type: Output
  }], onClose: [{
    type: Output
  }], selectedPrestataireChange: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(PackingMobileForm, { className: "PackingMobileForm", filePath: "src/app/pages/packings/packing-mobile-form/packing-mobile-form.ts", lineNumber: 32 });
})();

// src/app/services/packing/packing.service.ts
var PackingService = class _PackingService {
  http;
  apiUrl = `${environment.apiUrl}/packings`;
  constructor(http) {
    this.http = http;
  }
  /**
   * Récupérer la liste des packings avec filtres optionnels
   */
  getPackings(filters) {
    let params = new HttpParams();
    if (filters) {
      if (filters.prestataire_id) {
        params = params.set("prestataire_id", filters.prestataire_id.toString());
      }
      if (filters.statut) {
        params = params.set("statut", filters.statut);
      }
      if (filters.date_debut) {
        params = params.set("date_debut", filters.date_debut);
      }
      if (filters.date_fin) {
        params = params.set("date_fin", filters.date_fin);
      }
      if (filters.non_payes) {
        params = params.set("non_payes", filters.non_payes.toString());
      }
      if (filters.search) {
        params = params.set("search", filters.search);
      }
      if (filters.sort_by) {
        params = params.set("sort_by", filters.sort_by);
      }
      if (filters.sort_order) {
        params = params.set("sort_order", filters.sort_order);
      }
      if (filters.per_page) {
        params = params.set("per_page", filters.per_page.toString());
      }
      if (filters.page) {
        params = params.set("page", filters.page.toString());
      }
    }
    return this.http.get(this.apiUrl, { params });
  }
  /**
   * Récupérer un packing par son ID
   */
  getPacking(id) {
    return this.http.get(`${this.apiUrl}/${id}`);
  }
  /**
   * Créer un nouveau packing
   */
  createPacking(data) {
    return this.http.post(this.apiUrl, data);
  }
  /**
   * Mettre à jour un packing
   */
  updatePacking(id, data) {
    return this.http.put(`${this.apiUrl}/${id}`, data);
  }
  /**
   * Changer le statut d'un packing
   */
  changeStatut(id, data) {
    return this.http.patch(`${this.apiUrl}/${id}/statut`, data);
  }
  /**
   * Supprimer un packing
   */
  deletePacking(id) {
    return this.http.delete(`${this.apiUrl}/${id}`);
  }
  /**
   * Rechercher des packings
   */
  searchPackings(searchTerm) {
    const params = new HttpParams().set("search", searchTerm);
    return this.http.get(this.apiUrl, { params });
  }
  /**
   * Obtenir les packings par prestataire
   */
  getPackingsByPrestataire(prestataireId) {
    const params = new HttpParams().set("prestataire_id", prestataireId.toString());
    return this.http.get(this.apiUrl, { params });
  }
  /**
   * Obtenir les packings par statut
   */
  getPackingsByStatut(statut) {
    const params = new HttpParams().set("statut", statut);
    return this.http.get(this.apiUrl, { params });
  }
  /**
   * Obtenir les packings non payés
   */
  getPackingsNonPayes() {
    const params = new HttpParams().set("non_payes", "true");
    return this.http.get(this.apiUrl, { params });
  }
  /**
   * Obtenir les packings par période
   */
  getPackingsByPeriode(dateDebut, dateFin) {
    const params = new HttpParams().set("date_debut", dateDebut).set("date_fin", dateFin);
    return this.http.get(this.apiUrl, { params });
  }
  /**
   * Obtenir les packings avec pagination
   */
  getPackingsPaginated(page = 1, perPage = 10, filters) {
    let params = new HttpParams().set("page", page.toString()).set("per_page", perPage.toString());
    if (filters) {
      if (filters.prestataire_id) {
        params = params.set("prestataire_id", filters.prestataire_id.toString());
      }
      if (filters.statut) {
        params = params.set("statut", filters.statut);
      }
      if (filters.date_debut) {
        params = params.set("date_debut", filters.date_debut);
      }
      if (filters.date_fin) {
        params = params.set("date_fin", filters.date_fin);
      }
      if (filters.non_payes) {
        params = params.set("non_payes", filters.non_payes.toString());
      }
      if (filters.search) {
        params = params.set("search", filters.search);
      }
      if (filters.sort_by) {
        params = params.set("sort_by", filters.sort_by);
      }
      if (filters.sort_order) {
        params = params.set("sort_order", filters.sort_order);
      }
    }
    return this.http.get(this.apiUrl, { params });
  }
  static \u0275fac = function PackingService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PackingService)(\u0275\u0275inject(HttpClient));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _PackingService, factory: _PackingService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PackingService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }], null);
})();

// src/app/pages/packings/packing-liste/packing-liste.ts
var _c0 = ["dt"];
var _c1 = () => ({ "min-width": "65rem" });
var _c2 = () => [10, 20, 30];
var _c3 = () => ({ width: "750px", maxWidth: "95vw" });
var _c4 = () => ({ overflow: "visible" });
var _c5 = () => ({ "960px": "95vw", "768px": "100vw", "480px": "100vw" });
var _c6 = () => ({ width: "450px" });
var _c7 = (a0, a1, a2) => ({ "mobile-status-badge--warn": a0, "mobile-status-badge--success": a1, "mobile-status-badge--danger": a2 });
var _c8 = (a0, a1, a2) => ({ "status-badge--warn": a0, "status-badge--success": a1, "status-badge--danger": a2 });
function PackingListe_section_17_article_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 62);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const packing_r4 = \u0275\u0275nextContext().$implicit;
    const ctx_r4 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r4.getPrestataireInitials(packing_r4.prestataire), " ");
  }
}
function PackingListe_section_17_article_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 63);
    \u0275\u0275text(1, "?");
    \u0275\u0275elementEnd();
  }
}
function PackingListe_section_17_article_1_button_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 64);
    \u0275\u0275listener("click", function PackingListe_section_17_article_1_button_13_Template_button_click_0_listener($event) {
      \u0275\u0275restoreView(_r6);
      const packing_r4 = \u0275\u0275nextContext().$implicit;
      const ctx_r4 = \u0275\u0275nextContext(2);
      $event.stopPropagation();
      return \u0275\u0275resetView(ctx_r4.editPacking(packing_r4));
    });
    \u0275\u0275elementEnd();
  }
}
function PackingListe_section_17_article_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "article", 52);
    \u0275\u0275listener("click", function PackingListe_section_17_article_1_Template_article_click_0_listener() {
      const packing_r4 = \u0275\u0275restoreView(_r3).$implicit;
      const ctx_r4 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r4.canUpdate && ctx_r4.editPacking(packing_r4));
    });
    \u0275\u0275template(1, PackingListe_section_17_article_1_div_1_Template, 2, 1, "div", 53)(2, PackingListe_section_17_article_1_div_2_Template, 2, 0, "div", 54);
    \u0275\u0275elementStart(3, "div", 55)(4, "div", 56);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 57);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "div", 58)(9, "span", 59);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "span", 60);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd();
    \u0275\u0275template(13, PackingListe_section_17_article_1_button_13_Template, 1, 0, "button", 61);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const packing_r4 = ctx.$implicit;
    const ctx_r4 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", packing_r4.prestataire);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !packing_r4.prestataire);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(packing_r4.prestataire ? packing_r4.prestataire.prenom + " " + packing_r4.prestataire.nom : packing_r4.reference || "Packing");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r4.formatDateDisplay(packing_r4.date), " \xB7 ", packing_r4.nb_rouleaux, " rouleaux");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r4.formatCurrency(packing_r4.montant));
    \u0275\u0275advance();
    \u0275\u0275property("ngClass", \u0275\u0275pureFunction3(9, _c7, packing_r4.statut === "a_valider", packing_r4.statut === "valide", packing_r4.statut === "annule"));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r4.getStatutLabel(packing_r4.statut));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r4.canUpdate);
  }
}
function PackingListe_section_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "section", 50);
    \u0275\u0275template(1, PackingListe_section_17_article_1_Template, 14, 13, "article", 51);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r4.mobileVisiblePackings)("ngForTrackBy", ctx_r4.trackByPackingId);
  }
}
function PackingListe_ng_template_18_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 66);
    \u0275\u0275text(1, "Chargement...");
    \u0275\u0275elementEnd();
  }
}
function PackingListe_ng_template_18_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 66);
    \u0275\u0275text(1, "Aucun packing.");
    \u0275\u0275elementEnd();
  }
}
function PackingListe_ng_template_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, PackingListe_ng_template_18_div_0_Template, 2, 0, "div", 65)(1, PackingListe_ng_template_18_div_1_Template, 2, 0, "div", 65);
  }
  if (rf & 2) {
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275property("ngIf", ctx_r4.loading);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r4.loading && !ctx_r4.mobileFilteredPackings.length);
  }
}
function PackingListe_div_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 67)(1, "button", 68);
    \u0275\u0275listener("click", function PackingListe_div_20_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r7);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.loadMoreMobile());
    });
    \u0275\u0275elementEnd()();
  }
}
function PackingListe_button_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 69);
    \u0275\u0275listener("click", function PackingListe_button_21_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r8);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.openNew());
    });
    \u0275\u0275element(1, "i", 70);
    \u0275\u0275elementEnd();
  }
}
function PackingListe_ng_template_24_p_button_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 72);
    \u0275\u0275listener("onClick", function PackingListe_ng_template_24_p_button_0_Template_p_button_onClick_0_listener() {
      \u0275\u0275restoreView(_r9);
      const ctx_r4 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r4.openNew());
    });
    \u0275\u0275elementEnd();
  }
}
function PackingListe_ng_template_24_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, PackingListe_ng_template_24_p_button_0_Template, 1, 0, "p-button", 71);
  }
  if (rf & 2) {
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275property("ngIf", ctx_r4.canCreate);
  }
}
function PackingListe_ng_template_26_p_button_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 78);
    \u0275\u0275listener("onClick", function PackingListe_ng_template_26_p_button_3_Template_p_button_onClick_0_listener() {
      \u0275\u0275restoreView(_r11);
      const ctx_r4 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r4.clearDateFilters());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    \u0275\u0275property("outlined", true)("rounded", true);
  }
}
function PackingListe_ng_template_26_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 73)(1, "p-select", 74);
    \u0275\u0275twoWayListener("ngModelChange", function PackingListe_ng_template_26_Template_p_select_ngModelChange_1_listener($event) {
      \u0275\u0275restoreView(_r10);
      const ctx_r4 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r4.filterStatut, $event) || (ctx_r4.filterStatut = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("onChange", function PackingListe_ng_template_26_Template_p_select_onChange_1_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.onDateFilter());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "p-datepicker", 75);
    \u0275\u0275twoWayListener("ngModelChange", function PackingListe_ng_template_26_Template_p_datepicker_ngModelChange_2_listener($event) {
      \u0275\u0275restoreView(_r10);
      const ctx_r4 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r4.filterDateRange, $event) || (ctx_r4.filterDateRange = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("onSelect", function PackingListe_ng_template_26_Template_p_datepicker_onSelect_2_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.onDateRangeSelect());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, PackingListe_ng_template_26_p_button_3_Template, 1, 2, "p-button", 76);
    \u0275\u0275elementStart(4, "p-button", 77);
    \u0275\u0275listener("onClick", function PackingListe_ng_template_26_Template_p_button_onClick_4_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.exportCSV());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275twoWayProperty("ngModel", ctx_r4.filterStatut);
    \u0275\u0275property("options", ctx_r4.statuses)("showClear", true);
    \u0275\u0275advance();
    \u0275\u0275twoWayProperty("ngModel", ctx_r4.filterDateRange);
    \u0275\u0275property("showIcon", true)("readonlyInput", true);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r4.filterDateRange || ctx_r4.filterStatut);
  }
}
function PackingListe_ng_template_30_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 79)(1, "h5", 80);
    \u0275\u0275text(2, "Gestion des Packings");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p-iconfield");
    \u0275\u0275element(4, "p-inputicon", 20);
    \u0275\u0275elementStart(5, "input", 81);
    \u0275\u0275listener("input", function PackingListe_ng_template_30_Template_input_input_5_listener($event) {
      \u0275\u0275restoreView(_r12);
      const ctx_r4 = \u0275\u0275nextContext();
      const dt_r13 = \u0275\u0275reference(29);
      return \u0275\u0275resetView(ctx_r4.onGlobalFilter(dt_r13, $event));
    });
    \u0275\u0275elementEnd()()();
  }
}
function PackingListe_ng_template_32_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 82)(2, "span", 83);
    \u0275\u0275text(3, "Prestataire ");
    \u0275\u0275element(4, "p-sortIcon", 84);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "th")(6, "span", 83);
    \u0275\u0275text(7, "T\xE9l\xE9phone");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "th", 85)(9, "span", 83);
    \u0275\u0275text(10, "Date ");
    \u0275\u0275element(11, "p-sortIcon", 86);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "th", 87)(13, "span", 88);
    \u0275\u0275text(14, "Rouleaux ");
    \u0275\u0275element(15, "p-sortIcon", 89);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(16, "th", 90)(17, "span", 88);
    \u0275\u0275text(18, "Montant ");
    \u0275\u0275element(19, "p-sortIcon", 91);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(20, "th", 92)(21, "span", 93);
    \u0275\u0275text(22, "Statut ");
    \u0275\u0275element(23, "p-sortIcon", 94);
    \u0275\u0275elementEnd()();
    \u0275\u0275element(24, "th", 95);
    \u0275\u0275elementEnd();
  }
}
function PackingListe_ng_template_34_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 104)(1, "span", 105);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 106);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_15_0;
    const packing_r15 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275styleProp("background", "var(--p-primary-50)")("color", "var(--p-primary-600)");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", packing_r15.prestataire.nom == null ? null : (tmp_15_0 = packing_r15.prestataire.nom.charAt(0)) == null ? null : tmp_15_0.toUpperCase(), " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", packing_r15.prestataire.nom, " ", packing_r15.prestataire.prenom);
  }
}
function PackingListe_ng_template_34_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1);
    \u0275\u0275pipe(2, "phoneFormat");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const packing_r15 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind2(2, 1, packing_r15.prestataire.phone, "INT"));
  }
}
function PackingListe_ng_template_34_p_button_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r16 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 107);
    \u0275\u0275listener("click", function PackingListe_ng_template_34_p_button_15_Template_p_button_click_0_listener() {
      \u0275\u0275restoreView(_r16);
      const packing_r15 = \u0275\u0275nextContext().$implicit;
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.editPacking(packing_r15));
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    \u0275\u0275property("text", true)("rounded", true);
  }
}
function PackingListe_ng_template_34_Template(rf, ctx) {
  if (rf & 1) {
    const _r14 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr", 96);
    \u0275\u0275listener("dblclick", function PackingListe_ng_template_34_Template_tr_dblclick_0_listener() {
      const packing_r15 = \u0275\u0275restoreView(_r14).$implicit;
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.canUpdate && ctx_r4.editPacking(packing_r15));
    });
    \u0275\u0275elementStart(1, "td");
    \u0275\u0275template(2, PackingListe_ng_template_34_div_2_Template, 5, 7, "div", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "td", 98);
    \u0275\u0275template(4, PackingListe_ng_template_34_span_4_Template, 3, 4, "span", 99);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "td", 98);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "td", 100);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "td", 100);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "td", 101)(12, "span", 102);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "td", 101);
    \u0275\u0275template(15, PackingListe_ng_template_34_p_button_15_Template, 1, 2, "p-button", 103);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const packing_r15 = ctx.$implicit;
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", packing_r15.prestataire);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", packing_r15.prestataire);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r4.formatDateDisplay(packing_r15.date));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(packing_r15.nb_rouleaux);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r4.formatCurrency(packing_r15.montant));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngClass", \u0275\u0275pureFunction3(8, _c8, packing_r15.statut === "a_valider", packing_r15.statut === "valide", packing_r15.statut === "annule"));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r4.getStatutLabel(packing_r15.statut), " ");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r4.canUpdate);
  }
}
function PackingListe_ng_template_36_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 108)(2, "div", 109);
    \u0275\u0275element(3, "i", 110);
    \u0275\u0275elementStart(4, "span");
    \u0275\u0275text(5, "Aucun packing trouv\xE9");
    \u0275\u0275elementEnd()()()();
  }
}
function PackingListe_p_skeleton_46_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-skeleton", 111);
  }
}
function PackingListe_p_select_47_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 73);
    \u0275\u0275element(1, "i", 115);
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const prestataire_r18 = ctx.$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate3("", prestataire_r18.prenom, " ", prestataire_r18.nom, " \xB7 ", prestataire_r18.phone);
  }
}
function PackingListe_p_select_47_ng_template_2_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 73);
    \u0275\u0275element(1, "i", 115);
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const prestataire_r19 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2("", prestataire_r19.prenom, " ", prestataire_r19.nom);
  }
}
function PackingListe_p_select_47_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, PackingListe_p_select_47_ng_template_2_div_0_Template, 4, 2, "div", 116);
  }
  if (rf & 2) {
    const prestataire_r19 = ctx.$implicit;
    \u0275\u0275property("ngIf", prestataire_r19);
  }
}
function PackingListe_p_select_47_Template(rf, ctx) {
  if (rf & 1) {
    const _r17 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-select", 112);
    \u0275\u0275twoWayListener("ngModelChange", function PackingListe_p_select_47_Template_p_select_ngModelChange_0_listener($event) {
      \u0275\u0275restoreView(_r17);
      const ctx_r4 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r4.selectedPrestataire, $event) || (ctx_r4.selectedPrestataire = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275template(1, PackingListe_p_select_47_ng_template_1_Template, 4, 3, "ng-template", 113)(2, PackingListe_p_select_47_ng_template_2_Template, 1, 1, "ng-template", 114);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275twoWayProperty("ngModel", ctx_r4.selectedPrestataire);
    \u0275\u0275property("options", ctx_r4.prestataires)("filter", true);
  }
}
function PackingListe_small_48_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 117);
    \u0275\u0275text(1, "Le prestataire est requis.");
    \u0275\u0275elementEnd();
  }
}
function PackingListe_p_skeleton_64_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-skeleton", 111);
  }
}
function PackingListe_p_inputnumber_65_Template(rf, ctx) {
  if (rf & 1) {
    const _r20 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-inputnumber", 118);
    \u0275\u0275twoWayListener("ngModelChange", function PackingListe_p_inputnumber_65_Template_p_inputnumber_ngModelChange_0_listener($event) {
      \u0275\u0275restoreView(_r20);
      const ctx_r4 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r4.packing.prix_par_rouleau, $event) || (ctx_r4.packing.prix_par_rouleau = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("onInput", function PackingListe_p_inputnumber_65_Template_p_inputnumber_onInput_0_listener() {
      \u0275\u0275restoreView(_r20);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.calculateMontant());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275twoWayProperty("ngModel", ctx_r4.packing.prix_par_rouleau);
    \u0275\u0275property("min", 0);
  }
}
function PackingListe_ng_template_75_Template(rf, ctx) {
  if (rf & 1) {
    const _r21 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 119)(1, "p-button", 120);
    \u0275\u0275listener("click", function PackingListe_ng_template_75_Template_p_button_click_1_listener() {
      \u0275\u0275restoreView(_r21);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.hideDialog());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "p-button", 121);
    \u0275\u0275listener("click", function PackingListe_ng_template_75_Template_p_button_click_2_listener() {
      \u0275\u0275restoreView(_r21);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.savePacking());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("outlined", true)("disabled", ctx_r4.saving);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r4.saving || ctx_r4.dialogLoading)("loading", ctx_r4.saving);
  }
}
function PackingListe_div_78_Template(rf, ctx) {
  if (rf & 1) {
    const _r22 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 122)(1, "div", 123);
    \u0275\u0275listener("click", function PackingListe_div_78_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r22);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.closeMobileForm());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "div", 124)(3, "app-packing-mobile-form", 125);
    \u0275\u0275listener("onSaveEvent", function PackingListe_div_78_Template_app_packing_mobile_form_onSaveEvent_3_listener($event) {
      \u0275\u0275restoreView(_r22);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.onMobileFormSave($event));
    })("onClose", function PackingListe_div_78_Template_app_packing_mobile_form_onClose_3_listener() {
      \u0275\u0275restoreView(_r22);
      const ctx_r4 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r4.closeMobileForm());
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r4 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275property("packing", ctx_r4.packing)("prestataires", ctx_r4.prestataires)("selectedPrestataire", ctx_r4.selectedPrestataire)("saving", ctx_r4.saving)("dialogLoading", ctx_r4.dialogLoading)("submitted", ctx_r4.submitted);
  }
}
var PackingListe = class _PackingListe {
  packingService;
  prestataireService;
  parametresService;
  messageService;
  confirmationService;
  authService;
  router;
  document;
  filterFields = ["reference", "prestataire.nom", "prestataire.prenom", "prestataire.phone", "statut", "montant"];
  packingDialog = false;
  packings = signal([], ...ngDevMode ? [{ debugName: "packings" }] : []);
  packing = {};
  selectedPackings = null;
  submitted = false;
  loading = false;
  saving = false;
  dialogLoading = false;
  // Mobile
  mobileSearchTerm = "";
  mobilePageSize = 10;
  mobileVisibleCount = this.mobilePageSize;
  mobileFormVisible = false;
  mobileBreakpoint = 768;
  mobilePwaClass = "packings-mobile-pwa";
  // Filtres
  filterDateRange = null;
  filterStatut = null;
  mobileStatusMenuItems = [
    { label: "Tous les statuts", command: () => this.applyMobileStatusFilter(null) },
    { label: "\xC0 valider", command: () => this.applyMobileStatusFilter("a_valider") },
    { label: "Valid\xE9", command: () => this.applyMobileStatusFilter("valide") },
    { label: "Annul\xE9", command: () => this.applyMobileStatusFilter("annule") }
  ];
  // Prix rouleau par défaut (depuis les paramètres)
  prixRouleauDefaut = 0;
  // Pour l'autocomplete prestataire
  prestataires = [];
  filteredPrestataires = [];
  selectedPrestataire = null;
  statuses = [
    { label: "\xC0 valider", value: "a_valider" },
    { label: "Valid\xE9", value: "valide" },
    { label: "Annul\xE9", value: "annule" }
  ];
  // Permissions
  canCreate = false;
  canUpdate = false;
  canDelete = false;
  dt;
  exportColumns;
  cols;
  constructor(packingService, prestataireService, parametresService, messageService, confirmationService, authService, router, document) {
    this.packingService = packingService;
    this.prestataireService = prestataireService;
    this.parametresService = parametresService;
    this.messageService = messageService;
    this.confirmationService = confirmationService;
    this.authService = authService;
    this.router = router;
    this.document = document;
    this.canCreate = this.authService.hasPermission("packings.create");
    this.canUpdate = this.authService.hasPermission("packings.update");
    this.canDelete = this.authService.hasPermission("packings.delete");
  }
  ngOnInit() {
    this.loadPackings();
    this.loadPrestataires();
    this.loadPrixRouleauDefaut();
    this.initColumns();
    this.syncMobilePwaMode();
  }
  ngOnDestroy() {
    this.document.body.classList.remove(this.mobilePwaClass);
  }
  onWindowResize() {
    this.syncMobilePwaMode();
  }
  goHome() {
    this.router.navigate(["/"]);
  }
  onMobileSearchChange() {
    this.mobileVisibleCount = this.mobilePageSize;
  }
  get mobileFilteredPackings() {
    const list = this.packings();
    const term = this.mobileSearchTerm.trim().toLowerCase();
    if (!term)
      return list;
    return list.filter((p) => {
      const ref = (p.reference || "").toLowerCase();
      const nom = (p.prestataire?.nom || "").toLowerCase();
      const prenom = (p.prestataire?.prenom || "").toLowerCase();
      const phone = (p.prestataire?.phone || "").replace(/\s/g, "");
      return ref.includes(term) || nom.includes(term) || prenom.includes(term) || phone.includes(term);
    });
  }
  get mobileVisiblePackings() {
    return this.mobileFilteredPackings.slice(0, this.mobileVisibleCount);
  }
  get canLoadMoreMobile() {
    return this.mobileVisibleCount < this.mobileFilteredPackings.length;
  }
  loadMoreMobile() {
    this.mobileVisibleCount += this.mobilePageSize;
  }
  trackByPackingId(_index, p) {
    return p.id;
  }
  getPrestataireInitials(prestataire) {
    if (!prestataire)
      return "?";
    const n = (prestataire.nom || "").charAt(0).toUpperCase();
    const p = (prestataire.prenom || "").charAt(0).toUpperCase();
    return n + p || "?";
  }
  goToEditPacking(packing) {
    this.router.navigate(["packings", "packings-edit", packing.id]);
  }
  applyMobileStatusFilter(statut) {
    this.filterStatut = statut;
    this.loadPackings();
  }
  get isMobile() {
    return typeof window !== "undefined" && window.innerWidth <= this.mobileBreakpoint;
  }
  syncMobilePwaMode() {
    if (typeof window === "undefined")
      return;
    if (window.innerWidth <= this.mobileBreakpoint) {
      this.document.body.classList.add(this.mobilePwaClass);
    } else {
      this.document.body.classList.remove(this.mobilePwaClass);
    }
  }
  initColumns() {
    this.cols = [
      { field: "reference", header: "R\xE9f\xE9rence" },
      { field: "prestataire", header: "Prestataire" },
      { field: "date", header: "Date" },
      { field: "nb_rouleaux", header: "Rouleaux" },
      { field: "montant", header: "Montant" },
      { field: "statut", header: "Statut" }
    ];
    this.exportColumns = this.cols.map((col) => ({
      title: col.header,
      dataKey: col.field
    }));
  }
  onDateRangeSelect() {
    if (this.filterDateRange && this.filterDateRange[1]) {
      this.loadPackings();
    }
  }
  onDateFilter() {
    this.loadPackings();
  }
  clearDateFilters() {
    this.filterDateRange = null;
    this.filterStatut = null;
    this.loadPackings();
  }
  loadPackings() {
    this.loading = true;
    const filters = {};
    if (this.filterDateRange?.[0]) {
      filters.date_debut = this.formatDate(this.filterDateRange[0]);
    }
    if (this.filterDateRange?.[1]) {
      filters.date_fin = this.formatDate(this.filterDateRange[1]);
    }
    if (this.filterStatut) {
      filters.statut = this.filterStatut;
    }
    this.packingService.getPackings(Object.keys(filters).length ? filters : void 0).subscribe({
      next: (response) => {
        const data = "data" in response && Array.isArray(response.data) ? response.data : response.data?.data || [];
        this.packings.set(data);
        this.mobileVisibleCount = this.mobilePageSize;
        this.loading = false;
      },
      error: (error) => {
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les packings",
          life: 3e3
        });
        this.loading = false;
      }
    });
  }
  loadPrixRouleauDefaut() {
    this.parametresService.getPrixRouleauDefaut().subscribe({
      next: (prix) => {
        this.prixRouleauDefaut = prix;
      },
      error: () => {
        this.prixRouleauDefaut = 0;
      }
    });
  }
  loadPrestataires() {
    this.prestataireService.getActivePrestataires().subscribe({
      next: (response) => {
        this.prestataires = response.data.filter((p) => p.type === "machiniste");
      },
      error: () => {
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les prestataires",
          life: 3e3
        });
      }
    });
  }
  filterPrestataire(event) {
    const query = event.query.toLowerCase();
    this.filteredPrestataires = this.prestataires.filter((p) => p.nom.toLowerCase().includes(query) || p.prenom.toLowerCase().includes(query) || p.phone.includes(query));
  }
  exportCSV() {
    this.dt.exportCSV();
  }
  onGlobalFilter(table, event) {
    table.filterGlobal(event.target.value, "contains");
  }
  openNew() {
    this.selectedPrestataire = null;
    this.submitted = false;
    this.dialogLoading = true;
    if (this.isMobile) {
      this.mobileFormVisible = true;
    } else {
      this.packingDialog = true;
    }
    forkJoin({
      prixRouleauDefaut: this.parametresService.getPrixRouleauDefaut(),
      prestataires: this.prestataireService.getActivePrestataires()
    }).subscribe({
      next: ({ prixRouleauDefaut, prestataires }) => {
        this.prixRouleauDefaut = prixRouleauDefaut;
        this.prestataires = prestataires.data.filter((p) => p.type === "machiniste");
        this.packing = {
          statut: "valide",
          date: /* @__PURE__ */ new Date(),
          nb_rouleaux: 0,
          prix_par_rouleau: this.prixRouleauDefaut,
          montant: 0
        };
        this.dialogLoading = false;
      },
      error: () => {
        this.packing = {
          statut: "valide",
          date: /* @__PURE__ */ new Date(),
          nb_rouleaux: 0,
          prix_par_rouleau: this.prixRouleauDefaut,
          montant: 0
        };
        this.dialogLoading = false;
      }
    });
  }
  editPacking(packing) {
    this.packing = __spreadProps(__spreadValues({}, packing), {
      date: packing.date ? new Date(packing.date) : void 0
    });
    this.selectedPrestataire = packing.prestataire || null;
    if (this.isMobile) {
      this.mobileFormVisible = true;
    } else {
      this.packingDialog = true;
    }
  }
  deletePacking(packing) {
    this.confirmationService.confirm({
      message: `\xCAtes-vous s\xFBr de vouloir supprimer le packing ${packing.reference} ?`,
      header: "Confirmation",
      icon: "pi pi-exclamation-triangle",
      accept: () => {
        this.packingService.deletePacking(packing.id).subscribe({
          next: () => {
            this.packings.set(this.packings().filter((p) => p.id !== packing.id));
            this.messageService.add({
              severity: "success",
              summary: "Succ\xE8s",
              detail: "Packing supprim\xE9",
              life: 3e3
            });
          },
          error: () => {
            this.messageService.add({
              severity: "error",
              summary: "Erreur",
              detail: "Impossible de supprimer le packing",
              life: 3e3
            });
          }
        });
      }
    });
  }
  deleteSelectedPackings() {
    this.confirmationService.confirm({
      message: "\xCAtes-vous s\xFBr de vouloir supprimer les packings s\xE9lectionn\xE9s ?",
      header: "Confirmation",
      icon: "pi pi-exclamation-triangle",
      accept: () => {
        this.selectedPackings?.forEach((packing) => {
          this.packingService.deletePacking(packing.id).subscribe();
        });
        this.packings.set(this.packings().filter((p) => !this.selectedPackings?.includes(p)));
        this.selectedPackings = null;
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Packings supprim\xE9s",
          life: 3e3
        });
      }
    });
  }
  hideDialog() {
    this.packingDialog = false;
    this.submitted = false;
  }
  closeMobileForm() {
    this.mobileFormVisible = false;
    this.submitted = false;
  }
  onMobileFormSave(event) {
    this.packing = event.packing;
    this.selectedPrestataire = event.prestataire;
    this.savePacking();
  }
  savePacking() {
    this.submitted = true;
    if (!this.selectedPrestataire || this.saving) {
      return;
    }
    this.saving = true;
    const packingData = {
      prestataire_id: this.selectedPrestataire.id,
      date: this.formatDate(this.packing.date),
      nb_rouleaux: this.packing.nb_rouleaux || 0,
      prix_par_rouleau: this.packing.prix_par_rouleau || 0,
      statut: this.packing.statut,
      notes: this.packing.notes ?? void 0
    };
    if (this.packing.id) {
      this.packingService.updatePacking(this.packing.id, packingData).subscribe({
        next: () => {
          this.messageService.add({
            severity: "success",
            summary: "Succ\xE8s",
            detail: "Packing mis \xE0 jour",
            life: 3e3
          });
          this.packingDialog = false;
          this.mobileFormVisible = false;
          this.packing = {};
          this.saving = false;
          this.loadPackings();
        },
        error: (err) => {
          this.showApiError(err, "Impossible de mettre \xE0 jour le packing");
          this.saving = false;
        }
      });
    } else {
      this.packingService.createPacking(packingData).subscribe({
        next: () => {
          this.messageService.add({
            severity: "success",
            summary: "Succ\xE8s",
            detail: "Packing cr\xE9\xE9",
            life: 3e3
          });
          this.packingDialog = false;
          this.mobileFormVisible = false;
          this.packing = {};
          this.saving = false;
          this.loadPackings();
        },
        error: (err) => {
          this.showApiError(err, "Impossible de cr\xE9er le packing");
          this.saving = false;
        }
      });
    }
  }
  calculateMontant() {
    if (this.packing.nb_rouleaux && this.packing.prix_par_rouleau) {
      this.packing.montant = this.packing.nb_rouleaux * this.packing.prix_par_rouleau;
    }
  }
  formatDate(date) {
    if (!date)
      return "";
    if (typeof date === "string")
      return date;
    const d = new Date(date);
    return d.toISOString().split("T")[0];
  }
  getStatutLabel(statut) {
    return PACKING_STATUT_LABELS[statut] || statut;
  }
  getStatutSeverity(statut) {
    return PACKING_STATUT_SEVERITY[statut] || "info";
  }
  formatCurrency(value) {
    return new Intl.NumberFormat("fr-FR", {
      style: "decimal",
      minimumFractionDigits: 0
    }).format(value) + " GNF";
  }
  formatDateDisplay(dateStr) {
    if (dateStr == null)
      return "";
    const date = typeof dateStr === "string" ? new Date(dateStr) : dateStr;
    return date.toLocaleDateString("fr-FR");
  }
  showApiError(err, fallback) {
    const summary = err.error?.message || fallback;
    if (err.status === 422 && err.error?.errors) {
      const messages = Object.values(err.error.errors).flat();
      messages.forEach((msg) => {
        this.messageService.add({
          severity: "error",
          summary,
          detail: msg,
          life: 5e3
        });
      });
    } else {
      this.messageService.add({
        severity: "error",
        summary,
        detail: "",
        life: 5e3
      });
    }
  }
  static \u0275fac = function PackingListe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PackingListe)(\u0275\u0275directiveInject(PackingService), \u0275\u0275directiveInject(PrestataireService), \u0275\u0275directiveInject(ParametresService), \u0275\u0275directiveInject(MessageService), \u0275\u0275directiveInject(ConfirmationService), \u0275\u0275directiveInject(AuthService), \u0275\u0275directiveInject(Router), \u0275\u0275directiveInject(DOCUMENT));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _PackingListe, selectors: [["app-packing-liste"]], viewQuery: function PackingListe_Query(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275viewQuery(_c0, 5);
    }
    if (rf & 2) {
      let _t;
      \u0275\u0275queryRefresh(_t = \u0275\u0275loadQuery()) && (ctx.dt = _t.first);
    }
  }, hostBindings: function PackingListe_HostBindings(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275listener("resize", function PackingListe_resize_HostBindingHandler() {
        return ctx.onWindowResize();
      }, \u0275\u0275resolveWindow);
    }
  }, features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 79, vars: 49, consts: [["statusMenu", ""], ["mobileListState", ""], ["start", ""], ["end", ""], ["dt", ""], ["caption", ""], ["header", ""], ["body", ""], ["emptymessage", ""], ["footer", ""], [1, "packing-mobile-app"], [1, "mobile-header"], ["pButton", "", "pRipple", "", "icon", "pi pi-arrow-left", "aria-label", "Retour \xE0 l'accueil", 1, "p-button-rounded", "p-button-text", "mobile-back", 3, "click"], [1, "mobile-title-wrap"], [1, "mobile-title"], [1, "mobile-subtitle"], ["appendTo", "body", "styleClass", "mobile-status-menu", 3, "model", "popup"], ["pButton", "", "pRipple", "", "icon", "pi pi-filter", "aria-label", "Filtrer par statut", 1, "p-button-rounded", "p-button-text", "mobile-add", 3, "click"], [1, "mobile-scroll"], [1, "mobile-search"], ["styleClass", "pi pi-search"], ["pInputText", "", "type", "text", "placeholder", "Prestataire, r\xE9f\xE9rence...", 1, "w-full", 3, "ngModelChange", "ngModel"], ["class", "mobile-list", 4, "ngIf", "ngIfElse"], ["class", "mobile-load-more", 4, "ngIf"], ["type", "button", "class", "mobile-fab", "aria-label", "Nouveau packing", 3, "click", 4, "ngIf"], [1, "card", "packing-desktop"], ["styleClass", "mb-12"], ["dataKey", "id", "currentPageReportTemplate", "  {first} \xE0 {last} sur {totalRecords} packings", 3, "selectionChange", "value", "rows", "columns", "paginator", "globalFilterFields", "tableStyle", "selection", "rowHover", "showCurrentPageReport", "rowsPerPageOptions", "loading"], ["styleClass", "packing-dialog", 3, "visibleChange", "visible", "contentStyle", "header", "modal", "breakpoints", "maximizable"], [1, "packing-dialog-content"], [1, "packing-dialog-section"], [1, "packing-dialog-section-title"], [1, "packing-dialog-field"], ["for", "prestataire"], ["height", "2.75rem", "styleClass", "w-full", 4, "ngIf"], ["id", "prestataire", "optionLabel", "nom", "filterBy", "nom,prenom,phone", "placeholder", "S\xE9lectionner un prestataire", "styleClass", "w-full packing-dialog-select", 3, "ngModel", "options", "filter", "ngModelChange", 4, "ngIf"], ["class", "packing-dialog-error", 4, "ngIf"], ["for", "date"], ["id", "date", "dateFormat", "dd/mm/yy", "inputStyleClass", "w-full", "styleClass", "w-full", 3, "ngModelChange", "ngModel", "showIcon"], [1, "packing-dialog-row"], ["for", "nb_rouleaux"], ["id", "nb_rouleaux", "styleClass", "w-full", 3, "ngModelChange", "onInput", "ngModel", "min"], ["for", "prix_par_rouleau"], ["id", "prix_par_rouleau", "styleClass", "w-full", 3, "ngModel", "min", "ngModelChange", "onInput", 4, "ngIf"], ["for", "statut"], ["id", "statut", "optionLabel", "label", "optionValue", "value", "placeholder", "S\xE9lectionner un statut", "styleClass", "w-full packing-dialog-select", 3, "ngModelChange", "ngModel", "options"], [1, "packing-dialog-total"], [1, "packing-dialog-total-label"], [1, "packing-dialog-total-value"], ["class", "fixed inset-0 z-50", 4, "ngIf"], [1, "mobile-list"], ["class", "mobile-packing-card", 3, "click", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "mobile-packing-card", 3, "click"], ["class", "mobile-card-avatar", "aria-hidden", "true", 4, "ngIf"], ["class", "mobile-card-avatar mobile-card-avatar--fallback", "aria-hidden", "true", 4, "ngIf"], [1, "mobile-card-body"], [1, "mobile-card-name"], [1, "mobile-card-meta"], [1, "mobile-card-footer"], [1, "mobile-card-summary"], [1, "mobile-status-badge", 3, "ngClass"], ["pButton", "", "pRipple", "", "icon", "pi pi-arrow-right", "class", "p-button-rounded p-button-text p-button-sm mobile-action-btn", "pTooltip", "Modifier", "tooltipPosition", "top", 3, "click", 4, "ngIf"], ["aria-hidden", "true", 1, "mobile-card-avatar"], ["aria-hidden", "true", 1, "mobile-card-avatar", "mobile-card-avatar--fallback"], ["pButton", "", "pRipple", "", "icon", "pi pi-arrow-right", "pTooltip", "Modifier", "tooltipPosition", "top", 1, "p-button-rounded", "p-button-text", "p-button-sm", "mobile-action-btn", 3, "click"], ["class", "mobile-state", 4, "ngIf"], [1, "mobile-state"], [1, "mobile-load-more"], ["pButton", "", "label", "Charger plus", "icon", "pi pi-angle-down", 1, "mobile-load-more-btn", 3, "click"], ["type", "button", "aria-label", "Nouveau packing", 1, "mobile-fab", 3, "click"], [1, "pi", "pi-plus"], ["label", "Ajouter packing", "icon", "pi pi-plus", "severity", "secondary", "class", "mr-2", 3, "onClick", 4, "ngIf"], ["label", "Ajouter packing", "icon", "pi pi-plus", "severity", "secondary", 1, "mr-2", 3, "onClick"], [1, "flex", "items-center", "gap-2"], ["optionLabel", "label", "optionValue", "value", "placeholder", "Statut", "styleClass", "w-40", 3, "ngModelChange", "onChange", "ngModel", "options", "showClear"], ["selectionMode", "range", "dateFormat", "dd/mm/yy", "placeholder", "P\xE9riode", "inputStyleClass", "w-full", "styleClass", "w-56", 3, "ngModelChange", "onSelect", "ngModel", "showIcon", "readonlyInput"], ["icon", "pi pi-filter-slash", "severity", "secondary", "pTooltip", "Effacer les filtres", 3, "outlined", "rounded", "onClick", 4, "ngIf"], ["label", "Export", "icon", "pi pi-download", "severity", "secondary", 3, "onClick"], ["icon", "pi pi-filter-slash", "severity", "secondary", "pTooltip", "Effacer les filtres", 3, "onClick", "outlined", "rounded"], [1, "flex", "items-center", "justify-between"], [1, "m-0"], ["pInputText", "", "type", "text", "placeholder", "Rechercher...", 3, "input"], ["pSortableColumn", "prestataire.nom"], [1, "col-header"], ["field", "prestataire.nom"], ["pSortableColumn", "date"], ["field", "date"], ["pSortableColumn", "nb_rouleaux", 1, "text-right"], [1, "col-header", "justify-end"], ["field", "nb_rouleaux"], ["pSortableColumn", "montant", 1, "text-right"], ["field", "montant"], ["pSortableColumn", "statut", 1, "text-center"], [1, "col-header", "justify-center"], ["field", "statut"], [1, "text-center", 2, "width", "5rem"], [1, "table-row", 3, "dblclick"], ["class", "cell-prestataire", 4, "ngIf"], [1, "cell-secondary", "cell-bold"], [4, "ngIf"], [1, "text-right", "cell-mono", "cell-bold"], [1, "text-center"], [1, "status-badge", 3, "ngClass"], ["icon", "pi pi-arrow-right", "severity", "secondary", "pTooltip", "Modifier", 3, "text", "rounded", "click", 4, "ngIf"], [1, "cell-prestataire"], [1, "cell-prestataire__avatar"], [1, "cell-prestataire__name"], ["icon", "pi pi-arrow-right", "severity", "secondary", "pTooltip", "Modifier", 3, "click", "text", "rounded"], ["colspan", "7"], [1, "empty-state"], [1, "pi", "pi-inbox"], ["height", "2.75rem", "styleClass", "w-full"], ["id", "prestataire", "optionLabel", "nom", "filterBy", "nom,prenom,phone", "placeholder", "S\xE9lectionner un prestataire", "styleClass", "w-full packing-dialog-select", 3, "ngModelChange", "ngModel", "options", "filter"], ["pTemplate", "item"], ["pTemplate", "selectedItem"], [1, "pi", "pi-user", "text-primary"], ["class", "flex items-center gap-2", 4, "ngIf"], [1, "packing-dialog-error"], ["id", "prix_par_rouleau", "styleClass", "w-full", 3, "ngModelChange", "onInput", "ngModel", "min"], [1, "packing-dialog-footer"], ["label", "Annuler", "icon", "pi pi-times", "severity", "secondary", 3, "click", "outlined", "disabled"], ["label", "Enregistrer", "icon", "pi pi-check", 3, "click", "disabled", "loading"], [1, "fixed", "inset-0", "z-50"], [1, "absolute", "inset-0", "bg-black/50", "animate-fadein", 3, "click"], [1, "packing-mobile-slideover", "bg-surface-0", "dark:bg-surface-900", "absolute", "top-0", "right-0", "shadow-xl", "w-full", "h-full", "animate-fadeinright"], [3, "onSaveEvent", "onClose", "packing", "prestataires", "selectedPrestataire", "saving", "dialogLoading", "submitted"]], template: function PackingListe_Template(rf, ctx) {
    if (rf & 1) {
      const _r1 = \u0275\u0275getCurrentView();
      \u0275\u0275element(0, "p-toast");
      \u0275\u0275elementStart(1, "div", 10)(2, "header", 11)(3, "button", 12);
      \u0275\u0275listener("click", function PackingListe_Template_button_click_3_listener() {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.goHome());
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(4, "div", 13)(5, "h1", 14);
      \u0275\u0275text(6, "Packings");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(7, "p", 15);
      \u0275\u0275text(8);
      \u0275\u0275elementEnd()();
      \u0275\u0275element(9, "p-menu", 16, 0);
      \u0275\u0275elementStart(11, "button", 17);
      \u0275\u0275listener("click", function PackingListe_Template_button_click_11_listener($event) {
        \u0275\u0275restoreView(_r1);
        const statusMenu_r2 = \u0275\u0275reference(10);
        return \u0275\u0275resetView(statusMenu_r2.toggle($event));
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(12, "div", 18)(13, "section", 19)(14, "p-iconfield");
      \u0275\u0275element(15, "p-inputicon", 20);
      \u0275\u0275elementStart(16, "input", 21);
      \u0275\u0275twoWayListener("ngModelChange", function PackingListe_Template_input_ngModelChange_16_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.mobileSearchTerm, $event) || (ctx.mobileSearchTerm = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275listener("ngModelChange", function PackingListe_Template_input_ngModelChange_16_listener() {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.onMobileSearchChange());
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(17, PackingListe_section_17_Template, 2, 2, "section", 22)(18, PackingListe_ng_template_18_Template, 2, 2, "ng-template", null, 1, \u0275\u0275templateRefExtractor)(20, PackingListe_div_20_Template, 2, 0, "div", 23);
      \u0275\u0275elementEnd();
      \u0275\u0275template(21, PackingListe_button_21_Template, 2, 0, "button", 24);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(22, "div", 25)(23, "p-toolbar", 26);
      \u0275\u0275template(24, PackingListe_ng_template_24_Template, 1, 1, "ng-template", null, 2, \u0275\u0275templateRefExtractor)(26, PackingListe_ng_template_26_Template, 5, 7, "ng-template", null, 3, \u0275\u0275templateRefExtractor);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(28, "p-table", 27, 4);
      \u0275\u0275twoWayListener("selectionChange", function PackingListe_Template_p_table_selectionChange_28_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.selectedPackings, $event) || (ctx.selectedPackings = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275template(30, PackingListe_ng_template_30_Template, 6, 0, "ng-template", null, 5, \u0275\u0275templateRefExtractor)(32, PackingListe_ng_template_32_Template, 25, 0, "ng-template", null, 6, \u0275\u0275templateRefExtractor)(34, PackingListe_ng_template_34_Template, 16, 12, "ng-template", null, 7, \u0275\u0275templateRefExtractor)(36, PackingListe_ng_template_36_Template, 6, 0, "ng-template", null, 8, \u0275\u0275templateRefExtractor);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(38, "p-dialog", 28);
      \u0275\u0275twoWayListener("visibleChange", function PackingListe_Template_p_dialog_visibleChange_38_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.packingDialog, $event) || (ctx.packingDialog = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275elementStart(39, "div", 29)(40, "section", 30)(41, "h3", 31);
      \u0275\u0275text(42, "Prestataire");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(43, "div", 32)(44, "label", 33);
      \u0275\u0275text(45, "Machiniste");
      \u0275\u0275elementEnd();
      \u0275\u0275template(46, PackingListe_p_skeleton_46_Template, 1, 0, "p-skeleton", 34)(47, PackingListe_p_select_47_Template, 3, 3, "p-select", 35)(48, PackingListe_small_48_Template, 2, 0, "small", 36);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(49, "section", 30)(50, "h3", 31);
      \u0275\u0275text(51, "Informations");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(52, "div", 32)(53, "label", 37);
      \u0275\u0275text(54, "Date");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(55, "p-datepicker", 38);
      \u0275\u0275twoWayListener("ngModelChange", function PackingListe_Template_p_datepicker_ngModelChange_55_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.packing.date, $event) || (ctx.packing.date = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(56, "div", 39)(57, "div", 32)(58, "label", 40);
      \u0275\u0275text(59, "Nombre de rouleaux");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(60, "p-inputnumber", 41);
      \u0275\u0275twoWayListener("ngModelChange", function PackingListe_Template_p_inputnumber_ngModelChange_60_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.packing.nb_rouleaux, $event) || (ctx.packing.nb_rouleaux = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275listener("onInput", function PackingListe_Template_p_inputnumber_onInput_60_listener() {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.calculateMontant());
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(61, "div", 32)(62, "label", 42);
      \u0275\u0275text(63, "Prix / rouleau (GNF)");
      \u0275\u0275elementEnd();
      \u0275\u0275template(64, PackingListe_p_skeleton_64_Template, 1, 0, "p-skeleton", 34)(65, PackingListe_p_inputnumber_65_Template, 1, 2, "p-inputnumber", 43);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(66, "div", 32)(67, "label", 44);
      \u0275\u0275text(68, "Statut");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(69, "p-select", 45);
      \u0275\u0275twoWayListener("ngModelChange", function PackingListe_Template_p_select_ngModelChange_69_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.packing.statut, $event) || (ctx.packing.statut = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(70, "div", 46)(71, "span", 47);
      \u0275\u0275text(72, "Montant total");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(73, "span", 48);
      \u0275\u0275text(74);
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(75, PackingListe_ng_template_75_Template, 3, 4, "ng-template", null, 9, \u0275\u0275templateRefExtractor);
      \u0275\u0275elementEnd();
      \u0275\u0275element(77, "p-confirmdialog");
      \u0275\u0275template(78, PackingListe_div_78_Template, 4, 6, "div", 49);
    }
    if (rf & 2) {
      const mobileListState_r23 = \u0275\u0275reference(19);
      \u0275\u0275advance(8);
      \u0275\u0275textInterpolate2("", ctx.mobileFilteredPackings.length, " packing", ctx.mobileFilteredPackings.length !== 1 ? "s" : "");
      \u0275\u0275advance();
      \u0275\u0275property("model", ctx.mobileStatusMenuItems)("popup", true);
      \u0275\u0275advance(7);
      \u0275\u0275twoWayProperty("ngModel", ctx.mobileSearchTerm);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.loading && ctx.mobileVisiblePackings.length)("ngIfElse", mobileListState_r23);
      \u0275\u0275advance(3);
      \u0275\u0275property("ngIf", !ctx.loading && ctx.canLoadMoreMobile);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.canCreate);
      \u0275\u0275advance(7);
      \u0275\u0275property("value", ctx.packings())("rows", 10)("columns", ctx.cols)("paginator", true)("globalFilterFields", ctx.filterFields)("tableStyle", \u0275\u0275pureFunction0(43, _c1));
      \u0275\u0275twoWayProperty("selection", ctx.selectedPackings);
      \u0275\u0275property("rowHover", true)("showCurrentPageReport", true)("rowsPerPageOptions", \u0275\u0275pureFunction0(44, _c2))("loading", ctx.loading);
      \u0275\u0275advance(10);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(45, _c3));
      \u0275\u0275twoWayProperty("visible", ctx.packingDialog);
      \u0275\u0275property("contentStyle", \u0275\u0275pureFunction0(46, _c4))("header", (ctx.packing == null ? null : ctx.packing.id) ? "D\xE9tails du packing" : "Nouveau packing")("modal", true)("breakpoints", \u0275\u0275pureFunction0(47, _c5))("maximizable", false);
      \u0275\u0275advance(8);
      \u0275\u0275property("ngIf", ctx.dialogLoading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.dialogLoading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.submitted && !ctx.selectedPrestataire && !ctx.dialogLoading);
      \u0275\u0275advance(7);
      \u0275\u0275twoWayProperty("ngModel", ctx.packing.date);
      \u0275\u0275property("showIcon", true);
      \u0275\u0275advance(5);
      \u0275\u0275twoWayProperty("ngModel", ctx.packing.nb_rouleaux);
      \u0275\u0275property("min", 0);
      \u0275\u0275advance(4);
      \u0275\u0275property("ngIf", ctx.dialogLoading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.dialogLoading);
      \u0275\u0275advance(4);
      \u0275\u0275twoWayProperty("ngModel", ctx.packing.statut);
      \u0275\u0275property("options", ctx.statuses);
      \u0275\u0275advance(5);
      \u0275\u0275textInterpolate(ctx.formatCurrency(ctx.packing.montant || 0));
      \u0275\u0275advance(3);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(48, _c6));
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.mobileFormVisible);
    }
  }, dependencies: [
    CommonModule,
    NgClass,
    NgForOf,
    NgIf,
    TableModule,
    Table,
    PrimeTemplate,
    SortableColumn,
    SortIcon,
    FormsModule,
    DefaultValueAccessor,
    NgControlStatus,
    NgModel,
    ButtonModule,
    ButtonDirective,
    Button,
    RippleModule,
    Ripple,
    ToastModule,
    Toast,
    ToolbarModule,
    Toolbar,
    InputTextModule,
    InputText,
    SelectModule,
    Select,
    InputNumberModule,
    InputNumber,
    DialogModule,
    Dialog,
    TagModule,
    InputIconModule,
    InputIcon,
    IconFieldModule,
    IconField,
    ConfirmDialogModule,
    ConfirmDialog,
    DatePickerModule,
    DatePicker,
    AutoCompleteModule,
    TextareaModule,
    TooltipModule,
    Tooltip,
    SkeletonModule,
    Skeleton,
    MenuModule,
    Menu,
    PackingMobileForm,
    PhoneFormatPipe
  ], styles: ["\n\n[_nghost-%COMP%] {\n  display: block;\n}\n.packing-mobile-app[_ngcontent-%COMP%] {\n  display: none;\n}\n@media screen and (max-width: 768px) {\n  [_nghost-%COMP%] {\n    --mobile-primary: #5f6bff;\n    --mobile-text: #334155;\n    --mobile-muted: #7f8ca3;\n    --mobile-card: #ffffff;\n    --mobile-border: #e2e8f0;\n  }\n  .packing-desktop[_ngcontent-%COMP%] {\n    display: none;\n  }\n  .packing-mobile-app[_ngcontent-%COMP%] {\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n    min-height: 100dvh;\n    height: 100dvh;\n    height: 100vh;\n    overflow: hidden;\n    margin-top: calc(-0.25rem - env(safe-area-inset-top));\n    margin-left: -0.875rem;\n    margin-right: -0.875rem;\n    margin-bottom: calc(-0.875rem - env(safe-area-inset-bottom));\n    padding: 0 0.875rem env(safe-area-inset-bottom);\n    padding-left: calc(0.875rem + env(safe-area-inset-left));\n    padding-right: calc(0.875rem + env(safe-area-inset-right));\n    background: #f8fafc;\n    animation: _ngcontent-%COMP%_packingMobileFade 0.24s ease-out;\n  }\n  .mobile-header[_ngcontent-%COMP%] {\n    flex-shrink: 0;\n    display: flex;\n    align-items: center;\n    gap: 0.55rem;\n    margin: 0 -0.875rem 0;\n    padding: calc(0.5rem + env(safe-area-inset-top)) calc(0.875rem + env(safe-area-inset-right)) 0.6rem calc(0.875rem + env(safe-area-inset-left));\n    background: var(--mobile-card);\n    border-bottom: 1px solid var(--mobile-border);\n    box-shadow: 0 1px 3px rgba(15, 23, 42, 0.06);\n    position: sticky;\n    top: 0;\n    z-index: 30;\n  }\n  .mobile-scroll[_ngcontent-%COMP%] {\n    flex: 1;\n    min-height: 0;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 0.75rem;\n    padding-bottom: calc(4rem + env(safe-area-inset-bottom));\n  }\n  .mobile-back[_ngcontent-%COMP%], \n   .mobile-add[_ngcontent-%COMP%] {\n    width: 2.25rem;\n    height: 2.25rem;\n    border-radius: 50%;\n    flex-shrink: 0;\n    color: var(--mobile-primary) !important;\n    background: rgba(95, 107, 255, 0.1) !important;\n  }\n  .mobile-title-wrap[_ngcontent-%COMP%] {\n    flex: 1;\n    min-width: 0;\n  }\n  .mobile-title[_ngcontent-%COMP%] {\n    margin: 0;\n    font-size: 1.25rem;\n    font-weight: 700;\n    color: var(--mobile-text);\n  }\n  .mobile-subtitle[_ngcontent-%COMP%] {\n    margin: 0.15rem 0 0;\n    font-size: 0.8rem;\n    font-weight: 500;\n    color: var(--mobile-muted);\n  }\n  .mobile-search[_ngcontent-%COMP%] {\n    background: var(--mobile-card);\n    border: 1px solid var(--mobile-border);\n    border-radius: 0.75rem;\n    padding: 0.4rem 0.6rem;\n  }\n  .mobile-search[_ngcontent-%COMP%]   .p-iconfield[_ngcontent-%COMP%], \n   .mobile-search[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n  .mobile-search[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%] {\n    border: 0;\n    box-shadow: none;\n    background: transparent;\n    font-size: 0.95rem;\n  }\n  .mobile-list[_ngcontent-%COMP%] {\n    display: flex;\n    flex-direction: column;\n    gap: 0.6rem;\n    margin-top: 1rem;\n  }\n  .mobile-packing-card[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n    gap: 0.875rem;\n    background: var(--mobile-card);\n    border: 1px solid var(--mobile-border);\n    border-radius: 0.875rem;\n    padding: 0.875rem;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n    cursor: pointer;\n    transition: box-shadow 0.2s ease;\n  }\n  .mobile-packing-card[_ngcontent-%COMP%]:active {\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  }\n  .mobile-card-avatar[_ngcontent-%COMP%] {\n    width: 2.75rem;\n    height: 2.75rem;\n    min-width: 2.75rem;\n    min-height: 2.75rem;\n    border-radius: 50%;\n    background:\n      linear-gradient(\n        135deg,\n        var(--mobile-primary) 0%,\n        #7c8aff 100%);\n    color: #fff;\n    font-size: 0.75rem;\n    font-weight: 700;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .mobile-card-avatar--fallback[_ngcontent-%COMP%] {\n    background: var(--mobile-muted);\n  }\n  .mobile-card-body[_ngcontent-%COMP%] {\n    flex: 1;\n    min-width: 0;\n  }\n  .mobile-card-name[_ngcontent-%COMP%] {\n    font-size: 1rem;\n    font-weight: 600;\n    color: var(--mobile-text);\n    line-height: 1.3;\n  }\n  .mobile-card-meta[_ngcontent-%COMP%] {\n    font-size: 0.85rem;\n    color: var(--mobile-muted);\n    margin-top: 0.2rem;\n  }\n  .mobile-card-footer[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 0.5rem;\n    margin-top: 0.5rem;\n    flex-wrap: wrap;\n  }\n  .mobile-card-summary[_ngcontent-%COMP%] {\n    font-size: 0.85rem;\n    font-weight: 600;\n    color: var(--mobile-text);\n  }\n  .mobile-status-badge[_ngcontent-%COMP%] {\n    font-size: 0.72rem;\n    font-weight: 600;\n    padding: 0.2rem 0.5rem;\n    border-radius: 999px;\n  }\n  .mobile-status-badge--warn[_ngcontent-%COMP%] {\n    background: #fffbeb;\n    color: #d97706;\n  }\n  .mobile-status-badge--success[_ngcontent-%COMP%] {\n    background: #ecfdf5;\n    color: #059669;\n  }\n  .mobile-status-badge--danger[_ngcontent-%COMP%] {\n    background: #fef2f2;\n    color: #dc2626;\n  }\n  .mobile-action-btn[_ngcontent-%COMP%] {\n    width: 2rem;\n    height: 2rem;\n    color: var(--mobile-primary) !important;\n  }\n  .mobile-state[_ngcontent-%COMP%] {\n    margin-top: 1rem;\n    background: var(--mobile-card);\n    border: 1px dashed var(--mobile-border);\n    border-radius: 0.875rem;\n    padding: 1.5rem;\n    text-align: center;\n    color: var(--mobile-muted);\n    font-size: 0.9rem;\n  }\n  .mobile-load-more[_ngcontent-%COMP%] {\n    padding-top: 0.5rem;\n  }\n  .mobile-load-more-btn[_ngcontent-%COMP%] {\n    width: 100%;\n    border-radius: 999px;\n    font-weight: 600;\n  }\n  .mobile-fab[_ngcontent-%COMP%] {\n    position: fixed;\n    bottom: calc(1rem + env(safe-area-inset-bottom));\n    right: calc(1rem + env(safe-area-inset-right));\n    z-index: 25;\n    width: 3.5rem;\n    height: 3.5rem;\n    min-width: 3.5rem;\n    min-height: 3.5rem;\n    padding: 0;\n    border: none;\n    border-radius: 50%;\n    background: var(--mobile-primary);\n    color: #fff;\n    box-shadow: 0 4px 14px rgba(95, 107, 255, 0.4);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n    -webkit-tap-highlight-color: transparent;\n  }\n  .mobile-fab[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%] {\n    font-size: 1.35rem;\n  }\n  .mobile-fab[_ngcontent-%COMP%]:active {\n    transform: scale(0.96);\n  }\n}\n@keyframes _ngcontent-%COMP%_packingMobileFade {\n  from {\n    opacity: 0;\n    transform: translateY(6px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.tableau-card[_ngcontent-%COMP%] {\n  border-radius: 14px !important;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;\n  overflow: hidden;\n}\n[_nghost-%COMP%]     .p-datatable .p-datatable-caption {\n  padding: 1.5rem 1.75rem 1.75rem;\n  border-bottom: 1px solid var(--p-surface-100);\n  margin-bottom: 0;\n}\n.table-caption[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1.5rem;\n  flex-wrap: wrap;\n}\n.table-caption__filters[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.table-caption__actions[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n[_nghost-%COMP%]     .p-datatable .p-datatable-thead > tr > th {\n  padding: 1rem 1.25rem;\n}\n[_nghost-%COMP%]     .p-datatable .p-datatable-tbody > tr > td {\n  padding: 1.1rem 1.25rem;\n}\n.col-header[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.35rem;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.03em;\n  color: var(--p-surface-500);\n}\n.table-row[_ngcontent-%COMP%] {\n  cursor: pointer;\n  transition: background 0.15s ease;\n}\n.cell-prestataire[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.cell-prestataire__avatar[_ngcontent-%COMP%] {\n  width: 34px;\n  height: 34px;\n  border-radius: 9px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 0.8rem;\n  flex-shrink: 0;\n}\n.cell-prestataire__name[_ngcontent-%COMP%] {\n  font-weight: 600;\n  font-size: 0.9rem;\n  color: var(--p-surface-800);\n}\n.cell-secondary[_ngcontent-%COMP%] {\n  color: var(--p-surface-600);\n  font-size: 0.9rem;\n}\n.cell-mono[_ngcontent-%COMP%] {\n  font-variant-numeric: tabular-nums;\n  font-size: 0.9rem;\n}\n.cell-success[_ngcontent-%COMP%] {\n  color: #059669;\n}\n.cell-bold[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--p-surface-800);\n}\n.status-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.78rem;\n  font-weight: 600;\n  letter-spacing: 0.01em;\n}\n.status-badge--warn[_ngcontent-%COMP%] {\n  background: #fffbeb;\n  color: #d97706;\n}\n.status-badge--success[_ngcontent-%COMP%] {\n  background: #ecfdf5;\n  color: #059669;\n}\n.status-badge--danger[_ngcontent-%COMP%] {\n  background: #fef2f2;\n  color: #dc2626;\n}\n.empty-state[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 3rem 0;\n  color: var(--p-surface-300);\n}\n.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 2.5rem;\n}\n.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n}\n[_nghost-%COMP%]     .packing-dialog .p-dialog-content {\n  padding: 1.25rem 1.5rem;\n  overflow-y: auto;\n}\n[_nghost-%COMP%]     .packing-dialog .p-dialog-footer {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n  justify-content: flex-end;\n  padding: 1rem 1.5rem;\n  border-top: 1px solid var(--p-surface-200);\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-content {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-section {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-section-title {\n  margin: 0;\n  font-size: 0.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  color: var(--p-surface-500);\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-field {\n  display: flex;\n  flex-direction: column;\n  gap: 0.35rem;\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-field label {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--p-surface-700);\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-error {\n  font-size: 0.8rem;\n  color: var(--p-red-500);\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-total {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  background: var(--p-primary-50);\n  border-radius: 0.75rem;\n  margin-top: 0.25rem;\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-total-label {\n  font-size: 1rem;\n  font-weight: 700;\n  color: var(--p-surface-700);\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-total-value {\n  font-size: 1.35rem;\n  font-weight: 700;\n  color: var(--p-primary-600);\n}\n[_nghost-%COMP%]     .packing-dialog .packing-dialog-footer {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n  justify-content: flex-end;\n}\n@media (max-width: 480px) {\n  [_nghost-%COMP%]     .packing-dialog .packing-dialog-row {\n    grid-template-columns: 1fr;\n  }\n  [_nghost-%COMP%]     .packing-dialog .packing-dialog-footer {\n    flex-direction: column;\n  }\n  [_nghost-%COMP%]     .packing-dialog .packing-dialog-footer .p-button {\n    width: 100%;\n    justify-content: center;\n  }\n}\n.packing-mobile-slideover[_ngcontent-%COMP%] {\n  z-index: 51;\n}\n.app-dark[_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], \n.app-dark[_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%] {\n  color: var(--p-surface-100);\n}\n.app-dark[_nghost-%COMP%]   .col-header[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .col-header[_ngcontent-%COMP%] {\n  color: var(--p-surface-400);\n}\n.app-dark[_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%] {\n  background: rgba(220, 38, 38, 0.12);\n}\n.app-dark[_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%] {\n  background: rgba(217, 119, 6, 0.12);\n}\n.app-dark[_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%], .app-dark   [_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%] {\n  background: rgba(5, 150, 105, 0.12);\n}\n.app-dark   [_nghost-%COMP%]     .p-datatable .p-datatable-caption {\n  border-bottom-color: var(--p-surface-700);\n}\n/*# sourceMappingURL=packing-liste.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PackingListe, [{
    type: Component,
    args: [{ selector: "app-packing-liste", standalone: true, imports: [
      CommonModule,
      TableModule,
      FormsModule,
      ButtonModule,
      RippleModule,
      ToastModule,
      ToolbarModule,
      InputTextModule,
      SelectModule,
      InputNumberModule,
      DialogModule,
      TagModule,
      InputIconModule,
      IconFieldModule,
      ConfirmDialogModule,
      DatePickerModule,
      AutoCompleteModule,
      TextareaModule,
      TooltipModule,
      SkeletonModule,
      MenuModule,
      PhoneFormatPipe,
      PackingMobileForm
    ], providers: [MessageService, ConfirmationService], template: `<p-toast />\r
\r
<!-- Mobile: app-like list (\u2264768px) -->\r
<div class="packing-mobile-app">\r
  <header class="mobile-header">\r
    <button\r
      pButton\r
      pRipple\r
      icon="pi pi-arrow-left"\r
      class="p-button-rounded p-button-text mobile-back"\r
      aria-label="Retour \xE0 l'accueil"\r
      (click)="goHome()"\r
    ></button>\r
    <div class="mobile-title-wrap">\r
      <h1 class="mobile-title">Packings</h1>\r
      <p class="mobile-subtitle">{{ mobileFilteredPackings.length }} packing{{ mobileFilteredPackings.length !== 1 ? 's' : '' }}</p>\r
    </div>\r
    <p-menu\r
      #statusMenu\r
      [model]="mobileStatusMenuItems"\r
      [popup]="true"\r
      appendTo="body"\r
      styleClass="mobile-status-menu"\r
    />\r
    <button\r
      pButton\r
      pRipple \r
      icon="pi pi-filter"\r
      class="p-button-rounded p-button-text mobile-add"\r
      aria-label="Filtrer par statut"\r
      (click)="statusMenu.toggle($event)"\r
    ></button>\r
  </header>\r
\r
  <div class="mobile-scroll">\r
    <section class="mobile-search">\r
      <p-iconfield>\r
        <p-inputicon styleClass="pi pi-search" />\r
        <input\r
          pInputText\r
          type="text"\r
          [(ngModel)]="mobileSearchTerm"\r
          (ngModelChange)="onMobileSearchChange()"\r
          placeholder="Prestataire, r\xE9f\xE9rence..."\r
          class="w-full"\r
        />\r
      </p-iconfield>\r
    </section>\r
\r
    <section class="mobile-list" *ngIf="!loading && mobileVisiblePackings.length; else mobileListState">\r
      <article\r
        class="mobile-packing-card"\r
        *ngFor="let packing of mobileVisiblePackings; trackBy: trackByPackingId"\r
        (click)="canUpdate && editPacking(packing)"\r
      >\r
        <div class="mobile-card-avatar" aria-hidden="true" *ngIf="packing.prestataire">\r
          {{ getPrestataireInitials(packing.prestataire) }}\r
        </div>\r
        <div class="mobile-card-avatar mobile-card-avatar--fallback" *ngIf="!packing.prestataire" aria-hidden="true">?</div>\r
        <div class="mobile-card-body">\r
          <div class="mobile-card-name">{{ packing.prestataire ? packing.prestataire.prenom + ' ' + packing.prestataire.nom : packing.reference || 'Packing' }}</div>\r
          <div class="mobile-card-meta">{{ formatDateDisplay(packing.date) }} \xB7 {{ packing.nb_rouleaux }} rouleaux</div>\r
          <div class="mobile-card-footer">\r
            <span class="mobile-card-summary">{{ formatCurrency(packing.montant) }}</span>\r
            <span\r
              class="mobile-status-badge"\r
              [ngClass]="{\r
                'mobile-status-badge--warn': packing.statut === 'a_valider',\r
                'mobile-status-badge--success': packing.statut === 'valide',\r
                'mobile-status-badge--danger': packing.statut === 'annule'\r
              }"\r
            >{{ getStatutLabel(packing.statut) }}</span>\r
            <button\r
              *ngIf="canUpdate"\r
              pButton\r
              pRipple\r
              icon="pi pi-arrow-right"\r
              class="p-button-rounded p-button-text p-button-sm mobile-action-btn"\r
              pTooltip="Modifier"\r
              tooltipPosition="top"\r
              (click)="$event.stopPropagation(); editPacking(packing)"\r
            ></button>\r
          </div>\r
        </div>\r
      </article>\r
    </section>\r
\r
    <ng-template #mobileListState>\r
      <div class="mobile-state" *ngIf="loading">Chargement...</div>\r
      <div class="mobile-state" *ngIf="!loading && !mobileFilteredPackings.length">Aucun packing.</div>\r
    </ng-template>\r
\r
    <div class="mobile-load-more" *ngIf="!loading && canLoadMoreMobile">\r
      <button pButton label="Charger plus" icon="pi pi-angle-down" class="mobile-load-more-btn" (click)="loadMoreMobile()"></button>\r
    </div>\r
  </div>\r
\r
  <button\r
    *ngIf="canCreate"\r
    type="button"\r
    class="mobile-fab"\r
    aria-label="Nouveau packing"\r
    (click)="openNew()"\r
  >\r
    <i class="pi pi-plus"></i>\r
  </button>\r
</div>\r
\r
<!-- Desktop: toolbar + table -->\r
<div class="card packing-desktop">\r
    <p-toolbar styleClass="mb-12">\r
        <ng-template #start>\r
            <p-button *ngIf="canCreate" label="Ajouter packing" icon="pi pi-plus" severity="secondary" class="mr-2" (onClick)="openNew()" />\r
        </ng-template>\r
\r
        <ng-template #end>\r
            <div class="flex items-center gap-2">\r
                <p-select\r
                    [(ngModel)]="filterStatut"\r
                    [options]="statuses"\r
                    optionLabel="label"\r
                    optionValue="value"\r
                    placeholder="Statut"\r
                    [showClear]="true"\r
                    (onChange)="onDateFilter()"\r
                    styleClass="w-40"\r
                />\r
                <p-datepicker\r
                    [(ngModel)]="filterDateRange" \r
                    selectionMode="range"\r
                    dateFormat="dd/mm/yy"\r
                    placeholder="P\xE9riode"\r
                    [showIcon]="true"\r
                    (onSelect)="onDateRangeSelect()"\r
                    inputStyleClass="w-full"\r
                    styleClass="w-56"\r
                    [readonlyInput]="true"\r
                />\r
                <p-button\r
                    icon="pi pi-filter-slash"\r
                    severity="secondary"\r
                    [outlined]="true"\r
                    [rounded]="true"\r
                    (onClick)="clearDateFilters()"\r
                    *ngIf="filterDateRange || filterStatut"\r
                    pTooltip="Effacer les filtres"\r
                />\r
                <p-button label="Export" icon="pi pi-download" severity="secondary" (onClick)="exportCSV()" />\r
            </div>\r
        </ng-template>\r
    </p-toolbar>\r
\r
    <p-table\r
        #dt\r
        [value]="packings()"\r
        [rows]="10"\r
        [columns]="cols"\r
        [paginator]="true"\r
        [globalFilterFields]="filterFields"\r
        [tableStyle]="{ 'min-width': '65rem' }"\r
        [(selection)]="selectedPackings"\r
        [rowHover]="true"\r
        dataKey="id"\r
        currentPageReportTemplate="  {first} \xE0 {last} sur {totalRecords} packings"\r
        [showCurrentPageReport]="true"\r
        [rowsPerPageOptions]="[10, 20, 30]"\r
        [loading]="loading"\r
    >\r
        <ng-template #caption>\r
            <div class="flex items-center justify-between">\r
                <h5 class="m-0">Gestion des Packings</h5>\r
                <p-iconfield>\r
                    <p-inputicon styleClass="pi pi-search" />\r
                    <input pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Rechercher..." />\r
                </p-iconfield>\r
            </div>\r
        </ng-template>\r
\r
        <ng-template #header>\r
            <tr>\r
                <th pSortableColumn="prestataire.nom">\r
                    <span class="col-header">Prestataire <p-sortIcon field="prestataire.nom" /></span>\r
                </th>\r
                <th><span class="col-header">T\xE9l\xE9phone</span></th>\r
                <th pSortableColumn="date">\r
                    <span class="col-header">Date <p-sortIcon field="date" /></span>\r
                </th>\r
                <th pSortableColumn="nb_rouleaux" class="text-right">\r
                    <span class="col-header justify-end">Rouleaux <p-sortIcon field="nb_rouleaux" /></span>\r
                </th>\r
                <th pSortableColumn="montant" class="text-right">\r
                    <span class="col-header justify-end">Montant <p-sortIcon field="montant" /></span>\r
                </th>\r
                <th pSortableColumn="statut" class="text-center">\r
                    <span class="col-header justify-center">Statut <p-sortIcon field="statut" /></span>\r
                </th>\r
                <th class="text-center" style="width: 5rem"></th>\r
            </tr>\r
        </ng-template>\r
\r
        <ng-template #body let-packing>\r
            <tr class="table-row" (dblclick)="canUpdate && editPacking(packing)">\r
                <td>\r
                    <div class="cell-prestataire" *ngIf="packing.prestataire">\r
                        <span class="cell-prestataire__avatar" [style.background]="'var(--p-primary-50)'" [style.color]="'var(--p-primary-600)'">\r
                            {{ packing.prestataire.nom?.charAt(0)?.toUpperCase() }}\r
                        </span>\r
                        <span class="cell-prestataire__name">{{ packing.prestataire.nom }} {{ packing.prestataire.prenom }}</span>\r
                    </div>\r
                </td>\r
                <td class="cell-secondary cell-bold">\r
                    <span *ngIf="packing.prestataire">{{ packing.prestataire.phone | phoneFormat:'INT' }}</span>\r
                </td>\r
\r
                <td class="cell-secondary cell-bold">{{ formatDateDisplay(packing.date) }}</td>\r
\r
                <td class="text-right cell-mono cell-bold">{{ packing.nb_rouleaux }}</td>\r
\r
                <td class="text-right cell-mono cell-bold">{{ formatCurrency(packing.montant) }}</td>\r
                <td class="text-center">\r
                    <span class="status-badge" [ngClass]="{\r
                        'status-badge--warn': packing.statut === 'a_valider',\r
                        'status-badge--success': packing.statut === 'valide',\r
                        'status-badge--danger': packing.statut === 'annule'\r
                    }">\r
                        {{ getStatutLabel(packing.statut) }}\r
                    </span>\r
                </td>\r
                <td class="text-center">\r
                    <p-button *ngIf="canUpdate" icon="pi pi-arrow-right" severity="secondary" [text]="true" [rounded]="true" pTooltip="Modifier" (click)="editPacking(packing)" />\r
                </td>\r
            </tr>\r
        </ng-template>\r
\r
        <ng-template #emptymessage>\r
            <tr>\r
                <td colspan="7">\r
                    <div class="empty-state">\r
                        <i class="pi pi-inbox"></i>\r
                        <span>Aucun packing trouv\xE9</span>\r
                    </div>\r
                </td>\r
            </tr>\r
        </ng-template>\r
    </p-table>\r
</div>\r
\r
<p-dialog\r
    [(visible)]="packingDialog"\r
    [style]="{ width: '750px', maxWidth: '95vw' }"\r
    [contentStyle]="{ overflow: 'visible' }"\r
    [header]="packing?.id ? 'D\xE9tails du packing' : 'Nouveau packing'"\r
    [modal]="true"\r
    styleClass="packing-dialog"\r
    [breakpoints]="{ '960px': '95vw', '768px': '100vw', '480px': '100vw' }"\r
    [maximizable]="false"\r
>\r
    <div class="packing-dialog-content">\r
        <section class="packing-dialog-section">\r
            <h3 class="packing-dialog-section-title">Prestataire</h3>\r
            <div class="packing-dialog-field">\r
                <label for="prestataire">Machiniste</label>\r
                <p-skeleton *ngIf="dialogLoading" height="2.75rem" styleClass="w-full" />\r
                <p-select\r
                    *ngIf="!dialogLoading"\r
                    id="prestataire"\r
                    [(ngModel)]="selectedPrestataire"\r
                    [options]="prestataires"\r
                    optionLabel="nom"\r
                    [filter]="true"\r
                    filterBy="nom,prenom,phone"\r
                    placeholder="S\xE9lectionner un prestataire"\r
                    styleClass="w-full packing-dialog-select"\r
                >\r
                    <ng-template let-prestataire pTemplate="item">\r
                        <div class="flex items-center gap-2">\r
                            <i class="pi pi-user text-primary"></i>\r
                            <span>{{ prestataire.prenom }} {{ prestataire.nom }} \xB7 {{ prestataire.phone }}</span>\r
                        </div>\r
                    </ng-template>\r
                    <ng-template let-prestataire pTemplate="selectedItem">\r
                        <div class="flex items-center gap-2" *ngIf="prestataire">\r
                            <i class="pi pi-user text-primary"></i>\r
                            <span>{{ prestataire.prenom }} {{ prestataire.nom }}</span>\r
                        </div>\r
                    </ng-template>\r
                </p-select>\r
                <small class="packing-dialog-error" *ngIf="submitted && !selectedPrestataire && !dialogLoading">Le prestataire est requis.</small>\r
            </div>\r
        </section>\r
\r
        <section class="packing-dialog-section">\r
            <h3 class="packing-dialog-section-title">Informations</h3>\r
            <div class="packing-dialog-field">\r
                <label for="date">Date</label>\r
                <p-datepicker\r
                    id="date"\r
                    [(ngModel)]="packing.date"\r
                    dateFormat="dd/mm/yy"\r
                    [showIcon]="true"\r
                    inputStyleClass="w-full"\r
                    styleClass="w-full"\r
                />\r
            </div>\r
            <div class="packing-dialog-row">\r
                <div class="packing-dialog-field">\r
                    <label for="nb_rouleaux">Nombre de rouleaux</label>\r
                    <p-inputnumber\r
                        id="nb_rouleaux"\r
                        [(ngModel)]="packing.nb_rouleaux"\r
                        (onInput)="calculateMontant()"\r
                        [min]="0"\r
                        styleClass="w-full"\r
                    />\r
                </div>\r
                <div class="packing-dialog-field">\r
                    <label for="prix_par_rouleau">Prix / rouleau (GNF)</label>\r
                    <p-skeleton *ngIf="dialogLoading" height="2.75rem" styleClass="w-full" />\r
                    <p-inputnumber\r
                        *ngIf="!dialogLoading"\r
                        id="prix_par_rouleau"\r
                        [(ngModel)]="packing.prix_par_rouleau"\r
                        (onInput)="calculateMontant()"\r
                        [min]="0"\r
                        styleClass="w-full"\r
                    />\r
                </div>\r
            </div>\r
            <div class="packing-dialog-field">\r
                <label for="statut">Statut</label>\r
                <p-select\r
                    id="statut"\r
                    [(ngModel)]="packing.statut"\r
                    [options]="statuses"\r
                    optionLabel="label"\r
                    optionValue="value"\r
                    placeholder="S\xE9lectionner un statut"\r
                    styleClass="w-full packing-dialog-select"\r
                />\r
            </div>\r
        </section>\r
\r
        <div class="packing-dialog-total">\r
            <span class="packing-dialog-total-label">Montant total</span>\r
            <span class="packing-dialog-total-value">{{ formatCurrency(packing.montant || 0) }}</span>\r
        </div>\r
    </div>\r
\r
    <ng-template #footer>\r
        <div class="packing-dialog-footer">\r
            <p-button label="Annuler" icon="pi pi-times" severity="secondary" [outlined]="true" (click)="hideDialog()" [disabled]="saving" />\r
            <p-button label="Enregistrer" icon="pi pi-check" (click)="savePacking()" [disabled]="saving || dialogLoading" [loading]="saving" />\r
        </div>\r
    </ng-template>\r
</p-dialog>\r
\r
<p-confirmdialog [style]="{ width: '450px' }" />\r
\r
<!-- Mobile slideover form (full screen, comme comptabilite-packing-paiement) -->\r
<div class="fixed inset-0 z-50" *ngIf="mobileFormVisible">\r
    <div class="absolute inset-0 bg-black/50 animate-fadein" (click)="closeMobileForm()"></div>\r
    <div class="packing-mobile-slideover bg-surface-0 dark:bg-surface-900 absolute top-0 right-0 shadow-xl w-full h-full animate-fadeinright">\r
        <app-packing-mobile-form\r
            [packing]="packing"\r
            [prestataires]="prestataires"\r
            [selectedPrestataire]="selectedPrestataire"\r
            [saving]="saving"\r
            [dialogLoading]="dialogLoading"\r
            [submitted]="submitted"\r
            (onSaveEvent)="onMobileFormSave($event)"\r
            (onClose)="closeMobileForm()"\r
        ></app-packing-mobile-form>\r
    </div>\r
</div>\r
`, styles: ["/* src/app/pages/packings/packing-liste/packing-liste.scss */\n:host {\n  display: block;\n}\n.packing-mobile-app {\n  display: none;\n}\n@media screen and (max-width: 768px) {\n  :host {\n    --mobile-primary: #5f6bff;\n    --mobile-text: #334155;\n    --mobile-muted: #7f8ca3;\n    --mobile-card: #ffffff;\n    --mobile-border: #e2e8f0;\n  }\n  .packing-desktop {\n    display: none;\n  }\n  .packing-mobile-app {\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n    min-height: 100dvh;\n    height: 100dvh;\n    height: 100vh;\n    overflow: hidden;\n    margin-top: calc(-0.25rem - env(safe-area-inset-top));\n    margin-left: -0.875rem;\n    margin-right: -0.875rem;\n    margin-bottom: calc(-0.875rem - env(safe-area-inset-bottom));\n    padding: 0 0.875rem env(safe-area-inset-bottom);\n    padding-left: calc(0.875rem + env(safe-area-inset-left));\n    padding-right: calc(0.875rem + env(safe-area-inset-right));\n    background: #f8fafc;\n    animation: packingMobileFade 0.24s ease-out;\n  }\n  .mobile-header {\n    flex-shrink: 0;\n    display: flex;\n    align-items: center;\n    gap: 0.55rem;\n    margin: 0 -0.875rem 0;\n    padding: calc(0.5rem + env(safe-area-inset-top)) calc(0.875rem + env(safe-area-inset-right)) 0.6rem calc(0.875rem + env(safe-area-inset-left));\n    background: var(--mobile-card);\n    border-bottom: 1px solid var(--mobile-border);\n    box-shadow: 0 1px 3px rgba(15, 23, 42, 0.06);\n    position: sticky;\n    top: 0;\n    z-index: 30;\n  }\n  .mobile-scroll {\n    flex: 1;\n    min-height: 0;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 0.75rem;\n    padding-bottom: calc(4rem + env(safe-area-inset-bottom));\n  }\n  .mobile-back,\n  .mobile-add {\n    width: 2.25rem;\n    height: 2.25rem;\n    border-radius: 50%;\n    flex-shrink: 0;\n    color: var(--mobile-primary) !important;\n    background: rgba(95, 107, 255, 0.1) !important;\n  }\n  .mobile-title-wrap {\n    flex: 1;\n    min-width: 0;\n  }\n  .mobile-title {\n    margin: 0;\n    font-size: 1.25rem;\n    font-weight: 700;\n    color: var(--mobile-text);\n  }\n  .mobile-subtitle {\n    margin: 0.15rem 0 0;\n    font-size: 0.8rem;\n    font-weight: 500;\n    color: var(--mobile-muted);\n  }\n  .mobile-search {\n    background: var(--mobile-card);\n    border: 1px solid var(--mobile-border);\n    border-radius: 0.75rem;\n    padding: 0.4rem 0.6rem;\n  }\n  .mobile-search .p-iconfield,\n  .mobile-search .p-inputtext {\n    width: 100%;\n  }\n  .mobile-search .p-inputtext {\n    border: 0;\n    box-shadow: none;\n    background: transparent;\n    font-size: 0.95rem;\n  }\n  .mobile-list {\n    display: flex;\n    flex-direction: column;\n    gap: 0.6rem;\n    margin-top: 1rem;\n  }\n  .mobile-packing-card {\n    display: flex;\n    align-items: center;\n    gap: 0.875rem;\n    background: var(--mobile-card);\n    border: 1px solid var(--mobile-border);\n    border-radius: 0.875rem;\n    padding: 0.875rem;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n    cursor: pointer;\n    transition: box-shadow 0.2s ease;\n  }\n  .mobile-packing-card:active {\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  }\n  .mobile-card-avatar {\n    width: 2.75rem;\n    height: 2.75rem;\n    min-width: 2.75rem;\n    min-height: 2.75rem;\n    border-radius: 50%;\n    background:\n      linear-gradient(\n        135deg,\n        var(--mobile-primary) 0%,\n        #7c8aff 100%);\n    color: #fff;\n    font-size: 0.75rem;\n    font-weight: 700;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .mobile-card-avatar--fallback {\n    background: var(--mobile-muted);\n  }\n  .mobile-card-body {\n    flex: 1;\n    min-width: 0;\n  }\n  .mobile-card-name {\n    font-size: 1rem;\n    font-weight: 600;\n    color: var(--mobile-text);\n    line-height: 1.3;\n  }\n  .mobile-card-meta {\n    font-size: 0.85rem;\n    color: var(--mobile-muted);\n    margin-top: 0.2rem;\n  }\n  .mobile-card-footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 0.5rem;\n    margin-top: 0.5rem;\n    flex-wrap: wrap;\n  }\n  .mobile-card-summary {\n    font-size: 0.85rem;\n    font-weight: 600;\n    color: var(--mobile-text);\n  }\n  .mobile-status-badge {\n    font-size: 0.72rem;\n    font-weight: 600;\n    padding: 0.2rem 0.5rem;\n    border-radius: 999px;\n  }\n  .mobile-status-badge--warn {\n    background: #fffbeb;\n    color: #d97706;\n  }\n  .mobile-status-badge--success {\n    background: #ecfdf5;\n    color: #059669;\n  }\n  .mobile-status-badge--danger {\n    background: #fef2f2;\n    color: #dc2626;\n  }\n  .mobile-action-btn {\n    width: 2rem;\n    height: 2rem;\n    color: var(--mobile-primary) !important;\n  }\n  .mobile-state {\n    margin-top: 1rem;\n    background: var(--mobile-card);\n    border: 1px dashed var(--mobile-border);\n    border-radius: 0.875rem;\n    padding: 1.5rem;\n    text-align: center;\n    color: var(--mobile-muted);\n    font-size: 0.9rem;\n  }\n  .mobile-load-more {\n    padding-top: 0.5rem;\n  }\n  .mobile-load-more-btn {\n    width: 100%;\n    border-radius: 999px;\n    font-weight: 600;\n  }\n  .mobile-fab {\n    position: fixed;\n    bottom: calc(1rem + env(safe-area-inset-bottom));\n    right: calc(1rem + env(safe-area-inset-right));\n    z-index: 25;\n    width: 3.5rem;\n    height: 3.5rem;\n    min-width: 3.5rem;\n    min-height: 3.5rem;\n    padding: 0;\n    border: none;\n    border-radius: 50%;\n    background: var(--mobile-primary);\n    color: #fff;\n    box-shadow: 0 4px 14px rgba(95, 107, 255, 0.4);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n    -webkit-tap-highlight-color: transparent;\n  }\n  .mobile-fab .pi {\n    font-size: 1.35rem;\n  }\n  .mobile-fab:active {\n    transform: scale(0.96);\n  }\n}\n@keyframes packingMobileFade {\n  from {\n    opacity: 0;\n    transform: translateY(6px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.tableau-card {\n  border-radius: 14px !important;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;\n  overflow: hidden;\n}\n:host ::ng-deep .p-datatable .p-datatable-caption {\n  padding: 1.5rem 1.75rem 1.75rem;\n  border-bottom: 1px solid var(--p-surface-100);\n  margin-bottom: 0;\n}\n.table-caption {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1.5rem;\n  flex-wrap: wrap;\n}\n.table-caption__filters {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.table-caption__actions {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n:host ::ng-deep .p-datatable .p-datatable-thead > tr > th {\n  padding: 1rem 1.25rem;\n}\n:host ::ng-deep .p-datatable .p-datatable-tbody > tr > td {\n  padding: 1.1rem 1.25rem;\n}\n.col-header {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.35rem;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.03em;\n  color: var(--p-surface-500);\n}\n.table-row {\n  cursor: pointer;\n  transition: background 0.15s ease;\n}\n.cell-prestataire {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.cell-prestataire__avatar {\n  width: 34px;\n  height: 34px;\n  border-radius: 9px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 0.8rem;\n  flex-shrink: 0;\n}\n.cell-prestataire__name {\n  font-weight: 600;\n  font-size: 0.9rem;\n  color: var(--p-surface-800);\n}\n.cell-secondary {\n  color: var(--p-surface-600);\n  font-size: 0.9rem;\n}\n.cell-mono {\n  font-variant-numeric: tabular-nums;\n  font-size: 0.9rem;\n}\n.cell-success {\n  color: #059669;\n}\n.cell-bold {\n  font-weight: 600;\n  color: var(--p-surface-800);\n}\n.status-badge {\n  display: inline-block;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.78rem;\n  font-weight: 600;\n  letter-spacing: 0.01em;\n}\n.status-badge--warn {\n  background: #fffbeb;\n  color: #d97706;\n}\n.status-badge--success {\n  background: #ecfdf5;\n  color: #059669;\n}\n.status-badge--danger {\n  background: #fef2f2;\n  color: #dc2626;\n}\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 3rem 0;\n  color: var(--p-surface-300);\n}\n.empty-state i {\n  font-size: 2.5rem;\n}\n.empty-state span {\n  font-size: 0.9rem;\n}\n:host ::ng-deep .packing-dialog .p-dialog-content {\n  padding: 1.25rem 1.5rem;\n  overflow-y: auto;\n}\n:host ::ng-deep .packing-dialog .p-dialog-footer {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n  justify-content: flex-end;\n  padding: 1rem 1.5rem;\n  border-top: 1px solid var(--p-surface-200);\n}\n:host ::ng-deep .packing-dialog .packing-dialog-content {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n:host ::ng-deep .packing-dialog .packing-dialog-section {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n:host ::ng-deep .packing-dialog .packing-dialog-section-title {\n  margin: 0;\n  font-size: 0.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  color: var(--p-surface-500);\n}\n:host ::ng-deep .packing-dialog .packing-dialog-field {\n  display: flex;\n  flex-direction: column;\n  gap: 0.35rem;\n}\n:host ::ng-deep .packing-dialog .packing-dialog-field label {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--p-surface-700);\n}\n:host ::ng-deep .packing-dialog .packing-dialog-error {\n  font-size: 0.8rem;\n  color: var(--p-red-500);\n}\n:host ::ng-deep .packing-dialog .packing-dialog-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n}\n:host ::ng-deep .packing-dialog .packing-dialog-total {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  background: var(--p-primary-50);\n  border-radius: 0.75rem;\n  margin-top: 0.25rem;\n}\n:host ::ng-deep .packing-dialog .packing-dialog-total-label {\n  font-size: 1rem;\n  font-weight: 700;\n  color: var(--p-surface-700);\n}\n:host ::ng-deep .packing-dialog .packing-dialog-total-value {\n  font-size: 1.35rem;\n  font-weight: 700;\n  color: var(--p-primary-600);\n}\n:host ::ng-deep .packing-dialog .packing-dialog-footer {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n  justify-content: flex-end;\n}\n@media (max-width: 480px) {\n  :host ::ng-deep .packing-dialog .packing-dialog-row {\n    grid-template-columns: 1fr;\n  }\n  :host ::ng-deep .packing-dialog .packing-dialog-footer {\n    flex-direction: column;\n  }\n  :host ::ng-deep .packing-dialog .packing-dialog-footer .p-button {\n    width: 100%;\n    justify-content: center;\n  }\n}\n.packing-mobile-slideover {\n  z-index: 51;\n}\n:host-context(.app-dark) .cell-prestataire__name,\n:host-context(.app-dark) .cell-bold {\n  color: var(--p-surface-100);\n}\n:host-context(.app-dark) .col-header {\n  color: var(--p-surface-400);\n}\n:host-context(.app-dark) .status-badge--danger {\n  background: rgba(220, 38, 38, 0.12);\n}\n:host-context(.app-dark) .status-badge--warn {\n  background: rgba(217, 119, 6, 0.12);\n}\n:host-context(.app-dark) .status-badge--success {\n  background: rgba(5, 150, 105, 0.12);\n}\n:host-context(.app-dark) :host ::ng-deep .p-datatable .p-datatable-caption {\n  border-bottom-color: var(--p-surface-700);\n}\n/*# sourceMappingURL=packing-liste.css.map */\n"] }]
  }], () => [{ type: PackingService }, { type: PrestataireService }, { type: ParametresService }, { type: MessageService }, { type: ConfirmationService }, { type: AuthService }, { type: Router }, { type: Document, decorators: [{
    type: Inject,
    args: [DOCUMENT]
  }] }], { dt: [{
    type: ViewChild,
    args: ["dt"]
  }], onWindowResize: [{
    type: HostListener,
    args: ["window:resize"]
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(PackingListe, { className: "PackingListe", filePath: "src/app/pages/packings/packing-liste/packing-liste.ts", lineNumber: 86 });
})();

// src/app/pages/packings/packing-from/packing-from.ts
function PackingFrom_button_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 34);
    \u0275\u0275listener("click", function PackingFrom_button_4_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.enableEditing());
    });
    \u0275\u0275element(1, "i", 35);
    \u0275\u0275text(2, " Modifier ");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_span_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 36);
    \u0275\u0275text(1, "*");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_ng_template_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 25)(1, "div", 37);
    \u0275\u0275element(2, "i", 38);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div")(4, "div", 39);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 40);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const prestataire_r3 = ctx.$implicit;
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("", prestataire_r3.prenom, " ", prestataire_r3.nom);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(prestataire_r3.phone);
  }
}
function PackingFrom_ng_template_16_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 42);
    \u0275\u0275element(1, "i", 38);
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const prestataire_r4 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2("", prestataire_r4.prenom, " ", prestataire_r4.nom);
  }
}
function PackingFrom_ng_template_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, PackingFrom_ng_template_16_div_0_Template, 4, 2, "div", 41);
  }
  if (rf & 2) {
    const prestataire_r4 = ctx.$implicit;
    \u0275\u0275property("ngIf", prestataire_r4);
  }
}
function PackingFrom_small_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 36);
    \u0275\u0275text(1, " Veuillez s\xE9lectionnez un machiniste ");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_span_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 36);
    \u0275\u0275text(1, "*");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_small_23_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 43);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r1.dateError, " ");
  }
}
function PackingFrom_span_28_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 36);
    \u0275\u0275text(1, "*");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_small_30_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 36);
    \u0275\u0275text(1, " Le nombre de rouleaux doit \xEAtre sup\xE9rieur \xE0 0 ");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_span_34_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 36);
    \u0275\u0275text(1, "*");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_small_36_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 36);
    \u0275\u0275text(1, " Le prix unitaire doit \xEAtre sup\xE9rieur \xE0 0 ");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_div_49_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 44);
    \u0275\u0275element(1, "i", 45);
    \u0275\u0275text(2);
    \u0275\u0275pipe(3, "number");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2(" ", ctx_r1.model.nb_rouleaux, " rouleaux \xD7 ", \u0275\u0275pipeBind2(3, 2, ctx_r1.model.prix_par_rouleau, "1.0-0"), " GNF ");
  }
}
function PackingFrom_div_50_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 46);
    \u0275\u0275element(1, "i", 47);
    \u0275\u0275text(2, " Entrez la quantit\xE9 et le prix unitaire pour calculer le montant ");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_div_51_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 48)(1, "div", 49)(2, "div", 50);
    \u0275\u0275element(3, "i", 51);
    \u0275\u0275elementStart(4, "span", 52);
    \u0275\u0275text(5, "R\xE9capitulatif");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 53)(7, "div", 54)(8, "div", 55);
    \u0275\u0275element(9, "i", 56);
    \u0275\u0275elementStart(10, "div", 57)(11, "div", 28);
    \u0275\u0275text(12, "Prestataire");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "div", 58);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "div", 59);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(17, "div", 55);
    \u0275\u0275element(18, "i", 60);
    \u0275\u0275elementStart(19, "div", 57)(20, "div", 28);
    \u0275\u0275text(21, "Date");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "div", 61);
    \u0275\u0275text(23);
    \u0275\u0275pipe(24, "date");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(25, "div", 54)(26, "div", 55);
    \u0275\u0275element(27, "i", 62);
    \u0275\u0275elementStart(28, "div", 57)(29, "div", 28);
    \u0275\u0275text(30, "Quantit\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "div", 63);
    \u0275\u0275text(32);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(33, "div", 55);
    \u0275\u0275element(34, "i", 64);
    \u0275\u0275elementStart(35, "div", 57)(36, "div", 28);
    \u0275\u0275text(37, "Prix unitaire");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(38, "div", 61);
    \u0275\u0275text(39);
    \u0275\u0275pipe(40, "number");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(41, "div", 65);
    \u0275\u0275element(42, "i", 66);
    \u0275\u0275elementStart(43, "div", 57)(44, "div", 28);
    \u0275\u0275text(45, "Montant total");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(46, "div", 67);
    \u0275\u0275text(47);
    \u0275\u0275pipe(48, "number");
    \u0275\u0275elementEnd()()()()()()();
  }
  if (rf & 2) {
    let tmp_1_0;
    let tmp_2_0;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(14);
    \u0275\u0275textInterpolate2(" ", (tmp_1_0 = ctx_r1.getSelectedPrestataire()) == null ? null : tmp_1_0.prenom, " ", (tmp_1_0 = ctx_r1.getSelectedPrestataire()) == null ? null : tmp_1_0.nom, " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", (tmp_2_0 = ctx_r1.getSelectedPrestataire()) == null ? null : tmp_2_0.phone, " ");
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind2(24, 7, ctx_r1.model.date, "dd/MM/yyyy"), " ");
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate1(" ", ctx_r1.model.nb_rouleaux, " rouleaux ");
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind2(40, 10, ctx_r1.model.prix_par_rouleau, "1.0-0"), " GNF ");
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind2(48, 13, ctx_r1.model.montant, "1.0-0"), " GNF ");
  }
}
function PackingFrom_div_52_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r1.mode === "create" ? "Enregistrer" : "Sauvegarder");
  }
}
function PackingFrom_div_52_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "Enregistrement...");
    \u0275\u0275elementEnd();
  }
}
function PackingFrom_div_52_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 68)(1, "button", 69);
    \u0275\u0275listener("click", function PackingFrom_div_52_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r5);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onSubmit());
    });
    \u0275\u0275element(2, "i", 70);
    \u0275\u0275template(3, PackingFrom_div_52_span_3_Template, 2, 1, "span", 71)(4, PackingFrom_div_52_span_4_Template, 2, 0, "span", 71);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "button", 72);
    \u0275\u0275listener("click", function PackingFrom_div_52_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r5);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.mode === "create" ? ctx_r1.onCancel() : ctx_r1.cancelEditing());
    });
    \u0275\u0275element(6, "i", 73);
    \u0275\u0275text(7, " Annuler ");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("disabled", !ctx_r1.isValid() || ctx_r1.loading);
    \u0275\u0275advance();
    \u0275\u0275classProp("mr-2", !ctx_r1.loading);
    \u0275\u0275property("ngClass", ctx_r1.loading ? "pi-spin pi-spinner" : "pi-check");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r1.loading);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.loading);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r1.loading);
  }
}
var PackingFormModel = class {
  id;
  prestataire_id;
  prestataire;
  reference;
  date;
  nb_rouleaux = 0;
  prix_par_rouleau = 0;
  montant = 0;
  statut = "valide";
  notes;
  constructor(data) {
    if (data) {
      this.id = data.id;
      this.prestataire_id = data.prestataire_id;
      this.prestataire = data.prestataire;
      this.reference = data.reference;
      this.date = data.date ? new Date(data.date) : null;
      this.nb_rouleaux = data.nb_rouleaux || 0;
      this.prix_par_rouleau = data.prix_par_rouleau || 0;
      this.montant = data.montant || 0;
      this.statut = data.statut || "valide";
      this.notes = data.notes;
    }
  }
  calculateMontant() {
    this.montant = this.nb_rouleaux * this.prix_par_rouleau;
  }
};
var PackingFrom = class _PackingFrom {
  mode = "create";
  initialData = null;
  prestataires = [];
  loading = false;
  submitForm = new EventEmitter();
  cancel = new EventEmitter();
  submitted = false;
  isEditing = false;
  model = new PackingFormModel();
  minDate = /* @__PURE__ */ new Date();
  dateError = null;
  ngOnInit() {
    this.model = this.initialData ? new PackingFormModel(this.initialData) : new PackingFormModel();
    if (this.mode === "create") {
      this.isEditing = true;
      if (!this.model.date) {
        this.model.date = /* @__PURE__ */ new Date();
      }
    }
  }
  // Calculer automatiquement le montant
  onPrixOrQuantityChange() {
    if (this.model.nb_rouleaux && this.model.prix_par_rouleau) {
      this.model.calculateMontant();
    }
  }
  // Validation de la date
  validateDate() {
    if (!this.model.date) {
      this.dateError = "Date obligatoire.";
      return false;
    }
    this.dateError = null;
    return true;
  }
  // Événement déclenché lors du changement de date
  onDateChange() {
    if (this.submitted) {
      this.validateDate();
    }
  }
  // Événement déclenché lors de la perte de focus de la date
  onDateBlur() {
    if (this.model.date) {
      this.validateDate();
    }
  }
  // Obtenir le nom complet du prestataire
  getPrestataireLabel(prestataire) {
    return `${prestataire.prenom} ${prestataire.nom} - ${prestataire.phone}`;
  }
  // Obtenir le prestataire sélectionné
  getSelectedPrestataire() {
    return this.filteredPrestataires.find((p) => p.id === this.model.prestataire_id);
  }
  // Filtrer les prestataires de type machiniste
  get filteredPrestataires() {
    const selectedId = this.model.prestataire_id;
    return (this.prestataires ?? []).filter((prestataire) => {
      if (selectedId && prestataire.id === selectedId)
        return true;
      return prestataire.type === "machiniste";
    });
  }
  // Validation complète
  isValid() {
    const basicValidation = !!(this.model.prestataire_id && this.model.date && this.model.nb_rouleaux && this.model.nb_rouleaux > 0 && this.model.prix_par_rouleau && this.model.prix_par_rouleau > 0);
    if (!basicValidation) {
      return false;
    }
    return this.validateDate();
  }
  // Activer l'édition
  enableEditing() {
    this.isEditing = true;
  }
  // Annuler l'édition
  cancelEditing() {
    this.isEditing = false;
    this.submitted = false;
    this.dateError = null;
    this.model = this.initialData ? new PackingFormModel(this.initialData) : new PackingFormModel();
  }
  // Réinitialiser le formulaire (méthode publique)
  resetForm() {
    this.submitted = false;
    this.dateError = null;
    this.model = new PackingFormModel();
  }
  // Formater la date pour l'API
  formatDate(date) {
    if (!date)
      return "";
    const d = typeof date === "string" ? new Date(date) : date;
    return d.toISOString().split("T")[0];
  }
  // Soumettre le formulaire
  onSubmit() {
    this.submitted = true;
    if (!this.isValid()) {
      return;
    }
    this.model.calculateMontant();
    const packingData = {
      prestataire_id: this.model.prestataire_id,
      date: this.formatDate(this.model.date),
      nb_rouleaux: this.model.nb_rouleaux,
      prix_par_rouleau: this.model.prix_par_rouleau,
      statut: this.model.statut,
      notes: this.model.notes ?? void 0
    };
    this.submitForm.emit(packingData);
  }
  // Annuler
  onCancel() {
    this.cancel.emit();
  }
  // Désactiver les champs en mode lecture
  get fieldsDisabled() {
    return this.mode === "edit" && !this.isEditing || this.loading;
  }
  // Vérifier si le formulaire a des erreurs
  hasErrors() {
    return !!this.dateError;
  }
  static \u0275fac = function PackingFrom_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PackingFrom)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _PackingFrom, selectors: [["app-packing-from"]], inputs: { mode: "mode", initialData: "initialData", prestataires: "prestataires", loading: "loading" }, outputs: { submitForm: "submitForm", cancel: "cancel" }, decls: 53, vars: 34, consts: [[1, "card"], [1, "flex", "justify-between", "items-center", "mb-6"], [1, "text-surface-900", "dark:text-surface-0", "text-xl", "font-bold"], ["pButton", "", "pRipple", "", "severity", "warn", "class", "w-auto", 3, "click", 4, "ngIf"], [1, "grid", "grid-cols-12", "gap-4"], [1, "col-span-12", "lg:col-span-2"], [1, "col-span-12", "lg:col-span-10"], [1, "mb-6", "col-span-12"], ["for", "prestataire", 1, "font-medium", "text-surface-900", "dark:text-surface-0", "mb-2", "block"], ["class", "text-red-500", 4, "ngIf"], ["id", "prestataire", "optionLabel", "nom", "optionValue", "id", "placeholder", "S\xE9lectionnez un machiniste", "filterBy", "nom,prenom,phone", "fluid", "", 3, "ngModelChange", "ngModel", "options", "filter", "showClear", "disabled"], ["pTemplate", "item"], ["pTemplate", "selectedItem"], [1, "mb-6", "col-span-12", "md:col-span-6"], ["for", "date", 1, "font-medium", "text-surface-900", "dark:text-surface-0", "mb-2", "block"], ["id", "date", "dateFormat", "dd/mm/yy", "placeholder", "S\xE9lectionnez la date", "fluid", "", 3, "ngModelChange", "onSelect", "onBlur", "ngModel", "showIcon", "disabled"], ["class", "text-red-500 block mt-1", 4, "ngIf"], [1, "mb-6", "col-span-12", "grid", "grid-cols-12", "gap-3"], [1, "col-span-12", "md:col-span-6"], ["for", "nbRouleaux", 1, "font-medium", "text-surface-900", "dark:text-surface-0", "mb-2", "block"], ["id", "nbRouleaux", "placeholder", "Entrez le nombre", "mode", "decimal", "fluid", "", 3, "ngModelChange", "ngModel", "showButtons", "min", "max", "useGrouping", "disabled"], ["for", "prixRouleau", 1, "font-medium", "text-surface-900", "dark:text-surface-0", "mb-2", "block"], ["id", "prixRouleau", "mode", "currency", "currency", "GNF", "locale", "fr-GN", "placeholder", "Prix par rouleau", "fluid", "", 3, "ngModelChange", "ngModel", "min", "disabled"], [1, "bg-gradient-to-r", "from-primary/10", "to-primary/5", "border-l-4", "border-primary", "rounded-lg", "p-4"], [1, "flex", "items-center", "justify-between"], [1, "flex", "items-center", "gap-3"], [1, "w-12", "h-12", "rounded-full", "bg-primary/20", "flex", "items-center", "justify-center"], [1, "pi", "pi-money-bill", "text-primary", "text-xl"], [1, "text-xs", "text-surface-600", "dark:text-surface-400", "mb-1"], [1, "text-3xl", "font-bold", "text-primary"], ["class", "text-sm text-surface-600 dark:text-surface-300 mt-3 flex items-center gap-2", 4, "ngIf"], ["class", "text-sm text-surface-500 dark:text-surface-400 mt-3 italic", 4, "ngIf"], ["class", "col-span-12 mb-6", 4, "ngIf"], ["class", "col-span-12 flex gap-2 mb-4", 4, "ngIf"], ["pButton", "", "pRipple", "", "severity", "warn", 1, "w-auto", 3, "click"], [1, "pi", "pi-pencil", "mr-2"], [1, "text-red-500"], [1, "flex", "items-center", "justify-center", "w-10", "h-10", "rounded-full", "bg-primary/10"], [1, "pi", "pi-user", "text-primary"], [1, "font-medium"], [1, "text-sm", "text-surface-500"], ["class", "flex items-center gap-2", 4, "ngIf"], [1, "flex", "items-center", "gap-2"], [1, "text-red-500", "block", "mt-1"], [1, "text-sm", "text-surface-600", "dark:text-surface-300", "mt-3", "flex", "items-center", "gap-2"], [1, "pi", "pi-calculator", "text-surface-500"], [1, "text-sm", "text-surface-500", "dark:text-surface-400", "mt-3", "italic"], [1, "pi", "pi-info-circle", "mr-2"], [1, "col-span-12", "mb-6"], [1, "bg-blue-50", "dark:bg-blue-900/20", "border", "border-blue-200", "dark:border-blue-800", "rounded-lg", "p-5"], [1, "flex", "items-center", "gap-2", "mb-4"], [1, "pi", "pi-info-circle", "text-blue-600", "dark:text-blue-400", "text-lg"], [1, "font-bold", "text-blue-900", "dark:text-blue-100", "text-lg"], [1, "grid", "grid-cols-1", "md:grid-cols-2", "gap-4"], [1, "space-y-3"], [1, "flex", "items-start", "gap-3"], [1, "pi", "pi-user", "text-blue-600", "mt-1"], [1, "flex-1"], [1, "font-semibold", "text-surface-900", "dark:text-surface-0"], [1, "text-sm", "text-surface-500", "dark:text-surface-400"], [1, "pi", "pi-calendar", "text-blue-600", "mt-1"], [1, "font-medium", "text-surface-900", "dark:text-surface-0"], [1, "pi", "pi-box", "text-blue-600", "mt-1"], [1, "font-bold", "text-primary", "text-xl"], [1, "pi", "pi-tag", "text-blue-600", "mt-1"], [1, "flex", "items-start", "gap-3", "pt-3", "border-t", "border-blue-200", "dark:border-blue-700"], [1, "pi", "pi-wallet", "text-blue-600", "mt-1"], [1, "font-bold", "text-primary", "text-2xl"], [1, "col-span-12", "flex", "gap-2", "mb-4"], ["pButton", "", "pRipple", "", 1, "w-auto", 3, "click", "disabled"], [1, "pi", 3, "ngClass"], [4, "ngIf"], ["pButton", "", "pRipple", "", "severity", "secondary", 1, "w-auto", 3, "click", "disabled"], [1, "pi", "pi-times", "mr-2"]], template: function PackingFrom_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "div", 1)(2, "span", 2);
      \u0275\u0275text(3);
      \u0275\u0275elementEnd();
      \u0275\u0275template(4, PackingFrom_button_4_Template, 3, 0, "button", 3);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(5, "div", 4);
      \u0275\u0275element(6, "div", 5);
      \u0275\u0275elementStart(7, "div", 6)(8, "div", 4)(9, "div", 7)(10, "label", 8);
      \u0275\u0275text(11, " Prestataire ");
      \u0275\u0275template(12, PackingFrom_span_12_Template, 2, 0, "span", 9);
      \u0275\u0275text(13, " (Machiniste) ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(14, "p-select", 10);
      \u0275\u0275twoWayListener("ngModelChange", function PackingFrom_Template_p_select_ngModelChange_14_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.model.prestataire_id, $event) || (ctx.model.prestataire_id = $event);
        return $event;
      });
      \u0275\u0275template(15, PackingFrom_ng_template_15_Template, 8, 3, "ng-template", 11)(16, PackingFrom_ng_template_16_Template, 1, 1, "ng-template", 12);
      \u0275\u0275elementEnd();
      \u0275\u0275template(17, PackingFrom_small_17_Template, 2, 0, "small", 9);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(18, "div", 13)(19, "label", 14);
      \u0275\u0275text(20, " Date ");
      \u0275\u0275template(21, PackingFrom_span_21_Template, 2, 0, "span", 9);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(22, "p-datepicker", 15);
      \u0275\u0275twoWayListener("ngModelChange", function PackingFrom_Template_p_datepicker_ngModelChange_22_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.model.date, $event) || (ctx.model.date = $event);
        return $event;
      });
      \u0275\u0275listener("onSelect", function PackingFrom_Template_p_datepicker_onSelect_22_listener() {
        return ctx.onDateChange();
      })("onBlur", function PackingFrom_Template_p_datepicker_onBlur_22_listener() {
        return ctx.onDateBlur();
      });
      \u0275\u0275elementEnd();
      \u0275\u0275template(23, PackingFrom_small_23_Template, 2, 1, "small", 16);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(24, "div", 17)(25, "div", 18)(26, "label", 19);
      \u0275\u0275text(27, " Nombre de rouleaux ");
      \u0275\u0275template(28, PackingFrom_span_28_Template, 2, 0, "span", 9);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(29, "p-inputnumber", 20);
      \u0275\u0275twoWayListener("ngModelChange", function PackingFrom_Template_p_inputnumber_ngModelChange_29_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.model.nb_rouleaux, $event) || (ctx.model.nb_rouleaux = $event);
        return $event;
      });
      \u0275\u0275listener("ngModelChange", function PackingFrom_Template_p_inputnumber_ngModelChange_29_listener() {
        return ctx.onPrixOrQuantityChange();
      });
      \u0275\u0275elementEnd();
      \u0275\u0275template(30, PackingFrom_small_30_Template, 2, 0, "small", 9);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(31, "div", 18)(32, "label", 21);
      \u0275\u0275text(33, " Prix unitaire (GNF) ");
      \u0275\u0275template(34, PackingFrom_span_34_Template, 2, 0, "span", 9);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(35, "p-inputnumber", 22);
      \u0275\u0275twoWayListener("ngModelChange", function PackingFrom_Template_p_inputnumber_ngModelChange_35_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.model.prix_par_rouleau, $event) || (ctx.model.prix_par_rouleau = $event);
        return $event;
      });
      \u0275\u0275listener("ngModelChange", function PackingFrom_Template_p_inputnumber_ngModelChange_35_listener() {
        return ctx.onPrixOrQuantityChange();
      });
      \u0275\u0275elementEnd();
      \u0275\u0275template(36, PackingFrom_small_36_Template, 2, 0, "small", 9);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(37, "div", 7)(38, "div", 23)(39, "div", 24)(40, "div", 25)(41, "div", 26);
      \u0275\u0275element(42, "i", 27);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(43, "div")(44, "div", 28);
      \u0275\u0275text(45, " Montant total ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(46, "div", 29);
      \u0275\u0275text(47);
      \u0275\u0275pipe(48, "money");
      \u0275\u0275elementEnd()()()();
      \u0275\u0275template(49, PackingFrom_div_49_Template, 4, 5, "div", 30)(50, PackingFrom_div_50_Template, 3, 0, "div", 31);
      \u0275\u0275elementEnd()();
      \u0275\u0275template(51, PackingFrom_div_51_Template, 49, 16, "div", 32)(52, PackingFrom_div_52_Template, 8, 7, "div", 33);
      \u0275\u0275elementEnd()()()();
    }
    if (rf & 2) {
      \u0275\u0275advance(3);
      \u0275\u0275textInterpolate1(" ", ctx.mode === "create" ? "Nouveau packing" : "D\xE9tails du packing", " ");
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.mode === "edit" && !ctx.isEditing);
      \u0275\u0275advance(8);
      \u0275\u0275property("ngIf", ctx.isEditing);
      \u0275\u0275advance(2);
      \u0275\u0275twoWayProperty("ngModel", ctx.model.prestataire_id);
      \u0275\u0275property("options", ctx.filteredPrestataires)("filter", true)("showClear", true)("disabled", ctx.fieldsDisabled);
      \u0275\u0275advance(3);
      \u0275\u0275property("ngIf", ctx.submitted && !ctx.model.prestataire_id && ctx.isEditing);
      \u0275\u0275advance(4);
      \u0275\u0275property("ngIf", ctx.isEditing);
      \u0275\u0275advance();
      \u0275\u0275twoWayProperty("ngModel", ctx.model.date);
      \u0275\u0275property("showIcon", true)("disabled", ctx.fieldsDisabled);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.submitted && ctx.dateError && ctx.isEditing);
      \u0275\u0275advance(5);
      \u0275\u0275property("ngIf", ctx.isEditing);
      \u0275\u0275advance();
      \u0275\u0275twoWayProperty("ngModel", ctx.model.nb_rouleaux);
      \u0275\u0275property("showButtons", true)("min", 1)("max", 9999)("useGrouping", false)("disabled", ctx.fieldsDisabled);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.submitted && (!ctx.model.nb_rouleaux || ctx.model.nb_rouleaux < 1) && ctx.isEditing);
      \u0275\u0275advance(4);
      \u0275\u0275property("ngIf", ctx.isEditing);
      \u0275\u0275advance();
      \u0275\u0275twoWayProperty("ngModel", ctx.model.prix_par_rouleau);
      \u0275\u0275property("min", 0)("disabled", ctx.fieldsDisabled);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.submitted && (!ctx.model.prix_par_rouleau || ctx.model.prix_par_rouleau <= 0) && ctx.isEditing);
      \u0275\u0275advance(11);
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(48, 32, ctx.model.montant), " ");
      \u0275\u0275advance(2);
      \u0275\u0275property("ngIf", ctx.model.nb_rouleaux && ctx.model.prix_par_rouleau);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.model.nb_rouleaux || !ctx.model.prix_par_rouleau);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.model.prestataire_id && ctx.model.date && ctx.model.nb_rouleaux && ctx.model.prix_par_rouleau && !ctx.hasErrors());
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.isEditing);
    }
  }, dependencies: [
    CommonModule,
    NgClass,
    NgIf,
    FormsModule,
    NgControlStatus,
    NgModel,
    DatePicker,
    Select,
    InputNumber,
    Ripple,
    DecimalPipe,
    DatePipe,
    MoneyPipe
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PackingFrom, [{
    type: Component,
    args: [{ selector: "app-packing-from", standalone: true, imports: [
      CommonModule,
      FormsModule,
      DatePicker,
      Select,
      InputNumber,
      Button,
      InputGroup,
      InputGroupAddon,
      Ripple,
      MoneyPipe
    ], template: `<div class="card">\r
  <div class="flex justify-between items-center mb-6">\r
    <span class="text-surface-900 dark:text-surface-0 text-xl font-bold">\r
      {{ mode === 'create' ? 'Nouveau packing' : 'D\xE9tails du packing' }}\r
    </span>\r
\r
    <!-- Bouton Modifier -->\r
    <button\r
      *ngIf="mode === 'edit' && !isEditing"\r
      pButton\r
      pRipple\r
      severity="warn"\r
      (click)="enableEditing()"\r
      class="w-auto">\r
      <i class="pi pi-pencil mr-2"></i>\r
      Modifier\r
    </button>  \r
  </div>\r
\r
  <div class="grid grid-cols-12 gap-4">\r
    <div class="col-span-12 lg:col-span-2">\r
    </div> \r
\r
    <div class="col-span-12 lg:col-span-10">\r
      <div class="grid grid-cols-12 gap-4"> \r
\r
        <!-- Prestataire -->\r
        <div class="mb-6 col-span-12">\r
          <label for="prestataire" class="font-medium text-surface-900 dark:text-surface-0 mb-2 block">\r
            Prestataire <span class="text-red-500" *ngIf="isEditing">*</span> (Machiniste)\r
          </label>\r
          <p-select\r
            id="prestataire"\r
            [(ngModel)]="model.prestataire_id"\r
            [options]="filteredPrestataires"\r
            optionLabel="nom"\r
            optionValue="id"\r
            placeholder="S\xE9lectionnez un machiniste"\r
            [filter]="true"\r
            filterBy="nom,prenom,phone"\r
            [showClear]="true"\r
            [disabled]="fieldsDisabled"\r
            fluid>\r
            <ng-template let-prestataire pTemplate="item">\r
              <div class="flex items-center gap-3">\r
                <div class="flex items-center justify-center w-10 h-10 rounded-full bg-primary/10">\r
                  <i class="pi pi-user text-primary"></i>\r
                </div>\r
                <div>\r
                  <div class="font-medium">{{ prestataire.prenom }} {{ prestataire.nom }}</div>\r
                  <div class="text-sm text-surface-500">{{ prestataire.phone }}</div>\r
                </div>\r
              </div>\r
            </ng-template>\r
\r
            <ng-template let-prestataire pTemplate="selectedItem">\r
              <div class="flex items-center gap-2" *ngIf="prestataire">\r
                <i class="pi pi-user text-primary"></i>\r
                <span>{{ prestataire.prenom }} {{ prestataire.nom }}</span>\r
              </div>\r
            </ng-template>\r
          </p-select>\r
          <small class="text-red-500" *ngIf="submitted && !model.prestataire_id && isEditing">\r
            Veuillez s\xE9lectionnez un machiniste\r
          </small>\r
        </div>\r
\r
        <!-- Date -->\r
        <div class="mb-6 col-span-12 md:col-span-6">\r
          <label for="date" class="font-medium text-surface-900 dark:text-surface-0 mb-2 block">\r
            Date <span class="text-red-500" *ngIf="isEditing">*</span>\r
          </label>\r
          <p-datepicker\r
            id="date"\r
            [(ngModel)]="model.date"\r
            [showIcon]="true"\r
            dateFormat="dd/mm/yy"\r
            placeholder="S\xE9lectionnez la date"\r
            [disabled]="fieldsDisabled"\r
            (onSelect)="onDateChange()"\r
            (onBlur)="onDateBlur()"\r
            fluid />\r
          <small class="text-red-500 block mt-1" *ngIf="submitted && dateError && isEditing">\r
            {{ dateError }}\r
          </small>\r
        </div>\r
\r
        <!-- Nombre de rouleaux et Prix unitaire -->\r
        <div class="mb-6 col-span-12 grid grid-cols-12 gap-3">\r
          <!-- Nombre de rouleaux -->\r
          <div class="col-span-12 md:col-span-6">\r
            <label for="nbRouleaux" class="font-medium text-surface-900 dark:text-surface-0 mb-2 block">\r
              Nombre de rouleaux <span class="text-red-500" *ngIf="isEditing">*</span>\r
            </label>\r
            <p-inputnumber\r
              id="nbRouleaux"\r
              [(ngModel)]="model.nb_rouleaux"\r
              (ngModelChange)="onPrixOrQuantityChange()"\r
              [showButtons]="true"\r
              [min]="1"\r
              [max]="9999"\r
              placeholder="Entrez le nombre"\r
              mode="decimal"\r
              [useGrouping]="false"\r
              [disabled]="fieldsDisabled"\r
              fluid />\r
            <small class="text-red-500" *ngIf="submitted && (!model.nb_rouleaux || model.nb_rouleaux < 1) && isEditing">\r
              Le nombre de rouleaux doit \xEAtre sup\xE9rieur \xE0 0\r
            </small>\r
          </div>\r
\r
          <!-- Prix unitaire -->\r
          <div class="col-span-12 md:col-span-6">\r
            <label for="prixRouleau" class="font-medium text-surface-900 dark:text-surface-0 mb-2 block">\r
              Prix unitaire (GNF) <span class="text-red-500" *ngIf="isEditing">*</span>\r
            </label>\r
            <p-inputnumber\r
              id="prixRouleau"\r
              [(ngModel)]="model.prix_par_rouleau"\r
              (ngModelChange)="onPrixOrQuantityChange()"\r
              mode="currency"\r
              currency="GNF"\r
              locale="fr-GN"\r
              [min]="0"\r
              placeholder="Prix par rouleau"\r
              [disabled]="fieldsDisabled"\r
              fluid />\r
            <small class="text-red-500" *ngIf="submitted && (!model.prix_par_rouleau || model.prix_par_rouleau <= 0) && isEditing">\r
              Le prix unitaire doit \xEAtre sup\xE9rieur \xE0 0\r
            </small>\r
          </div>\r
        </div>\r
\r
        <!-- Montant total (toujours visible) -->\r
        <div class="mb-6 col-span-12">\r
          <div class="bg-gradient-to-r from-primary/10 to-primary/5 border-l-4 border-primary rounded-lg p-4">\r
            <div class="flex items-center justify-between">\r
              <div class="flex items-center gap-3">\r
                <div class="w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center">\r
                  <i class="pi pi-money-bill text-primary text-xl"></i>\r
                </div>\r
                <div>\r
                  <div class="text-xs text-surface-600 dark:text-surface-400 mb-1">\r
                    Montant total\r
                  </div>\r
                  <div class="text-3xl font-bold text-primary">\r
                    {{ model.montant | money }}\r
                  </div>\r
                </div>\r
              </div>\r
            </div>\r
            <div class="text-sm text-surface-600 dark:text-surface-300 mt-3 flex items-center gap-2" *ngIf="model.nb_rouleaux && model.prix_par_rouleau">\r
              <i class="pi pi-calculator text-surface-500"></i>\r
              {{ model.nb_rouleaux }} rouleaux \xD7 {{ model.prix_par_rouleau | number:'1.0-0' }} GNF\r
            </div>\r
            <div class="text-sm text-surface-500 dark:text-surface-400 mt-3 italic" *ngIf="!model.nb_rouleaux || !model.prix_par_rouleau">\r
              <i class="pi pi-info-circle mr-2"></i>\r
              Entrez la quantit\xE9 et le prix unitaire pour calculer le montant\r
            </div>\r
          </div>\r
        </div>\r
\r
        <!-- R\xE9capitulatif complet -->\r
        <div class="col-span-12 mb-6" *ngIf="model.prestataire_id && model.date && model.nb_rouleaux && model.prix_par_rouleau && !hasErrors()">\r
          <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-5">\r
            <div class="flex items-center gap-2 mb-4">\r
              <i class="pi pi-info-circle text-blue-600 dark:text-blue-400 text-lg"></i>\r
              <span class="font-bold text-blue-900 dark:text-blue-100 text-lg">R\xE9capitulatif</span>\r
            </div>\r
\r
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">\r
              <!-- Colonne 1 : Informations prestataire et p\xE9r p\xE9riode -->\r
              <div class="space-y-3">\r
                <div class="flex items-start gap-3">\r
                  <i class="pi pi-user text-blue-600 mt-1"></i>\r
                  <div class="flex-1">\r
                    <div class="text-xs text-surface-600 dark:text-surface-400 mb-1">Prestataire</div>\r
                    <div class="font-semibold text-surface-900 dark:text-surface-0">\r
                      {{ getSelectedPrestataire()?.prenom }} {{ getSelectedPrestataire()?.nom }}\r
                    </div>\r
                    <div class="text-sm text-surface-500 dark:text-surface-400">\r
                      {{ getSelectedPrestataire()?.phone }}\r
                    </div>\r
                  </div>\r
                </div>\r
\r
                <div class="flex items-start gap-3">\r
                  <i class="pi pi-calendar text-blue-600 mt-1"></i>\r
                  <div class="flex-1">\r
                    <div class="text-xs text-surface-600 dark:text-surface-400 mb-1">Date</div>\r
                    <div class="font-medium text-surface-900 dark:text-surface-0">\r
                      {{ model.date | date:'dd/MM/yyyy' }}\r
                    </div>\r
                  </div>\r
                </div>\r
              </div>\r
\r
              <!-- Colonne 2 : Informations financi\xE8res -->\r
              <div class="space-y-3">\r
                <div class="flex items-start gap-3">\r
                  <i class="pi pi-box text-blue-600 mt-1"></i>\r
                  <div class="flex-1">\r
                    <div class="text-xs text-surface-600 dark:text-surface-400 mb-1">Quantit\xE9</div>\r
                    <div class="font-bold text-primary text-xl">\r
                      {{ model.nb_rouleaux }} rouleaux\r
                    </div>\r
                  </div>\r
                </div>\r
\r
                <div class="flex items-start gap-3">\r
                  <i class="pi pi-tag text-blue-600 mt-1"></i>\r
                  <div class="flex-1">\r
                    <div class="text-xs text-surface-600 dark:text-surface-400 mb-1">Prix unitaire</div>\r
                    <div class="font-medium text-surface-900 dark:text-surface-0">\r
                      {{ model.prix_par_rouleau | number:'1.0-0' }} GNF\r
                    </div>\r
                  </div>\r
                </div>\r
\r
                <div class="flex items-start gap-3 pt-3 border-t border-blue-200 dark:border-blue-700">\r
                  <i class="pi pi-wallet text-blue-600 mt-1"></i>\r
                  <div class="flex-1">\r
                    <div class="text-xs text-surface-600 dark:text-surface-400 mb-1">Montant total</div>\r
                    <div class="font-bold text-primary text-2xl">\r
                      {{ model.montant | number:'1.0-0' }} GNF\r
                    </div>\r
                  </div>\r
                </div>\r
              </div>\r
            </div>\r
          </div>\r
        </div>\r
\r
        <!-- Boutons d'action -->\r
        <div class="col-span-12 flex gap-2 mb-4" *ngIf="isEditing">\r
          <button\r
            pButton\r
            pRipple\r
            (click)="onSubmit()"\r
            [disabled]="!isValid() || loading"\r
            class="w-auto">\r
            <i class="pi" [ngClass]="loading ? 'pi-spin pi-spinner' : 'pi-check'" [class.mr-2]="!loading"></i>\r
            <span *ngIf="!loading">{{ mode === 'create' ? 'Enregistrer' : 'Sauvegarder' }}</span>\r
            <span *ngIf="loading">Enregistrement...</span>\r
          </button>\r
\r
          <button\r
            pButton\r
            pRipple\r
            severity="secondary"\r
            (click)="mode === 'create' ? onCancel() : cancelEditing()"\r
            [disabled]="loading"\r
            class="w-auto">\r
            <i class="pi pi-times mr-2"></i>\r
            Annuler\r
          </button>\r
        </div>\r
\r
      </div>\r
    </div>\r
  </div>\r
</div>\r
\r
\r
` }]
  }], null, { mode: [{
    type: Input
  }], initialData: [{
    type: Input
  }], prestataires: [{
    type: Input
  }], loading: [{
    type: Input
  }], submitForm: [{
    type: Output
  }], cancel: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(PackingFrom, { className: "PackingFrom", filePath: "src/app/pages/packings/packing-from/packing-from.ts", lineNumber: 66 });
})();

// src/app/pages/packings/packing-new/packing-new.ts
var PackingNew = class _PackingNew {
  prestataireService;
  packingService;
  messageService;
  router;
  prestataires = [];
  loading = false;
  constructor(prestataireService, packingService, messageService, router) {
    this.prestataireService = prestataireService;
    this.packingService = packingService;
    this.messageService = messageService;
    this.router = router;
  }
  ngOnInit() {
    this.loadPrestataires();
  }
  loadPrestataires() {
    this.loading = true;
    this.prestataireService.getPrestataires().subscribe({
      next: (response) => {
        this.prestataires = this.extractPrestataires(response);
        this.loading = false;
      },
      error: (err) => {
        console.error("Erreur lors du chargement des prestataires :", err);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les prestataires",
          life: 3e3
        });
        this.loading = false;
      }
    });
  }
  extractPrestataires(response) {
    const data = response?.data;
    if (Array.isArray(data))
      return data;
    if (data && Array.isArray(data.data))
      return data.data;
    return [];
  }
  onSubmit(packingData) {
    this.loading = true;
    this.packingService.createPacking(packingData).subscribe({
      next: (response) => {
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Packing cr\xE9\xE9 avec succ\xE8s",
          life: 3e3
        });
        this.loading = false;
        setTimeout(() => {
          this.router.navigate(["/packings/packings-liste"]);
        }, 1e3);
      },
      error: (err) => {
        console.error("Erreur lors de la cr\xE9ation du packing :", err);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de cr\xE9er le packing",
          life: 3e3
        });
        this.loading = false;
      }
    });
  }
  onCancel() {
    this.router.navigate(["/packings/packings-liste"]);
  }
  static \u0275fac = function PackingNew_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PackingNew)(\u0275\u0275directiveInject(PrestataireService), \u0275\u0275directiveInject(PackingService), \u0275\u0275directiveInject(MessageService), \u0275\u0275directiveInject(Router));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _PackingNew, selectors: [["app-packing-new"]], features: [\u0275\u0275ProvidersFeature([MessageService])], decls: 2, vars: 3, consts: [[3, "submitForm", "cancel", "mode", "prestataires", "loading"]], template: function PackingNew_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275element(0, "p-toast");
      \u0275\u0275elementStart(1, "app-packing-from", 0);
      \u0275\u0275listener("submitForm", function PackingNew_Template_app_packing_from_submitForm_1_listener($event) {
        return ctx.onSubmit($event);
      })("cancel", function PackingNew_Template_app_packing_from_cancel_1_listener() {
        return ctx.onCancel();
      });
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("mode", "create")("prestataires", ctx.prestataires)("loading", ctx.loading);
    }
  }, dependencies: [PackingFrom, ToastModule, Toast], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PackingNew, [{
    type: Component,
    args: [{ selector: "app-packing-new", standalone: true, imports: [PackingFrom, ToastModule], providers: [MessageService], template: `<p-toast />
<app-packing-from
  [mode]="'create'"
  [prestataires]="prestataires"
  [loading]="loading"
  (submitForm)="onSubmit($event)"
  (cancel)="onCancel()">
</app-packing-from>
 ` }]
  }], () => [{ type: PrestataireService }, { type: PackingService }, { type: MessageService }, { type: Router }], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(PackingNew, { className: "PackingNew", filePath: "src/app/pages/packings/packing-new/packing-new.ts", lineNumber: 19 });
})();

// src/app/pages/packings/packing-edit/packing-edit.ts
var PackingEdit = class _PackingEdit {
  static \u0275fac = function PackingEdit_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PackingEdit)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _PackingEdit, selectors: [["app-packing-edit"]], decls: 2, vars: 0, template: function PackingEdit_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275domElementStart(0, "p");
      \u0275\u0275text(1, "packing-edit works!");
      \u0275\u0275domElementEnd();
    }
  }, encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PackingEdit, [{
    type: Component,
    args: [{ selector: "app-packing-edit", imports: [], template: "<p>packing-edit works!</p>\r\n" }]
  }], null, null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(PackingEdit, { className: "PackingEdit", filePath: "src/app/pages/packings/packing-edit/packing-edit.ts", lineNumber: 9 });
})();

// src/app/pages/packings/packings.routes.ts
var packings_routes_default = [
  {
    path: "",
    component: PackingListe,
    canActivate: [authorizationGuard],
    data: { permissions: ["packings.read"] }
  },
  {
    path: "packings",
    component: PackingListe,
    canActivate: [authorizationGuard],
    data: { permissions: ["packings.read"] }
  },
  {
    path: "packings-new",
    component: PackingNew,
    canActivate: [authorizationGuard],
    data: { permissions: ["packings.create"] }
  },
  {
    path: "packings-edit/:id",
    component: PackingEdit,
    canActivate: [authorizationGuard],
    data: { permissions: ["packings.update"] }
  },
  { path: "**", redirectTo: "/notfound" }
];
export {
  packings_routes_default as default
};
//# sourceMappingURL=chunk-5Y3YO25E.js.map
