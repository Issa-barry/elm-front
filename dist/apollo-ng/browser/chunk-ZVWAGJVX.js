import{b as ae}from"./chunk-FUAJNMUV.js";import{a as rt}from"./chunk-3RKKV6FR.js";import{a as U}from"./chunk-PVSGHAAF.js";import{a as Fe}from"./chunk-RXJGLV4Z.js";import{b as it}from"./chunk-4XVPC7FC.js";import{b as ot}from"./chunk-ILATF2XR.js";import{a as st,b as Se}from"./chunk-CVH73O44.js";import{a as Ee,b as Oe}from"./chunk-XDXU5A6L.js";import{a as Me,b as we}from"./chunk-R3EAI2YQ.js";import{a as ye,b as ke}from"./chunk-QFEFJCNI.js";import"./chunk-RLRCSE6J.js";import{b as De}from"./chunk-CUJPLDCB.js";import"./chunk-4NSD52R5.js";import{a as tt}from"./chunk-4SCZYFYR.js";import{b as Ye,d as ne}from"./chunk-H5BNHAT7.js";import"./chunk-Q3QYWOBT.js";import{b as Pe}from"./chunk-ZSMYH3SO.js";import{a as ve,d as he,e as xe,k as Ce}from"./chunk-566VITEB.js";import"./chunk-PFQBBUG2.js";import"./chunk-ZKOS3DIQ.js";import"./chunk-TF3WUBGP.js";import"./chunk-CIG3UH2L.js";import{a as at,b as _e}from"./chunk-LKI2OA3Y.js";import"./chunk-LLIVY2RR.js";import{b as ge,c as H}from"./chunk-ACCAPG7B.js";import"./chunk-GQZMGDXE.js";import"./chunk-EMSXNTNI.js";import"./chunk-CAPWCZXM.js";import"./chunk-EJ36MVS3.js";import"./chunk-N7WUB32N.js";import{c as fe,d as be}from"./chunk-4OYOH73G.js";import"./chunk-E7ZA2RP6.js";import"./chunk-NFFITYYI.js";import"./chunk-QKYHST3S.js";import"./chunk-26DLLJPL.js";import{b as nt}from"./chunk-CKLQ5QYB.js";import"./chunk-LEXXM723.js";import{a as ie,c as Qe}from"./chunk-PR732LFS.js";import"./chunk-YPI3USWF.js";import{a as Xe,b as ce,c as et,d as pe}from"./chunk-E2A55PMK.js";import{a as Ze,b as re}from"./chunk-ROFMEOOL.js";import{e as q,h as j,p as G}from"./chunk-AQNIYYGH.js";import{a as de,b as ue}from"./chunk-UEYH4F7Z.js";import"./chunk-YU5WWNZ3.js";import"./chunk-BODZH67C.js";import"./chunk-7UZYWCAJ.js";import{a as se,b as Je,c as le,d as me,e as z}from"./chunk-FXG7SSDN.js";import"./chunk-C3BTHMVA.js";import{j as oe}from"./chunk-D772OSYX.js";import"./chunk-N4GWINB2.js";import{la as W,pa as I}from"./chunk-DRU5BJUS.js";import{i as te,k as L,v as F}from"./chunk-3CNM3VZD.js";import"./chunk-4O3FVBGX.js";import{$ as _,$b as T,Ab as y,Bb as k,Cb as V,Gb as b,Kb as f,Lb as m,Ma as s,Pb as ze,Qb as He,R as qe,Ra as K,Rb as Ue,Ub as X,V as je,Vb as ee,Wb as B,Xa as O,Xb as N,Zb as o,_b as d,aa as g,ab as D,cc as S,dc as M,ec as w,gb as h,gc as A,hc as E,ia as J,kc as $e,lc as Ke,ma as Ge,rc as C,tc as P,wb as c,wc as v,xb as i,yb as n,zb as p}from"./chunk-U3BUAVLN.js";import"./chunk-GAL4ENT6.js";var Q={especes:"Esp\xE8ces",virement:"Virement bancaire",cheque:"Ch\xE8que",mobile_money:"Mobile Money"},gt={impayee:"Impay\xE9e",partielle:"Partiellement pay\xE9e",payee:"Pay\xE9e",annulee:"Annul\xE9e"},lt={impayee:"danger",partielle:"warn",payee:"success",annulee:"secondary"};var Ie=class{id;reference;prestataire_id;date;montant_total;nb_packings;date_paiement;mode_paiement;statut;notes;created_by;validated_by;created_at;updated_at;deleted_at;statut_label;prestataire_nom;montant_verse;montant_restant;mode_paiement_label;total_rouleaux;prix_par_rouleau;prestataire;packings;versements;creator;constructor(t={}){this.id=t.id??0,this.reference=t.reference??"",this.prestataire_id=t.prestataire_id??0,this.date=t.date??"",this.montant_total=t.montant_total??0,this.nb_packings=t.nb_packings??0,this.date_paiement=t.date_paiement??null,this.mode_paiement=t.mode_paiement??null,this.statut=t.statut??"impayee",this.notes=t.notes??null,this.created_by=t.created_by??null,this.validated_by=t.validated_by??null,this.created_at=t.created_at??"",this.updated_at=t.updated_at??"",this.deleted_at=t.deleted_at??null,this.statut_label=t.statut_label??gt[this.statut]??"",this.prestataire_nom=t.prestataire_nom??null,this.montant_verse=t.montant_verse??0,this.montant_restant=t.montant_restant??0,this.mode_paiement_label=t.mode_paiement_label??"",this.total_rouleaux=t.total_rouleaux??0,this.prix_par_rouleau=t.prix_par_rouleau??0,this.prestataire=t.prestataire,this.packings=t.packings,this.versements=t.versements,this.creator=t.creator}},Le=class{prestataire_id;prestataire_nom;prestataire_phone;prestataire_type;nb_packings_non_factures;montant_non_facture;nb_factures_en_cours;montant_facture;montant_verse;montant_restant_facture;montant_total_du;derniere_date;statut;constructor(t={}){this.prestataire_id=t.prestataire_id??0,this.prestataire_nom=t.prestataire_nom??"",this.prestataire_phone=t.prestataire_phone??"",this.prestataire_type=t.prestataire_type??"",this.nb_packings_non_factures=t.nb_packings_non_factures??0,this.montant_non_facture=t.montant_non_facture??0,this.nb_factures_en_cours=t.nb_factures_en_cours??0,this.montant_facture=t.montant_facture??0,this.montant_verse=t.montant_verse??0,this.montant_restant_facture=t.montant_restant_facture??0,this.montant_total_du=t.montant_total_du??0,this.derniere_date=t.derniere_date??null,this.statut=this.montant_total_du===0?"solde":this.montant_verse>0?"partiel":"impaye"}},$=class{date_debut;date_fin;nb_prestataires;total_non_facture;total_facture;total_verse;total_restant_facture;montant_global_du;montant_total;prestataires;constructor(t={}){this.date_debut=t.date_debut??null,this.date_fin=t.date_fin??null,this.nb_prestataires=t.nb_prestataires??0,this.total_non_facture=t.total_non_facture??0,this.total_facture=t.total_facture??0,this.total_verse=t.total_verse??0,this.total_restant_facture=t.total_restant_facture??0,this.montant_global_du=t.montant_global_du??0,this.montant_total=this.total_facture+this.total_non_facture,this.prestataires=(t.prestataires??[]).map(e=>new Le(e))}},Te=class{prestataire_id;date_debut;date_fin;nb_packings;montant_total;total_rouleaux;packings;constructor(t={}){this.prestataire_id=t.prestataire_id??0,this.date_debut=t.date_debut??"",this.date_fin=t.date_fin??"",this.nb_packings=t.nb_packings??0,this.montant_total=t.montant_total??0,this.total_rouleaux=t.total_rouleaux??0,this.packings=t.packings??[]}};var R=class a{constructor(t){this.http=t}apiUrl=`${tt.apiUrl}/facture-packings`;getFactures(t){let e=new ie;return t&&(t.prestataire_id&&(e=e.set("prestataire_id",t.prestataire_id.toString())),t.date_debut&&(e=e.set("date_debut",t.date_debut)),t.date_fin&&(e=e.set("date_fin",t.date_fin)),t.statut&&(e=e.set("statut",t.statut)),t.soldee!==void 0&&(e=e.set("soldee",t.soldee.toString())),t.search&&(e=e.set("search",t.search)),t.sort_by&&(e=e.set("sort_by",t.sort_by)),t.sort_order&&(e=e.set("sort_order",t.sort_order)),t.per_page&&(e=e.set("per_page",t.per_page.toString()))),this.http.get(this.apiUrl,{params:e})}getFacture(t){return this.http.get(`${this.apiUrl}/${t}`)}getPreview(t,e,r){let l=new ie().set("prestataire_id",t.toString()).set("date_debut",e).set("date_fin",r);return this.http.get(`${this.apiUrl}/preview`,{params:l})}getComptabilite(t){let e=new ie;return t&&(t.date_debut&&(e=e.set("date_debut",t.date_debut)),t.date_fin&&(e=e.set("date_fin",t.date_fin)),t.prestataire_id&&(e=e.set("prestataire_id",t.prestataire_id.toString()))),this.http.get(`${this.apiUrl}/comptabilite`,{params:e})}createFacture(t){return this.http.post(this.apiUrl,t)}deleteFacture(t){return this.http.delete(`${this.apiUrl}/${t}`)}getVersements(t){return this.http.get(`${this.apiUrl}/${t}/versements`)}createVersement(t,e){return this.http.post(`${this.apiUrl}/${t}/versements`,e)}deleteVersement(t,e){return this.http.delete(`${this.apiUrl}/${t}/versements/${e}`)}static \u0275fac=function(e){return new(e||a)(je(Qe))};static \u0275prov=qe({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ve=class a{constructor(t){this.paiementService=t}summary=null;ngOnInit(){this.loadStats()}loadStats(t){this.paiementService.getComptabilite(t).subscribe({next:e=>{this.summary=new $(e.data)}})}formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t)+" GNF"}static \u0275fac=function(e){return new(e||a)(O(R))};static \u0275cmp=D({type:a,selectors:[["app-stats-comptabilite-packing-widget"]],hostVars:2,hostBindings:function(e,r){e&2&&ee("display","contents")},decls:40,vars:13,consts:[[1,"col-span-12"],[1,"stats-bar"],[1,"stats-bar__item"],[1,"stats-bar__icon","stats-bar__icon--primary"],[1,"pi","pi-wallet"],[1,"stats-bar__value"],[1,"stats-bar__label"],[1,"stats-bar__divider"],[1,"stats-bar__icon","stats-bar__icon--success"],[1,"pi","pi-check-circle"],[1,"stats-bar__value","stats-bar__value--success"],[1,"stats-bar__icon","stats-bar__icon--warning"],[1,"pi","pi-arrow-right"],[1,"stats-bar__value","stats-bar__value--warning"],[1,"stats-bar__icon","stats-bar__icon--info"],[1,"pi","pi-users"],[1,"stats-bar__value","stats-bar__value--info"]],template:function(e,r){e&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),V(4,"i",4),k(),y(5,"div")(6,"div",5),o(7),C(8,"money"),k(),y(9,"div",6),o(10,"Montant total"),k()()(),V(11,"div",7),y(12,"div",2)(13,"div",8),V(14,"i",9),k(),y(15,"div")(16,"div",10),o(17),C(18,"money"),k(),y(19,"div",6),o(20,"Total pay\xE9"),k()()(),V(21,"div",7),y(22,"div",2)(23,"div",11),V(24,"i",12),k(),y(25,"div")(26,"div",13),o(27),C(28,"money"),k(),y(29,"div",6),o(30,"Reste \xE0 payer"),k()()(),V(31,"div",7),y(32,"div",2)(33,"div",14),V(34,"i",15),k(),y(35,"div")(36,"div",16),o(37),k(),y(38,"div",6),o(39,"Prestataires"),k()()()()()),e&2&&(s(7),d(r.summary?P(8,4,r.summary.montant_total,"GNF"):"--"),s(10),d(r.summary?P(18,7,r.summary.total_verse,"GNF"):"--"),s(10),d(r.summary?P(28,10,r.summary.montant_global_du,"GNF"):"--"),s(10),d(r.summary?r.summary.nb_prestataires:"--"))},dependencies:[F,U],styles:[".stats-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--p-surface-0);border-radius:14px;padding:1.25rem 2rem;gap:0;box-shadow:0 1px 3px #0000000a}.stats-bar__item[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:1rem;padding:.5rem 1.5rem}.stats-bar__divider[_ngcontent-%COMP%]{width:1px;height:40px;background:var(--p-surface-200);flex-shrink:0}.stats-bar__icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:1.1rem}.stats-bar__icon--primary[_ngcontent-%COMP%]{background:var(--p-primary-50);color:var(--p-primary-500)}.stats-bar__icon--success[_ngcontent-%COMP%]{background:#ecfdf5;color:#10b981}.stats-bar__icon--warning[_ngcontent-%COMP%]{background:#fff7ed;color:#f59e0b}.stats-bar__icon--info[_ngcontent-%COMP%]{background:#eef2ff;color:#6366f1}.stats-bar__value[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:var(--p-surface-900);letter-spacing:-.02em;line-height:1.2}.stats-bar__value--success[_ngcontent-%COMP%]{color:#059669}.stats-bar__value--warning[_ngcontent-%COMP%]{color:#d97706}.stats-bar__value--info[_ngcontent-%COMP%]{color:#4f46e5}.stats-bar__label[_ngcontent-%COMP%]{font-size:.78rem;color:var(--p-surface-400);margin-top:2px}@media (max-width: 768px){.stats-bar[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;padding:1rem}.stats-bar__item[_ngcontent-%COMP%]{padding:.75rem 1rem;width:100%}.stats-bar__divider[_ngcontent-%COMP%]{width:100%;height:1px}}.dark[_nghost-%COMP%]   .stats-bar[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar[_ngcontent-%COMP%]{background:var(--p-surface-800);box-shadow:0 1px 3px #00000026}.dark[_nghost-%COMP%]   .stats-bar__divider[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__divider[_ngcontent-%COMP%]{background:var(--p-surface-600)}.dark[_nghost-%COMP%]   .stats-bar__icon--primary[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__icon--primary[_ngcontent-%COMP%]{background:#3b82f61f}.dark[_nghost-%COMP%]   .stats-bar__icon--success[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__icon--success[_ngcontent-%COMP%]{background:#10b9811f}.dark[_nghost-%COMP%]   .stats-bar__icon--warning[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__icon--warning[_ngcontent-%COMP%]{background:#f59e0b1f}.dark[_nghost-%COMP%]   .stats-bar__icon--info[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__icon--info[_ngcontent-%COMP%]{background:#6366f11f}.dark[_nghost-%COMP%]   .stats-bar__value[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__value[_ngcontent-%COMP%]{color:var(--p-surface-0)}.dark[_nghost-%COMP%]   .stats-bar__label[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__label[_ngcontent-%COMP%]{color:var(--p-surface-400)}"]})};var kt=["dt"],St=()=>({"min-width":"55rem"}),Mt=()=>[10,20,30],wt=()=>({width:"800px"}),Et=()=>({width:"450px"}),Ot=(a,t,e)=>({"status-badge--danger":a,"status-badge--warn":t,"status-badge--success":e});function Dt(a,t){if(a&1){let e=b();i(0,"div",13)(1,"p-datepicker",14),w("ngModelChange",function(l){_(e);let u=m();return M(u.filtrePeriodeDebut,l)||(u.filtrePeriodeDebut=l),g(l)}),n(),i(2,"p-datepicker",15),w("ngModelChange",function(l){_(e);let u=m();return M(u.filtrePeriodeFin,l)||(u.filtrePeriodeFin=l),g(l)}),n(),i(3,"p-button",16),f("onClick",function(){_(e);let l=m();return g(l.loadComptabilite())}),n()()}if(a&2){let e=m();s(),S("ngModel",e.filtrePeriodeDebut),c("showIcon",!0),s(),S("ngModel",e.filtrePeriodeFin),c("showIcon",!0),s(),c("rounded",!0)("outlined",!0)}}function Ft(a,t){if(a&1){let e=b();i(0,"div",13)(1,"p-select",17),w("ngModelChange",function(l){_(e);let u=m();return M(u.filtreStatut,l)||(u.filtreStatut=l),g(l)}),f("onChange",function(){_(e);let l=m();return g(l.applyStatutFilter())}),n(),i(2,"p-button",18),f("onClick",function(){_(e);let l=m();return g(l.exportCSV())}),n()()}if(a&2){let e=m();s(),S("ngModel",e.filtreStatut),c("options",e.statutOptions)}}function It(a,t){if(a&1){let e=b();i(0,"div",19)(1,"h5",20),o(2,"Comptabilit\xE9 Packing"),n(),i(3,"p-iconfield"),p(4,"p-inputicon",21),i(5,"input",22),f("input",function(l){_(e);let u=m(),x=X(8);return g(u.onGlobalFilter(x,l))}),n()()()}}function Tt(a,t){a&1&&(i(0,"tr")(1,"th",23)(2,"span",24),o(3,"Prestataire "),p(4,"p-sortIcon",25),n()(),i(5,"th")(6,"span",24),o(7,"T\xE9l\xE9phone"),n()(),i(8,"th",26)(9,"span",24),o(10,"Date "),p(11,"p-sortIcon",27),n()(),i(12,"th",28)(13,"span",29),o(14,"Total "),p(15,"p-sortIcon",30),n()(),i(16,"th",31)(17,"span",29),o(18,"Pay\xE9 "),p(19,"p-sortIcon",32),n()(),i(20,"th",33)(21,"span",29),o(22,"Reste d\xFB "),p(23,"p-sortIcon",34),n()(),i(24,"th",35)(25,"span",36),o(26,"Statut "),p(27,"p-sortIcon",37),n()(),p(28,"th",38),n())}function Vt(a,t){if(a&1){let e=b();i(0,"tr",39),f("dblclick",function(){let l=_(e).$implicit,u=m();return g(u.goToDetail(l))}),i(1,"td")(2,"div",40)(3,"span",41),o(4),n(),i(5,"span",42),o(6),n()()(),i(7,"td",43),o(8),C(9,"phoneFormat"),n(),i(10,"td",43),o(11),n(),i(12,"td",44),o(13),n(),i(14,"td",45),o(15),n(),i(16,"td",44),o(17),n(),i(18,"td",46)(19,"span",47),o(20),n()(),i(21,"td",46)(22,"p-button",48),f("click",function(){let l=_(e).$implicit,u=m();return g(u.goToDetail(l))}),n()()()}if(a&2){let e=t.$implicit,r=m();s(3),ee("background","var(--p-primary-50)")("color","var(--p-primary-600)"),s(),T(" ",r.getInitials(e.prestataire_nom)," "),s(2),d(e.prestataire_nom),s(2),d(P(9,15,e.prestataire_phone,"INT")),s(3),d(r.formatDateDisplay(e.derniere_date)),s(2),d(r.formatCurrency(e.montant_facture)),s(2),d(r.formatCurrency(e.montant_verse)),s(2),d(r.formatCurrency(e.montant_restant_facture)),s(2),c("ngClass",$e(18,Ot,e.statut==="impaye",e.statut==="partiel",e.statut==="solde")),s(),T(" ",e.statut==="impaye"?"Impay\xE9":e.statut==="partiel"?"Partiel":"Sold\xE9"," "),s(2),c("text",!0)("rounded",!0)}}function Rt(a,t){a&1&&(i(0,"tr")(1,"td",49)(2,"div",50),p(3,"i",51),i(4,"span"),o(5,"Aucun prestataire trouv\xE9"),n()()()())}function Nt(a,t){a&1&&(i(0,"tr")(1,"th"),o(2,"R\xE9f\xE9rence"),n(),i(3,"th"),o(4,"Date"),n(),i(5,"th",59),o(6,"Rouleaux"),n(),i(7,"th",59),o(8,"Montant"),n()())}function Bt(a,t){if(a&1&&(i(0,"tr")(1,"td",60),o(2),n(),i(3,"td",61),o(4),n(),i(5,"td",59),o(6),n(),i(7,"td",62),o(8),n()()),a&2){let e=t.$implicit,r=m(3);s(2),d(e.reference),s(2),d(r.formatDateDisplay(e.date)),s(2),d(e.nb_rouleaux),s(2),d(r.formatCurrency(e.montant))}}function At(a,t){if(a&1&&(i(0,"div",54)(1,"div",55)(2,"span")(3,"strong"),o(4),n(),o(5," packings"),n(),p(6,"span",56),i(7,"span")(8,"strong"),o(9),n(),o(10," rouleaux"),n(),i(11,"span",57),o(12),n()(),i(13,"p-table",58),h(14,Nt,9,0,"ng-template",null,4,v)(16,Bt,9,4,"ng-template",null,5,v),n()()),a&2){let e=m(2);s(4),d(e.previewData.nb_packings),s(5),d(e.previewData.total_rouleaux),s(3),d(e.formatCurrency(e.previewData.montant_total)),s(),c("value",e.previewData.packings)("rows",10)("paginator",e.previewData.packings.length>10)("rowHover",!0)}}function Lt(a,t){a&1&&(i(0,"div",63),p(1,"i",64),n())}function Wt(a,t){if(a&1&&h(0,At,18,7,"div",52)(1,Lt,2,0,"div",53),a&2){let e=m();c("ngIf",e.previewData),s(),c("ngIf",e.previewLoading)}}function qt(a,t){if(a&1){let e=b();i(0,"p-button",65),f("click",function(){_(e);let l=m();return g(l.previewDialog=!1)}),n()}a&2&&c("text",!0)}var Ne=class a{constructor(t,e,r){this.router=t;this.factureService=e;this.messageService=r}dataChanged=new K;filterFields=["prestataire_nom","prestataire_phone","montant_total_du"];prestataires=J([]);selectedPrestataires=null;comptaSummary=null;loading=!1;filtrePeriodeDebut=null;filtrePeriodeFin=null;filtreStatut=null;statutOptions=[{label:"Tous",value:null},{label:"Impay\xE9",value:"impaye"},{label:"Partiel",value:"partiel"},{label:"Sold\xE9",value:"solde"}];selectedItem=null;previewDialog=!1;previewData=null;previewLoading=!1;facturerLoading=!1;dt;exportColumns;cols;ngOnInit(){this.loadComptabilite(),this.initColumns()}initColumns(){this.cols=[{field:"prestataire_nom",header:"Prestataire"},{field:"prestataire_phone",header:"T\xE9l\xE9phone"},{field:"nb_packings_non_factures",header:"Non factur\xE9s"},{field:"montant_non_facture",header:"Mnt non factur\xE9"},{field:"montant_facture",header:"Factur\xE9"},{field:"montant_verse",header:"Vers\xE9"},{field:"montant_restant_facture",header:"Reste facture"},{field:"montant_total_du",header:"Total d\xFB"}],this.exportColumns=this.cols.map(t=>({title:t.header,dataKey:t.field}))}loadComptabilite(){this.loading=!0;let t={};this.filtrePeriodeDebut&&(t.date_debut=this.formatDate(this.filtrePeriodeDebut)),this.filtrePeriodeFin&&(t.date_fin=this.formatDate(this.filtrePeriodeFin)),this.factureService.getComptabilite(t).subscribe({next:e=>{this.comptaSummary=new $(e.data),this.applyStatutFilter(),this.loading=!1,this.dataChanged.emit(t)},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger la comptabilit\xE9",life:3e3}),this.loading=!1}})}applyStatutFilter(){this.comptaSummary&&(this.filtreStatut?this.prestataires.set(this.comptaSummary.prestataires.filter(t=>t.statut===this.filtreStatut)):this.prestataires.set(this.comptaSummary.prestataires))}exportCSV(){this.dt.exportCSV()}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}openPreview(t){let e=this.filtrePeriodeDebut?this.formatDate(this.filtrePeriodeDebut):"2000-01-01",r=this.filtrePeriodeFin?this.formatDate(this.filtrePeriodeFin):"2099-12-31";this.selectedItem=t,this.previewDialog=!0,this.previewLoading=!0,this.previewData=null,this.factureService.getPreview(t.prestataire_id,e,r).subscribe({next:l=>{this.previewData=new Te(l.data),this.previewLoading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger la pr\xE9visualisation",life:3e3}),this.previewLoading=!1,this.previewDialog=!1}})}facturerNonFactures(){if(!this.selectedItem||this.facturerLoading)return;this.facturerLoading=!0;let t=this.filtrePeriodeDebut?this.formatDate(this.filtrePeriodeDebut):"2000-01-01",e=this.filtrePeriodeFin?this.formatDate(this.filtrePeriodeFin):"2099-12-31",r={prestataire_id:this.selectedItem.prestataire_id,date_debut:t,date_fin:e};this.factureService.createFacture(r).subscribe({next:l=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Facture ${l.data.reference} cr\xE9\xE9e`,life:3e3}),this.facturerLoading=!1,this.selectedItem&&(this.selectedItem.nb_packings_non_factures=0,this.selectedItem.montant_non_facture=0),this.loadComptabilite()},error:l=>{let u=l?.error?.message||"Impossible de cr\xE9er la facture";this.messageService.add({severity:"error",summary:"Erreur",detail:u,life:5e3}),this.facturerLoading=!1}})}formatDate(t){return t?typeof t=="string"?t:new Date(t).toISOString().split("T")[0]:""}formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t)+" GNF"}formatDateDisplay(t){return t?new Date(t).toLocaleDateString("fr-FR"):""}goToDetail(t){this.router.navigate(["/comptabilite/comptabilite-packing-detail",t.prestataire_id],{queryParams:{prestataire_nom:t.prestataire_nom,prestataire_phone:t.prestataire_phone}})}getInitials(t){if(!t||!t.trim())return"--";let e=t.trim().split(/\s+/).filter(Boolean);return e.length===1?e[0].slice(0,2).toUpperCase():`${e[0][0]}${e[e.length-1][0]}`.toUpperCase()}static \u0275fac=function(e){return new(e||a)(O(ne),O(R),O(I))};static \u0275cmp=D({type:a,selectors:[["app-comptabilite-packing-tableau"]],viewQuery:function(e,r){if(e&1&&ze(kt,5),e&2){let l;He(l=Ue())&&(r.dt=l.first)}},outputs:{dataChanged:"dataChanged"},features:[A([I])],decls:23,vars:22,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["emptymessage",""],["content",""],["footer",""],[1,"card"],["styleClass","mb-12"],["dataKey","prestataire_id","currentPageReportTemplate"," {first} \xE0 {last} sur {totalRecords} prestataires",3,"selectionChange","value","rows","columns","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions","loading"],["header","Pr\xE9visualisation",3,"visibleChange","visible","modal","draggable"],[1,"flex","items-center","gap-2"],["dateFormat","dd/mm/yy","placeholder","Date d\xE9but","inputStyleClass","w-full","styleClass","w-40",3,"ngModelChange","ngModel","showIcon"],["dateFormat","dd/mm/yy","placeholder","Date fin","inputStyleClass","w-full","styleClass","w-40",3,"ngModelChange","ngModel","showIcon"],["icon","pi pi-filter","severity","primary","pTooltip","Appliquer les filtres",3,"onClick","rounded","outlined"],["optionLabel","label","optionValue","value","placeholder","Statut","styleClass","w-40",3,"ngModelChange","onChange","ngModel","options"],["label","Export","icon","pi pi-download","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Rechercher...",3,"input"],["pSortableColumn","prestataire_nom"],[1,"col-header"],["field","prestataire_nom"],["pSortableColumn","derniere_date"],["field","derniere_date"],["pSortableColumn","montant_facture",1,"text-right"],[1,"col-header","justify-end"],["field","montant_facture"],["pSortableColumn","montant_verse",1,"text-right"],["field","montant_verse"],["pSortableColumn","montant_restant_facture",1,"text-right"],["field","montant_restant_facture"],["pSortableColumn","statut",1,"text-center"],[1,"col-header","justify-center"],["field","statut"],[1,"text-center",2,"width","5rem"],[1,"table-row",3,"dblclick"],[1,"cell-prestataire"],[1,"cell-prestataire__avatar"],[1,"cell-prestataire__name"],[1,"cell-secondary","cell-bold"],[1,"text-right","cell-mono","cell-bold"],[1,"text-right","cell-mono","cell-success"],[1,"text-center"],[1,"status-badge",3,"ngClass"],["icon","pi pi-arrow-right","severity","secondary","pTooltip","D\xE9tail",3,"click","text","rounded"],["colspan","8"],[1,"empty-state"],[1,"pi","pi-inbox"],["class","flex flex-col gap-4",4,"ngIf"],["class","flex items-center justify-center p-12",4,"ngIf"],[1,"flex","flex-col","gap-4"],[1,"preview-summary"],[1,"preview-summary__sep"],[1,"ml-auto","text-xl","font-bold","text-primary"],["styleClass","p-datatable-sm",3,"value","rows","paginator","rowHover"],[1,"text-right"],[1,"font-medium"],[1,"cell-secondary"],[1,"text-right","font-semibold"],[1,"flex","items-center","justify-center","p-12"],[1,"pi","pi-spin","pi-spinner","text-3xl","text-surface-300"],["label","Fermer",3,"click","text"]],template:function(e,r){if(e&1){let l=b();p(0,"p-toast"),i(1,"div",9)(2,"p-toolbar",10),h(3,Dt,4,6,"ng-template",null,0,v)(5,Ft,3,2,"ng-template",null,1,v),n(),i(7,"p-table",11,2),w("selectionChange",function(x){return _(l),M(r.selectedPrestataires,x)||(r.selectedPrestataires=x),g(x)}),h(9,It,6,0,"ng-template",null,3,v)(11,Tt,29,0,"ng-template",null,4,v)(13,Vt,23,22,"ng-template",null,5,v)(15,Rt,6,0,"ng-template",null,6,v),n()(),i(17,"p-dialog",12),w("visibleChange",function(x){return _(l),M(r.previewDialog,x)||(r.previewDialog=x),g(x)}),h(18,Wt,2,2,"ng-template",null,7,v)(20,qt,1,1,"ng-template",null,8,v),n(),p(22,"p-confirmdialog")}e&2&&(s(7),c("value",r.prestataires())("rows",10)("columns",r.cols)("paginator",!0)("globalFilterFields",r.filterFields)("tableStyle",E(18,St)),S("selection",r.selectedPrestataires),c("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",E(19,Mt))("loading",r.loading),s(10),N(E(20,wt)),S("visible",r.previewDialog),c("modal",!0)("draggable",!1),s(5),N(E(21,Et)))},dependencies:[F,te,L,Ce,ve,he,xe,G,q,j,z,me,oe,ke,ye,Se,st,re,Ze,be,fe,we,Me,Pe,pe,et,ce,Xe,Oe,Ee,_e,at,De,ue,de,H,it,Fe],styles:[".tableau-card[_ngcontent-%COMP%]{border-radius:14px!important;box-shadow:0 1px 3px #0000000a!important;overflow:hidden}[_nghost-%COMP%]     .p-datatable .p-datatable-caption{padding:1.5rem 1.75rem 1.75rem;border-bottom:1px solid var(--p-surface-100);margin-bottom:0}.table-caption[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1.5rem;flex-wrap:wrap}.table-caption__filters[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.table-caption__actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem 1.25rem}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1.1rem 1.25rem}.col-header[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.03em;color:var(--p-surface-500)}.table-row[_ngcontent-%COMP%]{cursor:pointer;transition:background .15s ease}.cell-prestataire[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.cell-prestataire__avatar[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.8rem;flex-shrink:0}.cell-prestataire__name[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:var(--p-surface-800)}.cell-secondary[_ngcontent-%COMP%]{color:var(--p-surface-400);font-size:.9rem}.cell-mono[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums;font-size:.9rem}.cell-success[_ngcontent-%COMP%]{color:#059669}.cell-bold[_ngcontent-%COMP%]{font-weight:600;color:var(--p-surface-800)}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.78rem;font-weight:600;letter-spacing:.01em}.status-badge--danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.status-badge--warn[_ngcontent-%COMP%]{background:#fffbeb;color:#d97706}.status-badge--success[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;padding:3rem 0;color:var(--p-surface-300)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}.preview-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.25rem;background:var(--p-surface-50);border-radius:10px;font-size:.9rem;color:var(--p-surface-600)}.preview-summary__sep[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%;background:var(--p-surface-300)}.dark[_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .dark[_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%]{color:var(--p-surface-100)}.dark[_nghost-%COMP%]   .col-header[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .col-header[_ngcontent-%COMP%]{color:var(--p-surface-400)}.dark[_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%]{background:#dc26261f}.dark[_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%]{background:#d977061f}.dark[_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%]{background:#0596691f}.dark[_nghost-%COMP%]   .preview-summary[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .preview-summary[_ngcontent-%COMP%]{background:var(--p-surface-700)}.dark   [_nghost-%COMP%]     .p-datatable .p-datatable-caption{border-bottom-color:var(--p-surface-700)}"]})};var Z=class a{ngOnInit(){}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=D({type:a,selectors:[["app-comptabilite-packing-liste"]],features:[A([I,W,rt])],decls:4,vars:0,consts:[["statsWidget",""],[1,"grid","grid-cols-12","gap-6","mb-6"],[3,"dataChanged"]],template:function(e,r){if(e&1){let l=b();i(0,"div",1),p(1,"app-stats-comptabilite-packing-widget",null,0),n(),i(3,"app-comptabilite-packing-tableau",2),f("dataChanged",function(x){_(l);let _t=X(2);return g(_t.loadStats(x))}),n()}},dependencies:[F,Ve,Ne],encapsulation:2})};function Gt(a,t){if(a&1){let e=b();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),o(4),n(),i(5,"div",5),o(6,"Versement facture"),n()(),i(7,"button",6),f("click",function(){_(e);let l=m();return g(l.onClose.emit())}),p(8,"i",7),n()(),i(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),o(13,"Total facture"),n(),i(14,"div",12),o(15),C(16,"money"),n()(),i(17,"div",10)(18,"div",11),o(19,"D\xE9j\xE0 vers\xE9"),n(),i(20,"div",13),o(21),C(22,"money"),n()(),p(23,"div",14),i(24,"div",10)(25,"div",15),o(26,"Reste \xE0 payer"),n(),i(27,"div",16),o(28),C(29,"money"),n()()(),i(30,"div",17)(31,"div",18),o(32,"Montant \xE0 verser"),n(),i(33,"p-inputnumber",19),w("ngModelChange",function(l){_(e);let u=m();return M(u.montant,l)||(u.montant=l),g(l)}),n()(),i(34,"div",17)(35,"div",18),o(36,"Mode de paiement"),n(),i(37,"div",20)(38,"div",21),f("click",function(){_(e);let l=m();return g(l.selectMode("especes"))}),p(39,"i",22),i(40,"span"),o(41,"Esp\xE8ces"),n()(),i(42,"div",21),f("click",function(){_(e);let l=m();return g(l.selectMode("virement"))}),p(43,"i",23),i(44,"span"),o(45,"Virement"),n()(),i(46,"div",21),f("click",function(){_(e);let l=m();return g(l.selectMode("mobile_money"))}),p(47,"i",24),i(48,"span"),o(49,"Mobile"),n()()()()(),i(50,"div",25)(51,"div",26)(52,"div",27)(53,"div",12),o(54,"Montant \xE0 payer"),n()(),i(55,"div",28),o(56),n()(),i(57,"button",29),f("click",function(){_(e);let l=m();return g(l.confirmer())}),p(58,"i",30),i(59,"span",31),o(60,"Confirmer le paiement"),n()()()()}if(a&2){let e=m();s(4),d(e.facture.reference.replace("FACT-PACK-","")),s(3),c("text",!0)("rounded",!0),s(8),d(P(16,19,e.facture.montant_total,"GNF")),s(6),d(P(22,22,e.facture.montant_verse,"GNF")),s(7),d(P(29,25,e.facture.montant_restant,"GNF")),s(5),S("ngModel",e.montant),c("min",1)("max",e.facture.montant_restant)("useGrouping",!0),s(5),B("slideover-mode--active",e.selectedMode==="especes"),s(4),B("slideover-mode--active",e.selectedMode==="virement"),s(4),B("slideover-mode--active",e.selectedMode==="mobile_money"),s(10),d(e.montant?e.formatCurrency(e.montant):"0 GNF"),s(),c("disabled",e.saving||!e.montant)("loading",e.saving)}}var Be=class a{facture=null;saving=!1;onPay=new K;onClose=new K;montant=null;selectedMode="especes";ngOnChanges(){this.facture&&(this.montant=this.facture.montant_restant,this.selectedMode="especes")}selectMode(t){this.selectedMode=t}confirmer(){!this.montant||this.montant<=0||!this.facture||this.onPay.emit({montant:this.montant,mode_paiement:this.selectedMode})}formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t)+" GNF"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=D({type:a,selectors:[["app-comptabilite-packing-paiement"]],inputs:{facture:"facture",saving:"saving"},outputs:{onPay:"onPay",onClose:"onClose"},features:[Ge],decls:1,vars:1,consts:[["class","flex flex-col h-full bg-surface-0 dark:bg-surface-900",4,"ngIf"],[1,"flex","flex-col","h-full","bg-surface-0","dark:bg-surface-900"],[1,"w-full","p-6","border-b","border-surface-200","dark:border-surface-700","flex","justify-start","items-center"],[1,"flex-1"],[1,"text-surface-900","dark:text-surface-0","text-xl","font-medium","leading-tight"],[1,"text-surface-500","dark:text-surface-400","text-sm","font-normal","mt-1"],["pButton","",1,"w-10","h-10",3,"click","text","rounded"],["pButtonIcon","",1,"pi","pi-times"],[1,"flex-1","w-full","p-6","flex","flex-col","justify-start","items-start","gap-6","overflow-y-auto"],[1,"w-full","p-5","bg-surface-50","dark:bg-surface-800","rounded-xl","flex","flex-col","justify-start","items-start","gap-4"],[1,"w-full","flex","justify-start","items-start","gap-6"],[1,"flex-1","text-surface-500","dark:text-surface-400","text-base","font-normal","leading-tight"],[1,"text-surface-900","dark:text-surface-0","text-base","font-medium","leading-tight"],[1,"text-base","font-semibold","leading-tight",2,"color","#059669"],[1,"w-full","h-px","bg-surface-200","dark:bg-surface-700"],[1,"flex-1","text-surface-900","dark:text-surface-0","text-base","font-semibold","leading-tight"],[1,"text-lg","font-bold","leading-tight",2,"color","#d97706"],[1,"w-full","flex","flex-col","gap-3"],[1,"text-surface-500","dark:text-surface-400","text-xs","font-semibold","uppercase","tracking-wider"],["suffix"," GNF","locale","fr-FR","inputStyleClass","w-full text-right text-xl font-bold py-4","styleClass","w-full","placeholder","0",3,"ngModelChange","ngModel","min","max","useGrouping"],[1,"w-full","flex","gap-3"],[1,"slideover-mode",3,"click"],[1,"pi","pi-money-bill"],[1,"pi","pi-building"],[1,"pi","pi-mobile"],[1,"w-full","border-t","border-surface-200","dark:border-surface-700","p-6","flex","flex-col","gap-5"],[1,"w-full","flex","justify-start","items-start","gap-4"],[1,"flex","justify-start","items-end","gap-2"],[1,"flex-1","text-right","text-surface-900","dark:text-surface-0","text-lg","font-bold","leading-tight"],["pButton","","severity","contrast",1,"w-full","py-3",3,"click","disabled","loading"],["pButtonIcon","",1,"pi","pi-check","mr-2"],["pButtonLabel",""]],template:function(e,r){e&1&&h(0,Gt,61,28,"div",0),e&2&&c("ngIf",r.facture)},dependencies:[F,L,G,q,j,z,le,se,Je,ae,H,ge,U],styles:[".slideover-mode[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:1rem .75rem;border-radius:12px;border:1.5px solid var(--p-surface-200);background:transparent;cursor:pointer;transition:all .15s ease;color:var(--p-surface-500);font-size:.82rem;font-weight:500}.slideover-mode[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.slideover-mode[_ngcontent-%COMP%]:hover{border-color:var(--p-surface-300);background:var(--p-surface-50)}.slideover-mode--active[_ngcontent-%COMP%]{border-color:var(--p-primary-500);background:var(--p-primary-50);color:var(--p-primary-600);font-weight:600}.dark[_nghost-%COMP%]   .slideover-mode[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .slideover-mode[_ngcontent-%COMP%]{border-color:var(--p-surface-600);color:var(--p-surface-300)}.dark[_nghost-%COMP%]   .slideover-mode[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .slideover-mode[_ngcontent-%COMP%]:hover{background:var(--p-surface-800);border-color:var(--p-surface-500)}.dark[_nghost-%COMP%]   .slideover-mode--active[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .slideover-mode--active[_ngcontent-%COMP%]{border-color:var(--p-primary-500);background:#3b82f61f;color:var(--p-primary-400)}"]})};var zt=()=>[10,20,30],Ht=()=>({"min-width":"55rem"}),dt=()=>({width:"750px"}),ut=()=>({"max-height":"70vh",overflow:"auto"}),Ut=()=>({width:"450px"}),$t=(a,t,e,r)=>({"status-badge--danger":a,"status-badge--warn":t,"status-badge--success":e,"status-badge--secondary":r});function Kt(a,t){if(a&1&&(i(0,"span",30),p(1,"i",31),o(2),C(3,"phoneFormat"),n()),a&2){let e=m();s(2),T(" ",P(3,1,e.prestatairePhone,"INT")," ")}}function Qt(a,t){if(a&1){let e=b();i(0,"div",32)(1,"div",33),f("click",function(){_(e);let l=m();return g(l.closeSlideoverPaiement())}),n(),i(2,"div",34)(3,"app-comptabilite-packing-paiement",35),f("onPay",function(l){_(e);let u=m();return g(u.onSlideoverPay(l))})("onClose",function(){_(e);let l=m();return g(l.closeSlideoverPaiement())}),n()()()}if(a&2){let e=m();s(3),c("facture",e.slideoverFacture)("saving",e.slideoverSaving)}}function Yt(a,t){a&1&&(i(0,"div",36)(1,"h5",37),o(2,"Factures"),n()())}function Zt(a,t){a&1&&(i(0,"tr")(1,"th",38)(2,"span",39),o(3,"R\xE9f\xE9rence "),p(4,"p-sortIcon",40),n()(),i(5,"th",41)(6,"span",39),o(7,"Date "),p(8,"p-sortIcon",42),n()(),i(9,"th",43)(10,"span",44),o(11,"Rouleaux "),p(12,"p-sortIcon",45),n()(),i(13,"th",46)(14,"span",44),o(15,"Prix/rouleau"),n()(),i(16,"th",47)(17,"span",44),o(18,"A payer "),p(19,"p-sortIcon",48),n()(),i(20,"th",49)(21,"span",44),o(22,"Vers\xE9 "),p(23,"p-sortIcon",50),n()(),i(24,"th",46)(25,"span",44),o(26,"Restant"),n()(),i(27,"th",51)(28,"span",52),o(29,"Statut "),p(30,"p-sortIcon",53),n()(),p(31,"th",54),n())}function Jt(a,t){if(a&1){let e=b();i(0,"p-button",67),f("click",function(){_(e);let l=m().$implicit,u=m();return g(u.openVersement(l))}),n()}a&2&&c("text",!0)("rounded",!0)}function Xt(a,t){if(a&1){let e=b();i(0,"p-button",68),f("click",function(){_(e);let l=m().$implicit,u=m();return g(u.openSlideoverPaiement(l))}),n()}a&2&&c("text",!0)("rounded",!0)}function ei(a,t){if(a&1){let e=b();i(0,"p-button",69),f("click",function(){_(e);let l=m().$implicit,u=m();return g(u.confirmDeleteFacture(l))}),n()}a&2&&c("text",!0)("rounded",!0)}function ti(a,t){if(a&1){let e=b();i(0,"tr")(1,"td",55),o(2),n(),i(3,"td",56),o(4),n(),i(5,"td",57),o(6),n(),i(7,"td",57),o(8),C(9,"money"),n(),i(10,"td",57),o(11),C(12,"money"),n(),i(13,"td",58),o(14),C(15,"money"),n(),i(16,"td",59),o(17),C(18,"money"),n(),i(19,"td",60)(20,"span",61),o(21),n()(),i(22,"td")(23,"div",62),h(24,Jt,1,2,"p-button",63)(25,Xt,1,2,"p-button",64),i(26,"p-button",65),f("click",function(){let l=_(e).$implicit,u=m();return g(u.openHistorique(l))}),n(),h(27,ei,1,2,"p-button",66),n()()()}if(a&2){let e=t.$implicit,r=m();s(2),d(e.reference.replace("FACT-PACK-","")),s(2),d(r.formatDateDisplay(e.date)),s(2),d(e.total_rouleaux),s(2),d(P(9,14,e.prix_par_rouleau,"GNF")),s(3),d(P(12,17,e.montant_total,"GNF")),s(3),d(P(15,20,e.montant_verse,"GNF")),s(3),d(P(18,23,e.montant_restant,"GNF")),s(3),c("ngClass",Ke(26,$t,e.statut==="impayee",e.statut==="partielle",e.statut==="payee",e.statut==="annulee")),s(),T(" ",e.statut_label," "),s(3),c("ngIf",e.statut!=="payee"),s(),c("ngIf",e.statut!=="payee"),s(),c("text",!0)("rounded",!0),s(),c("ngIf",e.montant_verse===0)}}function ii(a,t){a&1&&(i(0,"tr")(1,"td",70)(2,"div",71),p(3,"i",72),i(4,"span"),o(5,"Aucune facture pour ce prestataire"),n()()()())}function ni(a,t){a&1&&(i(0,"small",84),o(1,"Montant requis."),n())}function ai(a,t){if(a&1){let e=b();i(0,"div",74)(1,"div",75)(2,"span",76),o(3),n(),p(4,"span",77),i(5,"span"),o(6,"Total : "),i(7,"strong"),o(8),C(9,"money"),n()(),p(10,"span",77),i(11,"span",78),o(12,"Vers\xE9 : "),i(13,"strong"),o(14),C(15,"money"),n()(),p(16,"span",77),i(17,"span",79),o(18),C(19,"money"),n()(),i(20,"div",74)(21,"div",28)(22,"label",80),o(23,"Mode de paiement"),n(),i(24,"p-select",81),w("ngModelChange",function(l){_(e);let u=m(2);return M(u.versementData.mode_paiement,l)||(u.versementData.mode_paiement=l),g(l)}),n()(),i(25,"div",28)(26,"label",80),o(27,"Montant \xE0 verser"),n(),i(28,"p-inputnumber",82),w("ngModelChange",function(l){_(e);let u=m(2);return M(u.versementData.montant,l)||(u.versementData.montant=l),g(l)}),n(),h(29,ni,2,0,"small",83),n()()()}if(a&2){let e=m(2);s(3),d(e.selectedFacture.reference.replace("FACT-PACK-","")),s(5),d(P(9,11,e.selectedFacture.montant_total,"GNF")),s(6),d(P(15,14,e.selectedFacture.montant_verse,"GNF")),s(4),T("Restant : ",P(19,17,e.selectedFacture.montant_restant,"GNF")),s(6),S("ngModel",e.versementData.mode_paiement),c("options",e.modesPaiement),s(4),S("ngModel",e.versementData.montant),c("min",1)("max",e.selectedFacture.montant_restant)("useGrouping",!0),s(),c("ngIf",e.versementSubmitted&&!e.versementData.montant)}}function ri(a,t){if(a&1&&h(0,ai,30,20,"div",73),a&2){let e=m();c("ngIf",e.selectedFacture)}}function oi(a,t){if(a&1){let e=b();i(0,"button",85),f("click",function(){_(e);let l=m();return g(l.hideVersementDialog())}),i(1,"span",86),o(2,"Annuler"),n()(),i(3,"button",87),f("click",function(){_(e);let l=m();return g(l.saveVersement())}),i(4,"span",86),o(5,"Enregistrer"),n()()}if(a&2){let e=m();c("outlined",!0),s(3),c("disabled",e.versementSaving)("loading",e.versementSaving)}}function si(a,t){a&1&&(i(0,"div",89),p(1,"i",90),n())}function li(a,t){a&1&&(i(0,"tr")(1,"th")(2,"span",39),o(3,"Date"),n()(),i(4,"th",46)(5,"span",44),o(6,"Montant"),n()(),i(7,"th")(8,"span",39),o(9,"Mode"),n()(),i(10,"th")(11,"span",39),o(12,"Notes"),n()(),p(13,"th",97),n())}function mi(a,t){if(a&1){let e=b();i(0,"tr")(1,"td",98),o(2),n(),i(3,"td",99),o(4),n(),i(5,"td"),o(6),n(),i(7,"td",98),o(8),n(),i(9,"td",60)(10,"p-button",69),f("click",function(){let l=_(e).$implicit,u=m(4);return g(u.confirmDeleteVersement(u.historiqueData.facture_id,l))}),n()()()}if(a&2){let e=t.$implicit,r=m(4);s(2),d(r.formatDateDisplay(e.date_versement)),s(2),d(r.formatCurrency(e.montant)),s(2),d(e.mode_paiement_label),s(2),d(e.notes||"-"),s(2),c("text",!0)("rounded",!0)}}function ci(a,t){if(a&1&&(i(0,"p-table",96),h(1,li,14,0,"ng-template",null,1,v)(3,mi,11,6,"ng-template",null,2,v),n()),a&2){let e=m(3);c("value",e.historiqueData.versements)("rowHover",!0)}}function pi(a,t){a&1&&(i(0,"div",71),p(1,"i",72),i(2,"span"),o(3,"Aucun versement enregistr\xE9"),n()())}function di(a,t){if(a&1&&(i(0,"div",74)(1,"div",75)(2,"span",91),o(3),n(),p(4,"span",77),i(5,"span"),o(6,"Total: "),i(7,"strong"),o(8),n()(),p(9,"span",77),i(10,"span",78),o(11,"Vers\xE9: "),i(12,"strong"),o(13),n()(),p(14,"span",77),i(15,"span",92),o(16),n(),i(17,"span",93)(18,"span",61),o(19),n()()(),h(20,ci,5,2,"p-table",94)(21,pi,4,0,"div",95),n()),a&2){let e=m(2);s(3),d(e.historiqueData.reference.replace("FACT-PACK-","")),s(5),d(e.formatCurrency(e.historiqueData.montant_total)),s(5),d(e.formatCurrency(e.historiqueData.montant_verse)),s(3),T("Restant: ",e.formatCurrency(e.historiqueData.montant_restant)),s(2),c("ngClass",e.historiqueData.is_soldee?"status-badge--success":"status-badge--warn"),s(),T(" ",e.historiqueData.is_soldee?"Sold\xE9":"En cours"," "),s(),c("ngIf",e.historiqueData.versements.length>0),s(),c("ngIf",e.historiqueData.versements.length===0)}}function ui(a,t){if(a&1&&h(0,si,2,0,"div",88)(1,di,22,8,"div",73),a&2){let e=m();c("ngIf",e.historiqueLoading),s(),c("ngIf",e.historiqueData)}}function _i(a,t){if(a&1){let e=b();i(0,"p-button",100),f("click",function(){_(e);let l=m();return g(l.historiqueDialog=!1)}),n()}a&2&&c("text",!0)}var Ae=class a{constructor(t,e,r,l,u){this.route=t;this.router=e;this.factureService=r;this.messageService=l;this.confirmationService=u}prestataireId=0;prestataireNom="";prestatairePhone="";factures=J([]);loading=!1;totalFacture=0;totalVerse=0;totalRestant=0;versementDialog=!1;selectedFacture=null;versementData={montant:null,date_versement:new Date,mode_paiement:"especes",notes:""};versementSaving=!1;versementSubmitted=!1;modesPaiement=[{label:Q.especes,value:"especes"},{label:Q.virement,value:"virement"},{label:Q.cheque,value:"cheque"},{label:Q.mobile_money,value:"mobile_money"}];historiqueDialog=!1;historiqueData=null;historiqueLoading=!1;ngOnInit(){this.route.params.subscribe(t=>{this.prestataireId=+t.id||0}),this.route.queryParams.subscribe(t=>{this.prestataireNom=t.prestataire_nom||"",this.prestatairePhone=t.prestataire_phone||""}),this.prestataireId&&this.loadFactures()}loadFactures(){this.loading=!0,this.factureService.getFactures({prestataire_id:this.prestataireId}).subscribe({next:t=>{let e=(t.data||[]).map(r=>new Ie(r));this.factures.set(e),this.calculateTotals(e),this.loading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger les factures",life:3e3}),this.loading=!1}})}calculateTotals(t){this.totalFacture=t.reduce((e,r)=>e+r.montant_total,0),this.totalVerse=t.reduce((e,r)=>e+r.montant_verse,0),this.totalRestant=t.reduce((e,r)=>e+r.montant_restant,0)}openVersement(t){this.selectedFacture=t,this.versementDialog=!0,this.versementSubmitted=!1,this.versementData={montant:t.montant_restant,date_versement:new Date,mode_paiement:"especes",notes:""}}hideVersementDialog(){this.versementDialog=!1,this.selectedFacture=null,this.versementSubmitted=!1}saveVersement(){if(this.versementSubmitted=!0,!this.selectedFacture||!this.versementData.montant||!this.versementData.date_versement||this.versementSaving)return;this.versementSaving=!0;let t={montant:this.versementData.montant,date_versement:this.formatDate(this.versementData.date_versement),mode_paiement:this.versementData.mode_paiement,notes:this.versementData.notes||void 0};this.factureService.createVersement(this.selectedFacture.id,t).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Versement de ${this.formatCurrency(t.montant)} enregistr\xE9`,life:3e3}),this.versementSaving=!1,this.versementDialog=!1,this.loadFactures()},error:e=>{let r=e?.error?.message||"Impossible d'enregistrer le versement";this.messageService.add({severity:"error",summary:"Erreur",detail:r,life:5e3}),this.versementSaving=!1}})}openHistorique(t){this.historiqueDialog=!0,this.historiqueLoading=!0,this.historiqueData=null,this.factureService.getVersements(t.id).subscribe({next:e=>{this.historiqueData=e.data,this.historiqueLoading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger les versements",life:3e3}),this.historiqueLoading=!1,this.historiqueDialog=!1}})}confirmDeleteVersement(t,e){this.confirmationService.confirm({message:`Supprimer le versement de ${this.formatCurrency(e.montant)} ?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Supprimer",rejectLabel:"Annuler",accept:()=>{this.factureService.deleteVersement(t,e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Versement supprim\xE9",life:3e3}),this.historiqueData&&this.openHistorique({id:t}),this.loadFactures()},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de supprimer le versement",life:3e3})}})}})}confirmDeleteFacture(t){this.confirmationService.confirm({message:`Supprimer la facture ${t.reference} ?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Supprimer",rejectLabel:"Annuler",accept:()=>{this.factureService.deleteFacture(t.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Facture supprim\xE9e",life:3e3}),this.loadFactures()},error:e=>{let r=e?.error?.message||"Impossible de supprimer la facture";this.messageService.add({severity:"error",summary:"Erreur",detail:r,life:5e3})}})}})}getStatutSeverity(t){return lt[t]??"info"}formatDate(t){return t?typeof t=="string"?t:new Date(t).toISOString().split("T")[0]:""}formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t)+" GNF"}formatDateDisplay(t){return t?new Date(t).toLocaleDateString("fr-FR"):""}goBack(){this.router.navigate(["/comptabilite/comptabilite-packing-liste"])}slideoverVisible=!1;slideoverFacture=null;slideoverSaving=!1;openSlideoverPaiement(t){this.slideoverFacture=t,this.slideoverVisible=!0}closeSlideoverPaiement(){this.slideoverVisible=!1,this.slideoverFacture=null}onSlideoverPay(t){if(!this.slideoverFacture||this.slideoverSaving)return;this.slideoverSaving=!0;let e={montant:t.montant,date_versement:this.formatDate(new Date),mode_paiement:t.mode_paiement};this.factureService.createVersement(this.slideoverFacture.id,e).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Versement de ${this.formatCurrency(e.montant)} enregistr\xE9`,life:3e3}),this.slideoverSaving=!1,this.closeSlideoverPaiement(),this.loadFactures()},error:r=>{let l=r?.error?.message||"Impossible d'enregistrer le versement";this.messageService.add({severity:"error",summary:"Erreur",detail:l,life:5e3}),this.slideoverSaving=!1}})}static \u0275fac=function(e){return new(e||a)(O(Ye),O(ne),O(R),O(I),O(W))};static \u0275cmp=D({type:a,selectors:[["app-comptabilite-packing-detail"]],features:[A([I,W])],decls:58,vars:45,consts:[["caption",""],["header",""],["body",""],["emptymessage",""],["content",""],["footer",""],["position","top-right","appendTo","body",3,"baseZIndex","preventOpenDuplicates"],[1,"detail-header"],[1,"detail-header__left"],["icon","pi pi-arrow-left","severity","secondary","pTooltip","Retour",3,"click","rounded","text"],[1,"detail-header__name"],["class","detail-header__phone",4,"ngIf"],["class","fixed inset-0 z-50",4,"ngIf"],[1,"stats-bar","mb-6"],[1,"stats-bar__item"],[1,"stats-bar__icon","stats-bar__icon--primary"],[1,"pi","pi-wallet"],[1,"stats-bar__value"],[1,"stats-bar__label"],[1,"stats-bar__divider"],[1,"stats-bar__icon","stats-bar__icon--success"],[1,"pi","pi-check-circle"],[1,"stats-bar__value","stats-bar__value--success"],[1,"stats-bar__icon","stats-bar__icon--warning"],[1,"pi","pi-arrow-right"],[1,"card","tableau-card"],["dataKey","id","currentPageReportTemplate","{first} \xE0 {last} sur {totalRecords} factures",3,"value","rows","paginator","rowHover","showCurrentPageReport","rowsPerPageOptions","loading","tableStyle"],["header","Enregistrer un versement",3,"visibleChange","visible","contentStyle","modal","blockScroll","dismissableMask","closeOnEscape"],[1,"mt-4"],["header","Historique des versements",3,"visibleChange","visible","contentStyle","modal","blockScroll","dismissableMask","closeOnEscape"],[1,"detail-header__phone"],[1,"pi","pi-phone"],[1,"fixed","inset-0","z-50"],[1,"absolute","inset-0","bg-black/50","animate-fadein",3,"click"],[1,"bg-surface-0","dark:bg-surface-900","absolute","top-0","right-0","shadow-xl","w-full","md:w-108","h-full","animate-fadeinright"],[3,"onPay","onClose","facture","saving"],[1,"table-caption"],[1,"table-caption__title"],["pSortableColumn","reference"],[1,"col-header"],["field","reference"],["pSortableColumn","date"],["field","date"],["pSortableColumn","total_rouleaux",1,"text-right"],[1,"col-header","justify-end"],["field","total_rouleaux"],[1,"text-right"],["pSortableColumn","montant_total",1,"text-right"],["field","montant_total"],["pSortableColumn","montant_verse",1,"text-right"],["field","montant_verse"],["pSortableColumn","statut",1,"text-center"],[1,"col-header","justify-center"],["field","statut"],[2,"width","10rem"],[1,"font-semibold"],[1,"cell-secondary","font-semibold"],[1,"text-right","cell-mono","font-semibold"],[1,"text-right","cell-mono","cell-success","font-semibold"],[1,"text-right","cell-mono","cell-bold"],[1,"text-center"],[1,"status-badge",3,"ngClass"],[1,"flex","items-center","justify-end","gap-1"],["icon","pi pi-money-bill","severity","success","pTooltip","Payer (dialogue)",3,"text","rounded","click",4,"ngIf"],["icon","pi pi-wallet","severity","warn","pTooltip","Payer (panneau)",3,"text","rounded","click",4,"ngIf"],["icon","pi pi-list","severity","info","pTooltip","Historique versements",3,"click","text","rounded"],["icon","pi pi-trash","severity","danger","pTooltip","Supprimer",3,"text","rounded","click",4,"ngIf"],["icon","pi pi-money-bill","severity","success","pTooltip","Payer (dialogue)",3,"click","text","rounded"],["icon","pi pi-wallet","severity","warn","pTooltip","Payer (panneau)",3,"click","text","rounded"],["icon","pi pi-trash","severity","danger","pTooltip","Supprimer",3,"click","text","rounded"],["colspan","9"],[1,"empty-state"],[1,"pi","pi-inbox"],["class","flex flex-col gap-4",4,"ngIf"],[1,"flex","flex-col","gap-4"],[1,"preview-summary"],[1,"font-bold"],[1,"preview-summary__sep"],[1,"cell-success"],[1,"font-bold",2,"color","#d97706"],[1,"block","font-bold","mb-2"],["optionLabel","label","optionValue","value","styleClass","w-full","appendTo","body",3,"ngModelChange","ngModel","options"],["suffix"," GNF","locale","fr-FR","inputStyleClass","w-full","styleClass","w-full",3,"ngModelChange","ngModel","min","max","useGrouping"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],["pButton","",3,"click","outlined"],["pButtonLabel",""],["pButton","",3,"click","disabled","loading"],["class","flex items-center justify-center p-12",4,"ngIf"],[1,"flex","items-center","justify-center","p-12"],[1,"pi","pi-spin","pi-spinner","text-3xl","text-surface-300"],[1,"font-bold","text-lg"],[1,"cell-bold"],[1,"ml-auto"],[3,"value","rowHover",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"value","rowHover"],[2,"width","4rem"],[1,"cell-secondary"],[1,"text-right","cell-mono","cell-success","font-bold"],["label","Fermer",3,"click","text"]],template:function(e,r){if(e&1){let l=b();p(0,"p-toast",6),i(1,"div",7)(2,"div",8)(3,"p-button",9),f("click",function(){return _(l),g(r.goBack())}),n(),i(4,"div")(5,"h4",10),o(6),n(),h(7,Kt,4,4,"span",11),n()(),p(8,"div"),n(),h(9,Qt,4,2,"div",12),i(10,"div",13)(11,"div",14)(12,"div",15),p(13,"i",16),n(),i(14,"div")(15,"div",17),o(16),n(),i(17,"div",18),o(18,"Total \xE0 payer"),n()()(),p(19,"div",19),i(20,"div",14)(21,"div",20),p(22,"i",21),n(),i(23,"div")(24,"div",22),o(25),n(),i(26,"div",18),o(27,"Total vers\xE9"),n()()(),p(28,"div",19),i(29,"div",14)(30,"div",23),p(31,"i",24),n(),i(32,"div")(33,"div",17),o(34),n(),i(35,"div",18),o(36,"Reste \xE0 payer"),n()()()(),i(37,"div",25)(38,"p-table",26),h(39,Yt,3,0,"ng-template",null,0,v)(41,Zt,32,0,"ng-template",null,1,v)(43,ti,28,31,"ng-template",null,2,v)(45,ii,6,0,"ng-template",null,3,v),n()(),i(47,"p-dialog",27),w("visibleChange",function(x){return _(l),M(r.versementDialog,x)||(r.versementDialog=x),g(x)}),h(48,ri,1,1,"ng-template",null,4,v)(50,oi,6,3,"ng-template",28,5,v),n(),i(52,"p-dialog",29),w("visibleChange",function(x){return _(l),M(r.historiqueDialog,x)||(r.historiqueDialog=x),g(x)}),h(53,ui,2,2,"ng-template",null,4,v)(55,_i,1,1,"ng-template",null,5,v),n(),p(57,"p-confirmdialog")}e&2&&(c("baseZIndex",1100)("preventOpenDuplicates",!0),s(3),c("rounded",!0)("text",!0),s(3),d(r.prestataireNom),s(),c("ngIf",r.prestatairePhone),s(2),c("ngIf",r.slideoverVisible),s(7),d(r.formatCurrency(r.totalFacture)),s(9),d(r.formatCurrency(r.totalVerse)),s(8),B("stats-bar__value--warning",r.totalRestant>0),s(),d(r.formatCurrency(r.totalRestant)),s(4),c("value",r.factures())("rows",10)("paginator",!0)("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",E(38,zt))("loading",r.loading)("tableStyle",E(39,Ht)),s(9),N(E(40,dt)),S("visible",r.versementDialog),c("contentStyle",E(41,ut))("modal",!0)("blockScroll",!0)("dismissableMask",!1)("closeOnEscape",!1),s(5),N(E(42,dt)),S("visible",r.historiqueDialog),c("contentStyle",E(43,ut))("modal",!0)("blockScroll",!0)("dismissableMask",!1)("closeOnEscape",!1),s(5),N(E(44,Ut)))},dependencies:[F,te,L,Ce,ve,he,xe,G,q,j,z,le,me,se,oe,ke,ye,Se,re,be,fe,H,ge,we,Me,Pe,pe,ce,Oe,Ee,_e,De,ue,de,ae,Be,ot,nt,Fe,U],styles:[".detail-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:var(--p-surface-0);border-radius:14px;padding:1.25rem 1.75rem;margin-bottom:1.5rem;box-shadow:0 1px 3px #0000000a}.detail-header__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.detail-header__name[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:700;color:var(--p-surface-800)}.detail-header__phone[_ngcontent-%COMP%]{font-size:.85rem;color:var(--p-surface-400);display:flex;align-items:center;gap:.35rem;margin-top:.15rem}.stats-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--p-surface-0);border-radius:14px;padding:1.25rem 2rem;box-shadow:0 1px 3px #0000000a}.stats-bar__item[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:1rem;padding:.5rem 1.5rem}.stats-bar__divider[_ngcontent-%COMP%]{width:1px;height:40px;background:var(--p-surface-200);flex-shrink:0}.stats-bar__icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:1.1rem}.stats-bar__icon--primary[_ngcontent-%COMP%]{background:var(--p-primary-50);color:var(--p-primary-500)}.stats-bar__icon--success[_ngcontent-%COMP%]{background:#ecfdf5;color:#10b981}.stats-bar__icon--warning[_ngcontent-%COMP%]{background:#fff7ed;color:#f59e0b}.stats-bar__value[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:var(--p-surface-900);letter-spacing:-.02em;line-height:1.2}.stats-bar__value--success[_ngcontent-%COMP%]{color:#059669}.stats-bar__value--warning[_ngcontent-%COMP%]{color:#d97706}.stats-bar__label[_ngcontent-%COMP%]{font-size:.78rem;color:var(--p-surface-400);margin-top:2px}.tableau-card[_ngcontent-%COMP%]{border-radius:14px!important;box-shadow:0 1px 3px #0000000a!important;overflow:hidden}.table-caption__title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:var(--p-surface-700)}.col-header[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.03em;color:var(--p-surface-500)}.cell-secondary[_ngcontent-%COMP%]{color:var(--p-surface-500);font-size:.9rem}.cell-mono[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums;font-size:.9rem}.cell-success[_ngcontent-%COMP%]{color:#059669}.cell-bold[_ngcontent-%COMP%]{font-weight:600;color:var(--p-surface-800)}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.78rem;font-weight:600}.status-badge--danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.status-badge--warn[_ngcontent-%COMP%]{background:#fffbeb;color:#d97706}.status-badge--success[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669}.status-badge--secondary[_ngcontent-%COMP%]{background:var(--p-surface-100);color:var(--p-surface-500)}.preview-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.25rem;background:var(--p-surface-50);border-radius:10px;font-size:.9rem;color:var(--p-surface-600);flex-wrap:wrap}.preview-summary__sep[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%;background:var(--p-surface-300)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;padding:3rem 0;color:var(--p-surface-300)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem 1.25rem}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1.1rem 1.25rem}@media (max-width: 768px){.stats-bar[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;padding:1rem}.stats-bar__item[_ngcontent-%COMP%]{padding:.75rem 1rem;width:100%}.stats-bar__divider[_ngcontent-%COMP%]{width:100%;height:1px}}.dark[_nghost-%COMP%]   .detail-header[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .detail-header[_ngcontent-%COMP%]{background:var(--p-surface-800)}.dark[_nghost-%COMP%]   .detail-header__name[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .detail-header__name[_ngcontent-%COMP%]{color:var(--p-surface-0)}.dark[_nghost-%COMP%]   .stats-bar[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar[_ngcontent-%COMP%]{background:var(--p-surface-800);box-shadow:0 1px 3px #00000026}.dark[_nghost-%COMP%]   .stats-bar__divider[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__divider[_ngcontent-%COMP%]{background:var(--p-surface-600)}.dark[_nghost-%COMP%]   .stats-bar__icon--primary[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__icon--primary[_ngcontent-%COMP%]{background:#3b82f61f}.dark[_nghost-%COMP%]   .stats-bar__icon--success[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__icon--success[_ngcontent-%COMP%]{background:#10b9811f}.dark[_nghost-%COMP%]   .stats-bar__icon--warning[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__icon--warning[_ngcontent-%COMP%]{background:#f59e0b1f}.dark[_nghost-%COMP%]   .stats-bar__value[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .stats-bar__value[_ngcontent-%COMP%]{color:var(--p-surface-0)}.dark[_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .cell-prestataire__name[_ngcontent-%COMP%], .dark[_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .cell-bold[_ngcontent-%COMP%]{color:var(--p-surface-100)}.dark[_nghost-%COMP%]   .table-caption__title[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .table-caption__title[_ngcontent-%COMP%]{color:var(--p-surface-200)}.dark[_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .status-badge--danger[_ngcontent-%COMP%]{background:#dc26261f}.dark[_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .status-badge--warn[_ngcontent-%COMP%]{background:#d977061f}.dark[_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .status-badge--success[_ngcontent-%COMP%]{background:#0596691f}.dark[_nghost-%COMP%]   .status-badge--secondary[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .status-badge--secondary[_ngcontent-%COMP%]{background:var(--p-surface-700)}.dark[_nghost-%COMP%]   .preview-summary[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .preview-summary[_ngcontent-%COMP%]{background:var(--p-surface-700)}"]})};var pa=[{path:"",component:Z},{path:"comptabilite-packing-liste",component:Z},{path:"comptabilite-packing-detail/:id",component:Ae},{path:"**",redirectTo:"/notfound"}];export{pa as default};
