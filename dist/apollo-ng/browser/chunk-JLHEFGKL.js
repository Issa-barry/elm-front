import{a as F}from"./chunk-7N4JNZOK.js";import{a as P}from"./chunk-M7MSZX5F.js";import{Ba as N,Ea as K,Ga as h,Ha as U,ua as p,xa as c}from"./chunk-LL554BBV.js";import{k as X,v as Y}from"./chunk-4WY7URSD.js";import{$b as A,Ab as w,Bb as V,Mb as B,Nb as $,Oa as d,Oc as g,Pc as o,R as M,S as k,T as y,Ta as R,V as _,X as m,Xb as I,_b as u,bc as S,ca as f,cb as C,db as T,gb as D,hb as L,ib as E,ic as z,ja as x,oa as v,qb as l,yb as r,zb as b}from"./chunk-VV6362ZN.js";var j=`
    .p-knob-range {
        fill: none;
        transition: stroke 0.1s ease-in;
    }

    .p-knob-value {
        animation-name: p-knob-dash-frame;
        animation-fill-mode: forwards;
        fill: none;
    }

    .p-knob-text {
        font-size: 1.3rem;
        text-align: center;
    }

    .p-knob svg {
        border-radius: 50%;
        outline-color: transparent;
        transition:
            background dt('knob.transition.duration'),
            color dt('knob.transition.duration'),
            outline-color dt('knob.transition.duration'),
            box-shadow dt('knob.transition.duration');
    }

    .p-knob svg:focus-visible {
        box-shadow: dt('knob.focus.ring.shadow');
        outline: dt('knob.focus.ring.width') dt('knob.focus.ring.style') dt('knob.focus.ring.color');
        outline-offset: dt('knob.focus.ring.offset');
    }

    @keyframes p-knob-dash-frame {
        100% {
            stroke-dashoffset: 0;
        }
    }
`;function q(n,Z){if(n&1&&(f(),b(0,"text",3),A(1),w()),n&2){let e=$();u(e.cx("text")),r("pBind",e.ptm("text")),l("x",50)("y",57)("fill",e.textColor)("name",e.name()),d(),S(" ",e.valueToDisplay()," ")}}var J={root:({instance:n})=>["p-knob p-component",{"p-disabled":n.$disabled()}],range:"p-knob-range",value:"p-knob-value",text:"p-knob-text"},O=(()=>{class n extends N{name="knob";style=j;classes=J;static \u0275fac=(()=>{let e;return function(t){return(e||(e=v(n)))(t||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();var W=new _("KNOB_INSTANCE"),Q={provide:P,useExisting:M(()=>H),multi:!0},H=(()=>{class n extends F{$pcKnob=m(W,{optional:!0,skipSelf:!0})??void 0;bindDirectiveInstance=m(h,{self:!0});onAfterViewChecked(){this.bindDirectiveInstance.setAttrs(this.ptms(["host","root"]))}styleClass;ariaLabel;ariaLabelledBy;tabindex=0;valueColor=c("knob.value.background").variable;rangeColor=c("knob.range.background").variable;textColor=c("knob.text.color").variable;valueTemplate="{value}";size=100;min=0;max=100;step=1;strokeWidth=14;showValue=!0;readonly=!1;onChange=new R;radius=40;midX=50;midY=50;minRadians=4*Math.PI/3;maxRadians=-Math.PI/3;value=x(0);windowMouseMoveListener;windowMouseUpListener;windowTouchMoveListener;windowTouchEndListener;_componentStyle=m(O);mapRange(e,i,t,s,a){return(e-i)*(a-s)/(t-i)+s}onClick(e){!this.$disabled()&&!this.readonly&&this.updateValue(e.offsetX,e.offsetY)}updateValue(e,i){let t=e-this.size/2,s=this.size/2-i,a=Math.atan2(s,t),G=-Math.PI/2-Math.PI/6;this.updateModel(a,G)}updateModel(e,i){let t;if(e>this.maxRadians)t=this.mapRange(e,this.minRadians,this.maxRadians,this.min,this.max);else if(e<i)t=this.mapRange(e+2*Math.PI,this.minRadians,this.maxRadians,this.min,this.max);else return;let s=Math.round((t-this.min)/this.step)*this.step+this.min;this.value.set(s),this.writeModelValue(this.value()),this.onModelChange(this.value()),this.onChange.emit(this.value())}onMouseDown(e){if(!this.$disabled()&&!this.readonly){let i=this.document.defaultView||"window";this.windowMouseMoveListener=this.renderer.listen(i,"mousemove",this.onMouseMove.bind(this)),this.windowMouseUpListener=this.renderer.listen(i,"mouseup",this.onMouseUp.bind(this)),e.preventDefault()}}onMouseUp(e){!this.$disabled()&&!this.readonly&&(this.windowMouseMoveListener&&(this.windowMouseMoveListener(),this.windowMouseUpListener=null),this.windowMouseUpListener&&(this.windowMouseUpListener(),this.windowMouseMoveListener=null),e.preventDefault())}onTouchStart(e){if(!this.$disabled()&&!this.readonly){let i=this.document.defaultView||"window";this.windowTouchMoveListener=this.renderer.listen(i,"touchmove",this.onTouchMove.bind(this)),this.windowTouchEndListener=this.renderer.listen(i,"touchend",this.onTouchEnd.bind(this)),e.preventDefault()}}onTouchEnd(e){!this.$disabled()&&!this.readonly&&(this.windowTouchMoveListener&&this.windowTouchMoveListener(),this.windowTouchEndListener&&this.windowTouchEndListener(),this.windowTouchMoveListener=null,this.windowTouchEndListener=null,e.preventDefault())}onMouseMove(e){!this.$disabled()&&!this.readonly&&(this.updateValue(e.offsetX,e.offsetY),e.preventDefault())}onTouchMove(e){if(!this.$disabled()&&!this.readonly&&e instanceof TouchEvent&&e.touches.length===1){let i=this.el.nativeElement.children[0].getBoundingClientRect(),t=e.targetTouches.item(0);if(t){let s=t.clientX-i.left,a=t.clientY-i.top;this.updateValue(s,a)}}}updateModelValue(e){e>this.max?this.value.set(this.max):e<this.min?this.value.set(this.min):this.value.set(e),this.writeModelValue(this.value()),this.onModelChange(this.value()),this.onChange.emit(this.value())}onKeyDown(e){if(!this.$disabled()&&!this.readonly)switch(e.code){case"ArrowRight":case"ArrowUp":{e.preventDefault(),this.updateModelValue(this._value+1);break}case"ArrowLeft":case"ArrowDown":{e.preventDefault(),this.updateModelValue(this._value-1);break}case"Home":{e.preventDefault(),this.updateModelValue(this.min);break}case"End":{e.preventDefault(),this.updateModelValue(this.max);break}case"PageUp":{e.preventDefault(),this.updateModelValue(this._value+10);break}case"PageDown":{e.preventDefault(),this.updateModelValue(this._value-10);break}}}rangePath(){return`M ${this.minX()} ${this.minY()} A ${this.radius} ${this.radius} 0 1 1 ${this.maxX()} ${this.maxY()}`}valuePath(){return`M ${this.zeroX()} ${this.zeroY()} A ${this.radius} ${this.radius} 0 ${this.largeArc()} ${this.sweep()} ${this.valueX()} ${this.valueY()}`}zeroRadians(){return this.min>0&&this.max>0?this.mapRange(this.min,this.min,this.max,this.minRadians,this.maxRadians):this.mapRange(0,this.min,this.max,this.minRadians,this.maxRadians)}valueRadians(){return this.mapRange(this._value,this.min,this.max,this.minRadians,this.maxRadians)}minX(){return this.midX+Math.cos(this.minRadians)*this.radius}minY(){return this.midY-Math.sin(this.minRadians)*this.radius}maxX(){return this.midX+Math.cos(this.maxRadians)*this.radius}maxY(){return this.midY-Math.sin(this.maxRadians)*this.radius}zeroX(){return this.midX+Math.cos(this.zeroRadians())*this.radius}zeroY(){return this.midY-Math.sin(this.zeroRadians())*this.radius}valueX(){return this.midX+Math.cos(this.valueRadians())*this.radius}valueY(){return this.midY-Math.sin(this.valueRadians())*this.radius}largeArc(){return Math.abs(this.zeroRadians()-this.valueRadians())<Math.PI?0:1}sweep(){return this.valueRadians()>this.zeroRadians()?0:1}valueToDisplay(){return this.valueTemplate.replace("{value}",this._value.toString())}get _value(){return this.value()!=null?this.value():this.min}writeControlValue(e,i){this.value.set(e),i(this.value()),this.cd.markForCheck()}static \u0275fac=(()=>{let e;return function(t){return(e||(e=v(n)))(t||n)}})();static \u0275cmp=C({type:n,selectors:[["p-knob"]],hostVars:2,hostBindings:function(i,t){i&2&&u(t.cn(t.cx("root"),t.styleClass))},inputs:{styleClass:"styleClass",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",tabindex:[2,"tabindex","tabindex",o],valueColor:"valueColor",rangeColor:"rangeColor",textColor:"textColor",valueTemplate:"valueTemplate",size:[2,"size","size",o],min:[2,"min","min",o],max:[2,"max","max",o],step:[2,"step","step",o],strokeWidth:[2,"strokeWidth","strokeWidth",o],showValue:[2,"showValue","showValue",g],readonly:[2,"readonly","readonly",g]},outputs:{onChange:"onChange"},features:[z([Q,O,{provide:W,useExisting:n},{provide:K,useExisting:n}]),L([h]),D],decls:4,vars:25,consts:[["viewBox","0 0 100 100","role","slider",3,"click","keydown","mousedown","mouseup","touchstart","touchend","pBind"],[3,"pBind"],["text-anchor","middle",3,"class","pBind",4,"ngIf"],["text-anchor","middle",3,"pBind"]],template:function(i,t){i&1&&(f(),b(0,"svg",0),B("click",function(a){return t.onClick(a)})("keydown",function(a){return t.onKeyDown(a)})("mousedown",function(a){return t.onMouseDown(a)})("mouseup",function(a){return t.onMouseUp(a)})("touchstart",function(a){return t.onTouchStart(a)})("touchend",function(a){return t.onTouchEnd(a)}),V(1,"path",1)(2,"path",1),E(3,q,2,8,"text",2),w()),i&2&&(I("width",t.size+"px")("height",t.size+"px"),r("pBind",t.ptm("svg")),l("aria-valuemin",t.min)("aria-valuemax",t.max)("required",t.required()?"":void 0)("aria-valuenow",t._value)("aria-labelledby",t.ariaLabelledBy)("aria-label",t.ariaLabel)("tabindex",t.readonly||t.$disabled()?-1:t.tabindex),d(),u(t.cx("range")),r("pBind",t.ptm("range")),l("d",t.rangePath())("stroke-width",t.strokeWidth)("stroke",t.rangeColor),d(),u(t.cx("value")),r("pBind",t.ptm("value")),l("d",t.valuePath())("stroke-width",t.strokeWidth)("stroke",t.valueColor),d(),r("ngIf",t.showValue))},dependencies:[Y,X,p,U,h],encapsulation:2,changeDetection:0})}return n})(),ke=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=T({type:n});static \u0275inj=y({imports:[H,p,p]})}return n})();export{H as a,ke as b};
