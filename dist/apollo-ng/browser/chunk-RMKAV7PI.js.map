{
  "version": 3,
  "sources": ["src/app/services/prestataire/prestataire.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n import { Prestataire, CreatePrestataireDto, UpdatePrestataireDto } from '@/models/prestataire.model';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n// Interfaces pour les réponses API\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport interface PaginatedResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: {\r\n    current_page: number;\r\n    data: T[];\r\n    first_page_url: string;\r\n    from: number;\r\n    last_page: number;\r\n    last_page_url: string;\r\n    links: any[];\r\n    next_page_url: string | null;\r\n    path: string;\r\n    per_page: number;\r\n    prev_page_url: string | null;\r\n    to: number;\r\n    total: number;\r\n  };\r\n}\r\n\r\n// Interface pour les filtres\r\nexport interface PrestataireFilters {\r\n  is_active?: boolean;\r\n  search?: string;\r\n  pays?: string;\r\n  ville?: string;\r\n  specialite?: string;\r\n  sort_by?: 'nom' | 'prenom' | 'email' | 'created_at' | 'tarif_horaire';\r\n  sort_order?: 'asc' | 'desc';\r\n  per_page?: number;\r\n  page?: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class PrestataireService {\r\n  private readonly apiUrl = `${environment.apiUrl}/prestataires`;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n   * Récupérer la liste des prestataires avec filtres optionnels\r\n   */\r\n  getPrestataires(filters?: PrestataireFilters): Observable<ApiResponse<Prestataire[]> | PaginatedResponse<Prestataire>> {\r\n    let params = new HttpParams();\r\n\r\n    if (filters) {\r\n      if (filters.is_active !== undefined) {\r\n        params = params.set('is_active', filters.is_active.toString());\r\n      }\r\n      if (filters.search) {\r\n        params = params.set('search', filters.search);\r\n      }\r\n      if (filters.pays) {\r\n        params = params.set('pays', filters.pays);\r\n      }\r\n      if (filters.ville) {\r\n        params = params.set('ville', filters.ville);\r\n      }\r\n      if (filters.specialite) {\r\n        params = params.set('specialite', filters.specialite);\r\n      }\r\n      if (filters.sort_by) {\r\n        params = params.set('sort_by', filters.sort_by);\r\n      }\r\n      if (filters.sort_order) {\r\n        params = params.set('sort_order', filters.sort_order);\r\n      }\r\n      if (filters.per_page) {\r\n        params = params.set('per_page', filters.per_page.toString());\r\n      }\r\n      if (filters.page) {\r\n        params = params.set('page', filters.page.toString());\r\n      }\r\n    }\r\n\r\n    return this.http.get<ApiResponse<Prestataire[]> | PaginatedResponse<Prestataire>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Récupérer un prestataire par son ID\r\n   */\r\n  getPrestataire(id: number): Observable<ApiResponse<Prestataire>> {\r\n    return this.http.get<ApiResponse<Prestataire>>(`${this.apiUrl}/${id}`);\r\n  }\r\n\r\n  /**\r\n   * Créer un nouveau prestataire\r\n   */\r\n  createPrestataire(data: CreatePrestataireDto): Observable<ApiResponse<Prestataire>> {\r\n    return this.http.post<ApiResponse<Prestataire>>(this.apiUrl, data);\r\n  }\r\n\r\n  /**\r\n   * Mettre à jour un prestataire\r\n   */\r\n  updatePrestataire(id: number, data: UpdatePrestataireDto): Observable<ApiResponse<Prestataire>> {\r\n    return this.http.put<ApiResponse<Prestataire>>(`${this.apiUrl}/${id}`, data);\r\n  }\r\n\r\n  /**\r\n   * Basculer le statut actif/inactif d'un prestataire\r\n   */\r\n  togglePrestataireStatus(id: number): Observable<ApiResponse<Prestataire>> {\r\n    return this.http.patch<ApiResponse<Prestataire>>(`${this.apiUrl}/${id}/toggle-status`, {});\r\n  }\r\n\r\n  /**\r\n   * Supprimer un prestataire (soft delete)\r\n   */\r\n  deletePrestataire(id: number): Observable<ApiResponse<null>> {\r\n    return this.http.delete<ApiResponse<null>>(`${this.apiUrl}/${id}`);\r\n  }\r\n\r\n  /**\r\n   * Restaurer un prestataire supprimé\r\n   */\r\n  restorePrestataire(id: number): Observable<ApiResponse<Prestataire>> {\r\n    return this.http.post<ApiResponse<Prestataire>>(`${this.apiUrl}/${id}/restore`, {});\r\n  }\r\n\r\n  /**\r\n   * Rechercher des prestataires\r\n   * Recherche dans: nom, prenom, email, phone, reference, raison_sociale\r\n   */\r\n  searchPrestataires(searchTerm: string): Observable<ApiResponse<Prestataire[]>> {\r\n    const params = new HttpParams().set('search', searchTerm);\r\n    return this.http.get<ApiResponse<Prestataire[]>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Obtenir uniquement les prestataires actifs\r\n   */\r\n  getActivePrestataires(): Observable<ApiResponse<Prestataire[]>> {\r\n    const params = new HttpParams().set('is_active', 'true');\r\n    return this.http.get<ApiResponse<Prestataire[]>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Obtenir les prestataires inactifs\r\n   */\r\n  getInactivePrestataires(): Observable<ApiResponse<Prestataire[]>> {\r\n    const params = new HttpParams().set('is_active', 'false');\r\n    return this.http.get<ApiResponse<Prestataire[]>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Obtenir les prestataires par pays\r\n   */\r\n  getPrestatairesByCountry(country: string): Observable<ApiResponse<Prestataire[]>> {\r\n    const params = new HttpParams().set('pays', country);\r\n    return this.http.get<ApiResponse<Prestataire[]>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Obtenir les prestataires par ville\r\n   */\r\n  getPrestatairesByCity(city: string): Observable<ApiResponse<Prestataire[]>> {\r\n    const params = new HttpParams().set('ville', city);\r\n    return this.http.get<ApiResponse<Prestataire[]>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Obtenir les prestataires par spécialité\r\n   */\r\n  getPrestatairesBySpecialite(specialite: string): Observable<ApiResponse<Prestataire[]>> {\r\n    const params = new HttpParams().set('specialite', specialite);\r\n    return this.http.get<ApiResponse<Prestataire[]>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Obtenir les prestataires avec pagination\r\n   */\r\n  getPrestatairesPaginated(\r\n    page: number = 1, \r\n    perPage: number = 10, \r\n    filters?: Omit<PrestataireFilters, 'page' | 'per_page'>\r\n  ): Observable<PaginatedResponse<Prestataire>> {\r\n    let params = new HttpParams()\r\n      .set('page', page.toString())\r\n      .set('per_page', perPage.toString());\r\n\r\n    if (filters) {\r\n      if (filters.is_active !== undefined) {\r\n        params = params.set('is_active', filters.is_active.toString());\r\n      }\r\n      if (filters.search) {\r\n        params = params.set('search', filters.search);\r\n      }\r\n      if (filters.pays) {\r\n        params = params.set('pays', filters.pays);\r\n      }\r\n      if (filters.ville) {\r\n        params = params.set('ville', filters.ville);\r\n      }\r\n      if (filters.specialite) {\r\n        params = params.set('specialite', filters.specialite);\r\n      }\r\n      if (filters.sort_by) {\r\n        params = params.set('sort_by', filters.sort_by);\r\n      }\r\n      if (filters.sort_order) {\r\n        params = params.set('sort_order', filters.sort_order);\r\n      }\r\n    }\r\n    \r\n    return this.http.get<PaginatedResponse<Prestataire>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Trier les prestataires\r\n   */\r\n  sortPrestataires(\r\n    sortBy: PrestataireFilters['sort_by'], \r\n    sortOrder: PrestataireFilters['sort_order'] = 'asc'\r\n  ): Observable<ApiResponse<Prestataire[]>> {\r\n    const params = new HttpParams()\r\n      .set('sort_by', sortBy || 'created_at')\r\n      .set('sort_order', sortOrder);\r\n    \r\n    return this.http.get<ApiResponse<Prestataire[]>>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * Obtenir les statistiques des prestataires\r\n   */\r\n  getStatistics(): Observable<ApiResponse<any>> {\r\n    return this.http.get<ApiResponse<any>>(`${this.apiUrl}/statistics`);\r\n  }\r\n\r\n  /**\r\n   * Obtenir les prestataires avec tarif horaire dans une fourchette\r\n   */\r\n  getPrestatairesByTarifRange(min: number, max: number): Observable<ApiResponse<Prestataire[]>> {\r\n    const params = new HttpParams()\r\n      .set('tarif_min', min.toString())\r\n      .set('tarif_max', max.toString());\r\n    \r\n    return this.http.get<ApiResponse<Prestataire[]>>(this.apiUrl, { params });\r\n  }\r\n}"],
  "mappings": "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",
  "names": []
}
